

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using NMSIS-NN &mdash; NMSIS 1.4.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=66b59bf7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=4c016a5a" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=9172181d"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NMSIS NN API" href="api/index.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/nmsis_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">Nuclei MCU Software Interface Standard(NMSIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">NMSIS Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dsp/index.html">NMSIS DSP</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">NMSIS NN</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using NMSIS-NN</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preparation">Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tool-setup">Tool Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-nmsis-nn-library">Build NMSIS NN Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-run">How to run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/index.html">NMSIS NN API</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NMSIS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">NMSIS NN</a></li>
      <li class="breadcrumb-item active">Using NMSIS-NN</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/nn/get_started.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="using-nmsis-nn">
<span id="nn-get-started"></span><h1>Using NMSIS-NN<a class="headerlink" href="#using-nmsis-nn" title="Link to this heading"></a></h1>
<p>Here we will describe how to run the nmsis nn examples in Nuclei QEMU.</p>
<section id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Nuclei SDK, <code class="docutils literal notranslate"><span class="pre">master</span></code> branch(&gt;= 0.8.0 release)</p></li>
<li><p>Nuclei RISC-V GNU Toolchain 2025.02</p></li>
<li><p>Nuclei QEMU 2025.02</p></li>
<li><p>CMake &gt;= 3.14</p></li>
<li><p>Python 3 and pip package requirements located in</p>
<ul>
<li><p>&lt;nuclei-sdk&gt;/tools/scripts/requirements.txt</p></li>
<li><p>&lt;NMSIS&gt;/NMSIS/Scripts/requirements.txt</p></li>
</ul>
</li>
</ul>
</section>
<section id="tool-setup">
<h2>Tool Setup<a class="headerlink" href="#tool-setup" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Export <strong>PATH</strong> correctly for <code class="docutils literal notranslate"><span class="pre">qemu</span></code> and <code class="docutils literal notranslate"><span class="pre">riscv64-unknown-elf-gcc</span></code></p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/path/to/qemu/bin:/path/to/gcc/bin:<span class="nv">$PATH</span>
</pre></div>
</div>
</section>
<section id="build-nmsis-nn-library">
<h2>Build NMSIS NN Library<a class="headerlink" href="#build-nmsis-nn-library" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Download or clone NMSIS source code into <strong>NMSIS</strong> directory.</p></li>
<li><p>cd to <cite>NMSIS/NMSIS/</cite> directory, if you want to add or remove more arches to be build,
you can modify <code class="docutils literal notranslate"><span class="pre">Scripts/Build/nmsis_nn.json</span></code> file</p></li>
<li><p>Build NMSIS NN library and strip debug information using <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">gen_nn_lib</span></code></p></li>
<li><p>The nn library will be generated into <code class="docutils literal notranslate"><span class="pre">./Library/NN/GCC</span></code> folder</p></li>
<li><p>The nn libraries will be look like this:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls -lhgG Library/NN/GCC/
total 64M
-rw-rw-r-- 1 619K Oct 20 11:55 libnmsis_nn_rv32imac.a
-rw-rw-r-- 1 983K Oct 20 11:55 libnmsis_nn_rv32imac_xxldsp.a
-rw-rw-r-- 1 986K Oct 20 11:55 libnmsis_nn_rv32imac_xxldspn1x.a
-rw-rw-r-- 1 989K Oct 20 11:55 libnmsis_nn_rv32imac_xxldspn2x.a
-rw-rw-r-- 1 992K Oct 20 11:55 libnmsis_nn_rv32imac_xxldspn3x.a
-rw-rw-r-- 1 607K Oct 20 11:55 libnmsis_nn_rv32imac_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 961K Oct 20 11:55 libnmsis_nn_rv32imac_zba_zbb_zbc_zbs_xxldsp.a
-rw-rw-r-- 1 964K Oct 20 11:55 libnmsis_nn_rv32imac_zba_zbb_zbc_zbs_xxldspn1x.a
-rw-rw-r-- 1 966K Oct 20 11:55 libnmsis_nn_rv32imac_zba_zbb_zbc_zbs_xxldspn2x.a
-rw-rw-r-- 1 969K Oct 20 11:55 libnmsis_nn_rv32imac_zba_zbb_zbc_zbs_xxldspn3x.a
-rw-rw-r-- 1 620K Oct 20 11:55 libnmsis_nn_rv32imafc.a
-rw-rw-r-- 1 984K Oct 20 11:55 libnmsis_nn_rv32imafc_xxldsp.a
-rw-rw-r-- 1 987K Oct 20 11:55 libnmsis_nn_rv32imafc_xxldspn1x.a
-rw-rw-r-- 1 990K Oct 20 11:55 libnmsis_nn_rv32imafc_xxldspn2x.a
-rw-rw-r-- 1 993K Oct 20 11:55 libnmsis_nn_rv32imafc_xxldspn3x.a
-rw-rw-r-- 1 608K Oct 20 11:55 libnmsis_nn_rv32imafc_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 962K Oct 20 11:55 libnmsis_nn_rv32imafc_zba_zbb_zbc_zbs_xxldsp.a
-rw-rw-r-- 1 965K Oct 20 11:55 libnmsis_nn_rv32imafc_zba_zbb_zbc_zbs_xxldspn1x.a
-rw-rw-r-- 1 968K Oct 20 11:55 libnmsis_nn_rv32imafc_zba_zbb_zbc_zbs_xxldspn2x.a
-rw-rw-r-- 1 970K Oct 20 11:55 libnmsis_nn_rv32imafc_zba_zbb_zbc_zbs_xxldspn3x.a
-rw-rw-r-- 1 716K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f.a
-rw-rw-r-- 1 848K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f_xxldsp.a
-rw-rw-r-- 1 851K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f_xxldspn1x.a
-rw-rw-r-- 1 854K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f_xxldspn2x.a
-rw-rw-r-- 1 856K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f_xxldspn3x.a
-rw-rw-r-- 1 695K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 825K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f_zba_zbb_zbc_zbs_xxldsp.a
-rw-rw-r-- 1 828K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f_zba_zbb_zbc_zbs_xxldspn1x.a
-rw-rw-r-- 1 831K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f_zba_zbb_zbc_zbs_xxldspn2x.a
-rw-rw-r-- 1 834K Oct 20 11:55 libnmsis_nn_rv32imafc_zve32f_zba_zbb_zbc_zbs_xxldspn3x.a
-rw-rw-r-- 1 621K Oct 20 11:55 libnmsis_nn_rv32imafdc.a
-rw-rw-r-- 1 985K Oct 20 11:55 libnmsis_nn_rv32imafdc_xxldsp.a
-rw-rw-r-- 1 988K Oct 20 11:55 libnmsis_nn_rv32imafdc_xxldspn1x.a
-rw-rw-r-- 1 991K Oct 20 11:55 libnmsis_nn_rv32imafdc_xxldspn2x.a
-rw-rw-r-- 1 994K Oct 20 11:55 libnmsis_nn_rv32imafdc_xxldspn3x.a
-rw-rw-r-- 1 609K Oct 20 11:55 libnmsis_nn_rv32imafdc_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 963K Oct 20 11:55 libnmsis_nn_rv32imafdc_zba_zbb_zbc_zbs_xxldsp.a
-rw-rw-r-- 1 966K Oct 20 11:55 libnmsis_nn_rv32imafdc_zba_zbb_zbc_zbs_xxldspn1x.a
-rw-rw-r-- 1 969K Oct 20 11:55 libnmsis_nn_rv32imafdc_zba_zbb_zbc_zbs_xxldspn2x.a
-rw-rw-r-- 1 972K Oct 20 11:55 libnmsis_nn_rv32imafdc_zba_zbb_zbc_zbs_xxldspn3x.a
-rw-rw-r-- 1 718K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f.a
-rw-rw-r-- 1 847K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f_xxldsp.a
-rw-rw-r-- 1 850K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f_xxldspn1x.a
-rw-rw-r-- 1 852K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f_xxldspn2x.a
-rw-rw-r-- 1 855K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f_xxldspn3x.a
-rw-rw-r-- 1 697K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 824K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f_zba_zbb_zbc_zbs_xxldsp.a
-rw-rw-r-- 1 827K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f_zba_zbb_zbc_zbs_xxldspn1x.a
-rw-rw-r-- 1 830K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f_zba_zbb_zbc_zbs_xxldspn2x.a
-rw-rw-r-- 1 832K Oct 20 11:55 libnmsis_nn_rv32imafdc_zve32f_zba_zbb_zbc_zbs_xxldspn3x.a
-rw-rw-r-- 1 852K Oct 20 11:55 libnmsis_nn_rv64imac.a
-rw-rw-r-- 1 1.4M Oct 20 11:55 libnmsis_nn_rv64imac_xxldsp.a
-rw-rw-r-- 1 826K Oct 20 11:55 libnmsis_nn_rv64imac_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 1.4M Oct 20 11:55 libnmsis_nn_rv64imac_zba_zbb_zbc_zbs_xxldsp.a
-rw-rw-r-- 1 854K Oct 20 11:55 libnmsis_nn_rv64imafc.a
-rw-rw-r-- 1 1.4M Oct 20 11:55 libnmsis_nn_rv64imafc_xxldsp.a
-rw-rw-r-- 1 827K Oct 20 11:55 libnmsis_nn_rv64imafc_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 1.4M Oct 20 11:55 libnmsis_nn_rv64imafc_zba_zbb_zbc_zbs_xxldsp.a
-rw-rw-r-- 1 965K Oct 20 11:55 libnmsis_nn_rv64imafc_zve64f.a
-rw-rw-r-- 1 1.2M Oct 20 11:55 libnmsis_nn_rv64imafc_zve64f_xxldsp.a
-rw-rw-r-- 1 932K Oct 20 11:55 libnmsis_nn_rv64imafc_zve64f_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 1.2M Oct 20 11:55 libnmsis_nn_rv64imafc_zve64f_zba_zbb_zbc_zbs_xxldsp.a
-rw-rw-r-- 1 855K Oct 20 11:55 libnmsis_nn_rv64imafdc.a
-rw-rw-r-- 1 972K Oct 20 11:55 libnmsis_nn_rv64imafdcv.a
-rw-rw-r-- 1 1.2M Oct 20 11:55 libnmsis_nn_rv64imafdcv_xxldsp.a
-rw-rw-r-- 1 939K Oct 20 11:55 libnmsis_nn_rv64imafdcv_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 1.2M Oct 20 11:55 libnmsis_nn_rv64imafdcv_zba_zbb_zbc_zbs_xxldsp.a
-rw-rw-r-- 1 1.4M Oct 20 11:55 libnmsis_nn_rv64imafdc_xxldsp.a
-rw-rw-r-- 1 828K Oct 20 11:55 libnmsis_nn_rv64imafdc_zba_zbb_zbc_zbs.a
-rw-rw-r-- 1 1.4M Oct 20 11:55 libnmsis_nn_rv64imafdc_zba_zbb_zbc_zbs_xxldsp.a
</pre></div>
</div>
<ol class="arabic" start="7">
<li><p>library name with extra <code class="docutils literal notranslate"><span class="pre">_xxldsp</span></code> <code class="docutils literal notranslate"><span class="pre">_xxldspn1x</span></code> <code class="docutils literal notranslate"><span class="pre">_xxldspn2x</span></code> <code class="docutils literal notranslate"><span class="pre">_xxldspn3x</span></code> is built with RISC-V DSP enabled</p>
<p>The examples are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv32imac.a</span></code>: Build for <strong>RISCV_ARCH=rv32imac</strong> without DSP</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv32imac_xxldsp.a</span></code>: Build for <strong>RISCV_ARCH=rv32imac_xxldsp</strong> with Nuclei DSP enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv32imac_xxldspn1x.a</span></code>: Build for <strong>RISCV_ARCH=rv32imac_xxldspn1x</strong> with Nuclei N1 DSP extension enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv32imac_xxldspn2x.a</span></code>: Build for <strong>RISCV_ARCH=rv32imac_xxldspn2x</strong> with Nuclei N1/N2 DSP extension enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv32imac_xxldspn3x.a</span></code>: Build for <strong>RISCV_ARCH=rv32imac_xxldspn3x</strong> with Nuclei N1/N2/N3 DSP extension enabled</p></li>
</ul>
</li>
<li><p>library name with extra <code class="docutils literal notranslate"><span class="pre">_zve32f</span></code> <code class="docutils literal notranslate"><span class="pre">_zve64f</span></code> <code class="docutils literal notranslate"><span class="pre">v</span></code> is built with RISC-V Vector enabled</p>
<p>The examples are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv32imafc_zve32f.a</span></code>: Build for <strong>RISCV_ARCH=rv32imafc_zve32f</strong> with Vector enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv32imafdc_zve32f.a</span></code>: Build for <strong>RISCV_ARCH=rv32imafdc_zve32f</strong> with Vector enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv64imafc_zve64f.a</span></code>: Build for <strong>RISCV_ARCH=rv64imafc_zve64f</strong> with Vector enabled</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv64imafdcv.a</span></code>: Build for <strong>RISCV_ARCH=rv64imafdcv</strong> with Vector enabled</p></li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This NMSIS 1.2.0 is a big change version, will no longer support old gcc 10 verison, and it now only support Nuclei Toolchain 2023.10.
The <code class="docutils literal notranslate"><span class="pre">--march</span></code> option has changed a lot, such as:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">b</span></code> extension changed to <code class="docutils literal notranslate"><span class="pre">_zba_zbb_zbc_zbs</span></code> extension,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">p</span></code> extension changed to <code class="docutils literal notranslate"><span class="pre">_xxldsp</span></code> , <code class="docutils literal notranslate"><span class="pre">_xxldspn1x</span></code> , <code class="docutils literal notranslate"><span class="pre">_xxldspn2x</span></code> , <code class="docutils literal notranslate"><span class="pre">_xxldspn3x</span></code> extensions which means
stardard DSP extension, Nuclei N1, N2, N3 DSP extensions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">v</span></code> extension changed to <code class="docutils literal notranslate"><span class="pre">v</span></code>, <code class="docutils literal notranslate"><span class="pre">_zve32f</span></code>, <code class="docutils literal notranslate"><span class="pre">_zve64f</span></code> extensions</p></li>
</ul>
</li>
<li><p>The name of libraries has changed with <code class="docutils literal notranslate"><span class="pre">-march</span></code>, for examples, the library named <code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv32imacb.a</span></code> is now named
<code class="docutils literal notranslate"><span class="pre">libnmsis_nn_rv32imac_zba_zbb_zbc_zbs.a</span></code> since <code class="docutils literal notranslate"><span class="pre">b</span></code> extension changed to <code class="docutils literal notranslate"><span class="pre">_zba_zbb_zbc_zbs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_xxldspn1x</span></code> <code class="docutils literal notranslate"><span class="pre">_xxldspn2x</span></code> <code class="docutils literal notranslate"><span class="pre">_xxldspn3x</span></code> only valid for RISC-V 32bit processor. <code class="docutils literal notranslate"><span class="pre">_xxldsp</span></code> is valid for RISC-V 32/64 bit processor</p></li>
<li><p>You can also directly build both DSP and NN library using <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">gen</span></code></p></li>
<li><p>You can strip the generated DSP and NN library using <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">strip</span></code></p></li>
<li><p>DSP and Vector extension can be combined, such as <code class="docutils literal notranslate"><span class="pre">_xxldsp</span></code>, <code class="docutils literal notranslate"><span class="pre">v</span></code> and <code class="docutils literal notranslate"><span class="pre">v_xxldsp</span></code>, should notice the extension order</p></li>
<li><p>Vector extension currently enabled for RISC-V 32/64 bit processor</p></li>
<li><p>NN library has no float16 data type, so here have no need to build float16 library</p></li>
</ul>
</div>
</section>
<section id="how-to-run">
<h2>How to run<a class="headerlink" href="#how-to-run" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Set environment variables <code class="docutils literal notranslate"><span class="pre">NUCLEI_SDK_ROOT</span></code> and <code class="docutils literal notranslate"><span class="pre">NUCLEI_SDK_NMSIS</span></code>,
and set Nuclei SDK SoC to <cite>evalsoc</cite>, and change ilm/dlm size from 64K to 512K.</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">NUCLEI_SDK_ROOT</span><span class="o">=</span>/path/to/nuclei_sdk
<span class="nb">export</span><span class="w"> </span><span class="nv">NUCLEI_SDK_NMSIS</span><span class="o">=</span>/path/to/NMSIS/NMSIS
<span class="c1"># Setup SDK development environment</span>
<span class="nb">cd</span><span class="w"> </span><span class="nv">$NUCLEI_SDK_ROOT</span>
<span class="nb">source</span><span class="w"> </span>setup.sh
<span class="nb">cd</span><span class="w"> </span>-
<span class="c1"># !!!!Take Care!!!!</span>
<span class="c1"># change this link script will make compiled example can only run on bitstream which has 512K ILM/DLM</span>
<span class="c1"># For Nuclei SDK &lt; 0.7.0</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/64K/512K/g&quot;</span><span class="w"> </span><span class="nv">$NUCLEI_SDK_ROOT</span>/SoC/evalsoc/Board/nuclei_fpga_eval/Source/GCC/gcc_evalsoc_ilm.ld
<span class="c1"># For Nuclei SDK &gt;= 0.7.0</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/\([ID]LM_MEMORY_SIZE\).*/\1 = 0x80000;/&#39;</span><span class="w"> </span><span class="nv">$NUCLEI_SDK_ROOT</span>/SoC/evalsoc/Board/nuclei_fpga_eval/Source/GCC/evalsoc.memory
<span class="nb">export</span><span class="w"> </span><span class="nv">SOC</span><span class="o">=</span>evalsoc
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Due to many of the examples could not be placed in 64K ILM and 64K DLM, and
we are running using qemu, the ILM/DLM size in it are set to be 32MB, so we can
change ilm/dlm to 512K/512K in the link script
<code class="docutils literal notranslate"><span class="pre">$NUCLEI_SDK_ROOT/SoC/evalsoc/Board/nuclei_fpga_eval/Source/GCC/gcc_evalsoc_ilm.ld</span></code>
or <code class="docutils literal notranslate"><span class="pre">$NUCLEI_SDK_ROOT/SoC/evalsoc/Board/nuclei_fpga_eval/Source/GCC/evalsoc.memory</span></code></p></li>
</ol>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- a/SoC/evalsoc/Board/nuclei_fpga_eval/Source/GCC/gcc_evalsoc_ilm.ld</span>
<span class="gi">+++ b/SoC/evalsoc/Board/nuclei_fpga_eval/Source/GCC/gcc_evalsoc_ilm.ld</span>
<span class="gu">@@ -30,8 +30,8 @@ __HEAP_SIZE  = 2K;</span>

MEMORY
{
<span class="gd">-  ilm (rxa!w) : ORIGIN = 0x80000000, LENGTH = 64K</span>
<span class="gd">-  ram (wxa!r) : ORIGIN = 0x90000000, LENGTH = 64K</span>
<span class="gi">+  ilm (rxa!w) : ORIGIN = 0x80000000, LENGTH = 512K</span>
<span class="gi">+  ram (wxa!r) : ORIGIN = 0x90000000, LENGTH = 512K</span>
}
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Let us take <code class="docutils literal notranslate"><span class="pre">cifar10</span></code> for example:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$NUCLEI_SDK_NMSIS</span>/NN/Examples/RISCV/cifar10/
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Run with RISCV DSP enabled and Vector enabled NMSIS-NN library for CORE <code class="docutils literal notranslate"><span class="pre">nx900fd</span></code></p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clean project</span>
make<span class="w"> </span><span class="nv">ARCH_EXT</span><span class="o">=</span>v_xxldsp<span class="w"> </span><span class="nv">CORE</span><span class="o">=</span>nx900fd<span class="w"> </span>clean
<span class="c1"># Build project, enable ``v`` and ``xxldsp`` optimize</span>
make<span class="w"> </span><span class="nv">ARCH_EXT</span><span class="o">=</span>v_xxldsp<span class="w"> </span><span class="nv">CORE</span><span class="o">=</span>nx900fd<span class="w"> </span>all
<span class="c1"># Run application using qemu</span>
make<span class="w"> </span><span class="nv">ARCH_EXT</span><span class="o">=</span>v_xxldsp<span class="w"> </span><span class="nv">CORE</span><span class="o">=</span>nx900fd<span class="w"> </span>run_qemu
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Run with RISCV DSP disabled and Vector disabled NMSIS-NN library for CORE <code class="docutils literal notranslate"><span class="pre">nx900fd</span></code></p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">ARCH_EXT</span><span class="o">=</span><span class="w"> </span><span class="nv">CORE</span><span class="o">=</span>nx900fd<span class="w"> </span>clean
make<span class="w"> </span><span class="nv">ARCH_EXT</span><span class="o">=</span><span class="w"> </span><span class="nv">CORE</span><span class="o">=</span>nx900fd<span class="w"> </span>all
make<span class="w"> </span><span class="nv">ARCH_EXT</span><span class="o">=</span><span class="w"> </span><span class="nv">CORE</span><span class="o">=</span>nx900fd<span class="w"> </span>run_qemu
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>You can easily run this example in your hardware,
if you have enough memory to run it, just modify the
<code class="docutils literal notranslate"><span class="pre">SOC</span></code> to the one your are using in step 1.</p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="overview.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api/index.html" class="btn btn-neutral float-right" title="NMSIS NN API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-Present, Nuclei.
      <span class="lastupdated">Last updated on May 21, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>