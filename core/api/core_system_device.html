<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>System Device Configuration &mdash; NMSIS 1.1.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ARM Compatiable Functions" href="core_arm_compatiable.html" />
    <link rel="prev" title="Cache Functions" href="core_cache.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/nmsis_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Nuclei MCU Software Interface Standard(NMSIS)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">NMSIS Core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get_started.html">Using NMSIS in Embedded Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_templates.html">NMSIS-Core Device Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../register_mapping.html">Register Mapping</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">NMSIS Core API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="core_version_control.html">Version Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_compiler_control.html">Compiler Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_csr_access.html">Core CSR Register Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_csr_encoding.html">Core CSR Encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_register_type.html">Register Define and Type Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_intrinsics.html">CPU Intrinsic Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_nmsis_core_dsp_intrinsic.html">Intrinsic Functions for SIMD Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_periph_access.html">Peripheral Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_systick.html">Systick Timer(SysTimer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_interrupt_exception.html">Interrupts and Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_fpu.html">FPU Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_pmp.html">PMP Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_spmp.html">SPMP Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_cache.html">Cache Functions</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">System Device Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#interrupt-exception-nmi-handling">Interrupt Exception NMI Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="core_arm_compatiable.html">ARM Compatiable Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dsp/index.html">NMSIS DSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nn/index.html">NMSIS NN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NMSIS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">NMSIS Core</a> &raquo;</li>
          <li><a href="index.html">NMSIS Core API</a> &raquo;</li>
      <li>System Device Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/core/api/core_system_device.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="system-device-configuration">
<span id="core-api-system-device"></span><h1>System Device Configuration<a class="headerlink" href="#system-device-configuration" title="Permalink to this headline"></a></h1>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__NMSIS__Core__SystemConfig"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">NMSIS_Core_SystemConfig</span></span></dt>
<dd><p>Functions for system and clock setup available in system_&lt;device&gt;.c. </p>
<p>Nuclei provides a template file <strong>system_Device.c</strong> that must be adapted by the silicon vendor to match their actual device. As a <strong>minimum requirement</strong>, this file must provide:<ul class="simple">
<li><p>A device-specific system configuration function, <a class="reference internal" href="#group__NMSIS__Core__SystemConfig_1ga93f514700ccf00d08dbdcff7f1224eb2"><span class="std std-ref">SystemInit</span></a>.</p></li>
<li><p>A global variable that contains the system frequency, <a class="reference internal" href="#group__NMSIS__Core__SystemConfig_1ga0814e683179ebb031663c192f7e9b579"><span class="std std-ref">SystemCoreClock</span></a>.</p></li>
<li><p>A global eclic configuration initialization, <a class="reference internal" href="#group__NMSIS__Core__SystemConfig_1ga2d2e27f47287f5d28cc26f2cb214337f"><span class="std std-ref">ECLIC_Init</span></a>.</p></li>
<li><p>Global c library _init and _fini functions called right before calling main function.</p></li>
<li><p>Vendor customized interrupt, exception and nmi handling code, see <a class="reference internal" href="#group__NMSIS__Core__IntExcNMI__Handling"><span class="std std-ref">Interrupt and Exception and NMI Handling</span></a></p></li>
</ul>
</p>
<p>The file configures the device and, typically, initializes the oscillator (PLL) that is part of the microcontroller device. This file might export other functions or variables that provide a more flexible configuration of the microcontroller system.</p>
<p>And this file also provided common interrupt, exception and NMI exception handling framework template, Silicon vendor can customize these template code as they want.</p>
<p><dl class="simple">
<dt><strong>Attention</strong></dt><dd><p>Be aware that a value stored to <code class="docutils literal notranslate"><span class="pre">SystemCoreClock</span></code> during low level initialization (i.e. <code class="docutils literal notranslate"><a class="reference internal" href="#group__NMSIS__Core__SystemConfig_1ga93f514700ccf00d08dbdcff7f1224eb2"><span class="std std-ref"><span class="pre">SystemInit()</span></span></a></code>) might get overwritten by C libray startup code and/or .bss section initialization. Thus its highly recommended to call <a class="reference internal" href="#group__NMSIS__Core__SystemConfig_1gae0c36a9591fe6e9c45ecb21a794f0f0f"><span class="std std-ref">SystemCoreClockUpdate</span></a> at the beginning of the user <code class="docutils literal notranslate"><span class="pre">main()</span></code> routine. </p>
</dd>
</dl>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please pay special attention to the static variable <code class="docutils literal notranslate"><span class="pre">SystemCoreClock</span></code>. This variable might be used throughout the whole system initialization and runtime to calculate frequency/time related values. Thus one must assure that the variable always reflects the actual system clock speed.</p>
</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv45fnptr">
<span id="_CPPv35fnptr"></span><span id="_CPPv25fnptr"></span><span id="fnptr"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga05704207ab8887bd2ac8a8b28f158584"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">fnptr</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv45fnptr" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv434system_default_exception_handler_smm">
<span id="_CPPv334system_default_exception_handler_smm"></span><span id="_CPPv234system_default_exception_handler_smm"></span><span id="system_default_exception_handler_s__unsigned-l.unsigned-l"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga4faf84a59d71ad195d0a114212813f99"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">system_default_exception_handler_s</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">scause</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sp</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv434system_default_exception_handler_smm" title="Permalink to this definition"></a><br /></dt>
<dd><p>Supervisor mode system Default Exception Handler. </p>
<p>This function provides a default supervisor mode exception handler for all exception ids. By default, It will just print some information for debug, Vendor can customize it according to its requirements.</p>
<p>This function provided a default supervisor mode exception and NMI handling code for all exception ids. By default, It will just print some information for debug, Vendor can customize it according to its requirements. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scause</strong> – <strong>[in]</strong> code indicating the reason that caused the trap in supervisor mode </p></li>
<li><p><strong>sp</strong> – <strong>[in]</strong> stack pointer </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418eclic_ssip_handlerv">
<span id="_CPPv318eclic_ssip_handlerv"></span><span id="_CPPv218eclic_ssip_handlerv"></span><span id="eclic_ssip_handler__void"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga6309f48dd6d8cbbc743b0cb94b0ddd97"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">eclic_ssip_handler</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418eclic_ssip_handlerv" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv421SystemCoreClockUpdatev">
<span id="_CPPv321SystemCoreClockUpdatev"></span><span id="_CPPv221SystemCoreClockUpdatev"></span><span id="SystemCoreClockUpdate__void"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1gae0c36a9591fe6e9c45ecb21a794f0f0f"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SystemCoreClockUpdate</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421SystemCoreClockUpdatev" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function to update the variable <a class="reference internal" href="#group__NMSIS__Core__SystemConfig_1ga0814e683179ebb031663c192f7e9b579"><span class="std std-ref">SystemCoreClock</span></a>. </p>
<p>Updates the variable <a class="reference internal" href="#group__NMSIS__Core__SystemConfig_1ga0814e683179ebb031663c192f7e9b579"><span class="std std-ref">SystemCoreClock</span></a> and must be called whenever the core clock is changed during program execution. The function evaluates the clock register settings and calculates the current core clock. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv410SystemInitv">
<span id="_CPPv310SystemInitv"></span><span id="_CPPv210SystemInitv"></span><span id="SystemInit__void"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga93f514700ccf00d08dbdcff7f1224eb2"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SystemInit</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410SystemInitv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Function to Initialize the system. </p>
<p>Initializes the microcontroller system. Typically, this function configures the oscillator (PLL) that is part of the microcontroller device. For systems with a variable clock speed, it updates the variable <a class="reference internal" href="#group__NMSIS__Core__SystemConfig_1ga0814e683179ebb031663c192f7e9b579"><span class="std std-ref">SystemCoreClock</span></a>. SystemInit is called from the file <strong>startup</strong>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv417SystemBannerPrintv">
<span id="_CPPv317SystemBannerPrintv"></span><span id="_CPPv217SystemBannerPrintv"></span><span id="SystemBannerPrint__void"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga650b0aff4d3e3c20d326fbc558b6f90f"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SystemBannerPrint</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417SystemBannerPrintv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Banner Print for Nuclei SDK. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv410ECLIC_Initv">
<span id="_CPPv310ECLIC_Initv"></span><span id="_CPPv210ECLIC_Initv"></span><span id="ECLIC_Init__void"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga2d2e27f47287f5d28cc26f2cb214337f"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ECLIC_Init</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410ECLIC_Initv" title="Permalink to this definition"></a><br /></dt>
<dd><p>initialize eclic config </p>
<p>ECLIC needs be initialized after boot up, Vendor could also change the initialization configuration. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418ECLIC_Register_IRQ9IRQn_Type7uint8_t18ECLIC_TRIGGER_Type7uint8_t7uint8_tPv">
<span id="_CPPv318ECLIC_Register_IRQ9IRQn_Type7uint8_t18ECLIC_TRIGGER_Type7uint8_t7uint8_tPv"></span><span id="_CPPv218ECLIC_Register_IRQ9IRQn_Type7uint8_t18ECLIC_TRIGGER_Type7uint8_t7uint8_tPv"></span><span id="ECLIC_Register_IRQ__IRQn_Type.uint8_t.ECLIC_TRIGGER_Type.uint8_t.uint8_t.voidP"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga52cbc8fa60b210b75ac79baa25ac74bb"></span><span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ECLIC_Register_IRQ</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">IRQn_Type</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">IRQn</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">shv</span></span>, <span class="n"><span class="pre">ECLIC_TRIGGER_Type</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">trig_mode</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">lvl</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">priority</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">handler</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418ECLIC_Register_IRQ9IRQn_Type7uint8_t18ECLIC_TRIGGER_Type7uint8_t7uint8_tPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize a specific IRQ and register the handler. </p>
<p>This function set vector mode, trigger mode and polarity, interrupt level and priority, assign handler for specific IRQn. <div class="remark admonition">
<p class="admonition-title">Remark</p>
<p><ul class="simple">
<li><p>This function use to configure specific eclic interrupt and register its interrupt handler and enable its interrupt.</p></li>
<li><p>If the vector table is placed in read-only section(FLASHXIP mode), handler could not be installed </p></li>
</ul>
</p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>IRQn</strong> – <strong>[in]</strong> NMI interrupt handler address </p></li>
<li><p><strong>shv</strong> – <strong>[in]</strong> <a class="reference internal" href="core_register_type.html#group__NMSIS__Core__ECLIC__Registers_1ga6a01697e0ba89c691f98fee801f4a25c"><span class="std std-ref">ECLIC_NON_VECTOR_INTERRUPT</span></a> means non-vector mode, and <a class="reference internal" href="core_register_type.html#group__NMSIS__Core__ECLIC__Registers_1ga915384ab6567d38315e8cf5a566f4840"><span class="std std-ref">ECLIC_VECTOR_INTERRUPT</span></a> is vector mode </p></li>
<li><p><strong>trig_mode</strong> – <strong>[in]</strong> see ECLIC_TRIGGER_Type </p></li>
<li><p><strong>lvl</strong> – <strong>[in]</strong> interupt level </p></li>
<li><p><strong>priority</strong> – <strong>[in]</strong> interrupt priority </p></li>
<li><p><strong>handler</strong> – <strong>[in]</strong> interrupt handler, if NULL, handler will not be installed </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>-1 means invalid input parameter. 0 means successful. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv424Exception_Register_EXC_S8uint32_tm">
<span id="_CPPv324Exception_Register_EXC_S8uint32_tm"></span><span id="_CPPv224Exception_Register_EXC_S8uint32_tm"></span><span id="Exception_Register_EXC_S__uint32_t.unsigned-l"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga01c05a182790c768695aebb51b847a07"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Exception_Register_EXC_S</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">EXCn</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">exc_handler</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424Exception_Register_EXC_S8uint32_tm" title="Permalink to this definition"></a><br /></dt>
<dd><p>Register an exception handler for exception code EXCn of supervisor mode. </p>
<p>-For EXCn &lt; <a class="reference internal" href="#group__NMSIS__Core__IntExcNMI__Handling_1ga10f1bcf88d4be44d559c79485f16dd24"><span class="std std-ref">MAX_SYSTEM_EXCEPTION_NUM</span></a>, it will be registered into SystemExceptionHandlers_S[EXCn-1]. -For EXCn == NMI_EXCn, The NMI (Non-maskable-interrupt) cannot be trapped to the supervisor-mode or user-mode for any configuration, so NMI won’t be registered into SystemExceptionHandlers_S. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>EXCn</strong> – <strong>[in]</strong> See EXCn_Type </p></li>
<li><p><strong>exc_handler</strong> – <strong>[in]</strong> The exception handler for this exception code EXCn </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419Exception_Get_EXC_S8uint32_t">
<span id="_CPPv319Exception_Get_EXC_S8uint32_t"></span><span id="_CPPv219Exception_Get_EXC_S8uint32_t"></span><span id="Exception_Get_EXC_S__uint32_t"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1gaf555b547bbbd1cb5423aec79837f6d92"></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Exception_Get_EXC_S</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">EXCn</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419Exception_Get_EXC_S8uint32_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get current exception handler for exception code EXCn of supervisor mode. </p>
<p><ul class="simple">
<li><p>For EXCn &lt; <a class="reference internal" href="#group__NMSIS__Core__IntExcNMI__Handling_1ga10f1bcf88d4be44d559c79485f16dd24"><span class="std std-ref">MAX_SYSTEM_EXCEPTION_NUM</span></a>, it will return SystemExceptionHandlers_S[EXCn-1]. </p></li>
</ul>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>EXCn</strong> – <strong>[in]</strong> See EXCn_Type </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Current exception handler for exception code EXCn, if not found, return 0. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv424core_exception_handler_smm">
<span id="_CPPv324core_exception_handler_smm"></span><span id="_CPPv224core_exception_handler_smm"></span><span id="core_exception_handler_s__unsigned-l.unsigned-l"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga8b5b8fb823a0e048e7c74d19c2af5639"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">core_exception_handler_s</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">scause</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sp</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424core_exception_handler_smm" title="Permalink to this definition"></a><br /></dt>
<dd><p>common Exception handler entry of supervisor mode </p>
<p>This function provided a supervisor mode common entry for exception. Silicon Vendor could modify this template implementation according to requirement. <div class="remark admonition">
<p class="admonition-title">Remark</p>
<p><ul class="simple">
<li><p>RISCV provided supervisor mode common entry for all types of exception. This is proposed code template for exception entry function, Silicon Vendor could modify the implementation.</p></li>
<li><p>For the core_exception_handler_s template, we provided exception register function <a class="reference internal" href="#group__NMSIS__Core__SystemConfig_1ga01c05a182790c768695aebb51b847a07"><span class="std std-ref">Exception_Register_EXC_S</span></a> which can help developer to register your exception handler for specific exception number. </p></li>
</ul>
</p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scause</strong> – <strong>[in]</strong> code indicating the reason that caused the trap in supervisor mode </p></li>
<li><p><strong>sp</strong> – <strong>[in]</strong> stack pointer </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv420ECLIC_Register_IRQ_S9IRQn_Type7uint8_t18ECLIC_TRIGGER_Type7uint8_t7uint8_tPv">
<span id="_CPPv320ECLIC_Register_IRQ_S9IRQn_Type7uint8_t18ECLIC_TRIGGER_Type7uint8_t7uint8_tPv"></span><span id="_CPPv220ECLIC_Register_IRQ_S9IRQn_Type7uint8_t18ECLIC_TRIGGER_Type7uint8_t7uint8_tPv"></span><span id="ECLIC_Register_IRQ_S__IRQn_Type.uint8_t.ECLIC_TRIGGER_Type.uint8_t.uint8_t.voidP"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga520a945a0989507aba2d8fcc1470ef56"></span><span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ECLIC_Register_IRQ_S</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">IRQn_Type</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">IRQn</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">shv</span></span>, <span class="n"><span class="pre">ECLIC_TRIGGER_Type</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">trig_mode</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">lvl</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">priority</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">handler</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420ECLIC_Register_IRQ_S9IRQn_Type7uint8_t18ECLIC_TRIGGER_Type7uint8_t7uint8_tPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize a specific IRQ and register the handler for supervisor mode. </p>
<p>This function set vector mode, trigger mode and polarity, interrupt level and priority, assign handler for specific IRQn. <div class="remark admonition">
<p class="admonition-title">Remark</p>
<p><ul class="simple">
<li><p>This function use to configure specific eclic S-mode interrupt and register its interrupt handler and enable its interrupt.</p></li>
<li><p>If the vector table is placed in read-only section (FLASHXIP mode), handler could not be installed. </p></li>
</ul>
</p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>IRQn</strong> – <strong>[in]</strong> NMI interrupt handler address </p></li>
<li><p><strong>shv</strong> – <strong>[in]</strong> <a class="reference internal" href="core_register_type.html#group__NMSIS__Core__ECLIC__Registers_1ga6a01697e0ba89c691f98fee801f4a25c"><span class="std std-ref">ECLIC_NON_VECTOR_INTERRUPT</span></a> means non-vector mode, and <a class="reference internal" href="core_register_type.html#group__NMSIS__Core__ECLIC__Registers_1ga915384ab6567d38315e8cf5a566f4840"><span class="std std-ref">ECLIC_VECTOR_INTERRUPT</span></a> is vector mode </p></li>
<li><p><strong>trig_mode</strong> – <strong>[in]</strong> see ECLIC_TRIGGER_Type </p></li>
<li><p><strong>lvl</strong> – <strong>[in]</strong> interupt level </p></li>
<li><p><strong>priority</strong> – <strong>[in]</strong> interrupt priority </p></li>
<li><p><strong>handler</strong> – <strong>[in]</strong> interrupt handler, if NULL, handler will not be installed </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>-1 means invalid input parameter. 0 means successful. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv411irq_entry_s">
<span id="_CPPv311irq_entry_s"></span><span id="_CPPv211irq_entry_s"></span><span id="irq_entry_s__fnptr"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga980ed678c7691b29ae0cd749a29b5a2f"></span><a class="reference internal" href="#_CPPv45fnptr" title="fnptr"><span class="n"><span class="pre">fnptr</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">irq_entry_s</span></span></span><a class="headerlink" href="#_CPPv411irq_entry_s" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv411exc_entry_s">
<span id="_CPPv311exc_entry_s"></span><span id="_CPPv211exc_entry_s"></span><span id="exc_entry_s__fnptr"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga25bc23e1969132b391bb1c59e836b45b"></span><a class="reference internal" href="#_CPPv45fnptr" title="fnptr"><span class="n"><span class="pre">fnptr</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">exc_entry_s</span></span></span><a class="headerlink" href="#_CPPv411exc_entry_s" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv422default_intexc_handler">
<span id="_CPPv322default_intexc_handler"></span><span id="_CPPv222default_intexc_handler"></span><span id="default_intexc_handler__fnptr"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1gadb1e15991e0a551e2f2cafd728b37c1c"></span><a class="reference internal" href="#_CPPv45fnptr" title="fnptr"><span class="n"><span class="pre">fnptr</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">default_intexc_handler</span></span></span><a class="headerlink" href="#_CPPv422default_intexc_handler" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv415SystemCoreClock">
<span id="_CPPv315SystemCoreClock"></span><span id="_CPPv215SystemCoreClock"></span><span id="SystemCoreClock__uint32_t"></span><span class="target" id="group__NMSIS__Core__SystemConfig_1ga0814e683179ebb031663c192f7e9b579"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SystemCoreClock</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">SYSTEM_CLOCK</span></span><a class="headerlink" href="#_CPPv415SystemCoreClock" title="Permalink to this definition"></a><br /></dt>
<dd><p>Variable to hold the system core clock value. </p>
<p>Holds the system core clock, which is the system clock frequency supplied to the SysTick timer and the processor core clock. This variable can be used by debuggers to query the frequency of the debug timer or to configure the trace clock speed.</p>
<p><dl class="simple">
<dt><strong>Attention</strong></dt><dd><p>Compilers must be configured to avoid removing this variable in case the application program is not using it. Debugging systems require the variable to be physically present in memory so that it can be examined to configure the debugger. </p>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

<section id="interrupt-exception-nmi-handling">
<span id="core-api-intexc-nmi-handling"></span><h2>Interrupt Exception NMI Handling<a class="headerlink" href="#interrupt-exception-nmi-handling" title="Permalink to this headline"></a></h2>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__NMSIS__Core__IntExcNMI__Handling"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">NMSIS_Core_IntExcNMI_Handling</span></span></dt>
<dd><p>Functions for interrupt, exception and nmi handle available in system_&lt;device&gt;.c. </p>
<p>Nuclei provide a template for interrupt, exception and NMI handling. Silicon Vendor could adapat according to their requirement. Silicon vendor could implement interface for different exception code and replace current implementation. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.MAX_SYSTEM_EXCEPTION_NUM">
<span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1ga10f1bcf88d4be44d559c79485f16dd24"></span><span class="sig-name descname"><span class="n"><span class="pre">MAX_SYSTEM_EXCEPTION_NUM</span></span></span> <span class="pre">16</span><a class="headerlink" href="#c.MAX_SYSTEM_EXCEPTION_NUM" title="Permalink to this definition"></a><br /></dt>
<dd><p>Max exception handler number, don’t include the NMI(0xFFF) one. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv411EXC_HANDLER">
<span id="_CPPv311EXC_HANDLER"></span><span id="_CPPv211EXC_HANDLER"></span><span id="EXC_HANDLER"></span><span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1gaf7e370216a9e922c9b8149c3d3423758"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">EXC_HANDLER</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n"><span class="pre">cause</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n"><span class="pre">sp</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv411EXC_HANDLER" title="Permalink to this definition"></a><br /></dt>
<dd><p>Exception Handler Function Typedef. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This typedef is only used internal in this system_&lt;Device&gt;.c file. It is used to do type conversion for registered exception handler before calling it. </p>
</div>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv432system_default_exception_handlermm">
<span id="_CPPv332system_default_exception_handlermm"></span><span id="_CPPv232system_default_exception_handlermm"></span><span id="system_default_exception_handler__unsigned-l.unsigned-l"></span><span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1ga97971400b10d2cdd33f0d1fb59f9d0c8"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">system_default_exception_handler</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">mcause</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sp</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv432system_default_exception_handlermm" title="Permalink to this definition"></a><br /></dt>
<dd><p>System Default Exception Handler. </p>
<p>This function provides a default exception and NMI handler for all exception ids. By default, It will just print some information for debug, Vendor can customize it according to its requirements. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mcause</strong> – <strong>[in]</strong> code indicating the reason that caused the trap in machine mode </p></li>
<li><p><strong>sp</strong> – <strong>[in]</strong> stack pointer </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv414Exception_Initv">
<span id="_CPPv314Exception_Initv"></span><span id="_CPPv214Exception_Initv"></span><span id="Exception_Init__void"></span><span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1gab6afbaed495af51eeeb4eb7d1c5da420"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Exception_Init</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414Exception_Initv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize all the default core exception handlers. </p>
<p>The core exception handler for each exception id will be initialized to <a class="reference internal" href="#group__NMSIS__Core__IntExcNMI__Handling_1ga97971400b10d2cdd33f0d1fb59f9d0c8"><span class="std std-ref">system_default_exception_handler</span></a>. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Called in _init function, used to initialize default exception handlers for all exception IDs SystemExceptionHandlers contains NMI, but SystemExceptionHandlers_S not, because NMI can’t be delegated to S-mode. </p>
</div>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419Exception_DumpFramem7uint8_t">
<span id="_CPPv319Exception_DumpFramem7uint8_t"></span><span id="_CPPv219Exception_DumpFramem7uint8_t"></span><span id="Exception_DumpFrame__unsigned-l.uint8_t"></span><span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1ga96e9e920f6bb0d8e73c817e4523607c4"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Exception_DumpFrame</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sp</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">mode</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419Exception_DumpFramem7uint8_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Dump Exception Frame. </p>
<p>This function provided feature to dump exception frame stored in stack. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sp</strong> – <strong>[in]</strong> stackpoint </p></li>
<li><p><strong>mode</strong> – <strong>[in]</strong> privileged mode to decide whether to dump msubm CSR </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv422Exception_Register_EXC8uint32_tm">
<span id="_CPPv322Exception_Register_EXC8uint32_tm"></span><span id="_CPPv222Exception_Register_EXC8uint32_tm"></span><span id="Exception_Register_EXC__uint32_t.unsigned-l"></span><span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1ga9df7d45dd6f418ba31b6cec6c4958490"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Exception_Register_EXC</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">EXCn</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">exc_handler</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422Exception_Register_EXC8uint32_tm" title="Permalink to this definition"></a><br /></dt>
<dd><p>Register an exception handler for exception code EXCn. </p>
<p><ul class="simple">
<li><p>For EXCn &lt; <a class="reference internal" href="#group__NMSIS__Core__IntExcNMI__Handling_1ga10f1bcf88d4be44d559c79485f16dd24"><span class="std std-ref">MAX_SYSTEM_EXCEPTION_NUM</span></a>, it will be registered into SystemExceptionHandlers[EXCn-1].</p></li>
<li><p>For EXCn == NMI_EXCn, it will be registered into SystemExceptionHandlers[MAX_SYSTEM_EXCEPTION_NUM]. </p></li>
</ul>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>EXCn</strong> – <strong>[in]</strong> See EXCn_Type </p></li>
<li><p><strong>exc_handler</strong> – <strong>[in]</strong> The exception handler for this exception code EXCn </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv417Exception_Get_EXC8uint32_t">
<span id="_CPPv317Exception_Get_EXC8uint32_t"></span><span id="_CPPv217Exception_Get_EXC8uint32_t"></span><span id="Exception_Get_EXC__uint32_t"></span><span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1ga84df4676c5284f0ea383eeba33e9aa40"></span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Exception_Get_EXC</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">EXCn</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417Exception_Get_EXC8uint32_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get current exception handler for exception code EXCn. </p>
<p><ul class="simple">
<li><p>For EXCn &lt; <a class="reference internal" href="#group__NMSIS__Core__IntExcNMI__Handling_1ga10f1bcf88d4be44d559c79485f16dd24"><span class="std std-ref">MAX_SYSTEM_EXCEPTION_NUM</span></a>, it will return SystemExceptionHandlers[EXCn-1].</p></li>
<li><p>For EXCn == NMI_EXCn, it will return SystemExceptionHandlers[MAX_SYSTEM_EXCEPTION_NUM]. </p></li>
</ul>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>EXCn</strong> – <strong>[in]</strong> See EXCn_Type </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Current exception handler for exception code EXCn, if not found, return 0. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv422core_exception_handlermm">
<span id="_CPPv322core_exception_handlermm"></span><span id="_CPPv222core_exception_handlermm"></span><span id="core_exception_handler__unsigned-l.unsigned-l"></span><span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1gac7f5b810aee623f65822bac1efe2006d"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">core_exception_handler</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">mcause</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">sp</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422core_exception_handlermm" title="Permalink to this definition"></a><br /></dt>
<dd><p>Common NMI and Exception handler entry. </p>
<p>This function provided a command entry for NMI and exception. Silicon Vendor could modify this template implementation according to requirement. <div class="remark admonition">
<p class="admonition-title">Remark</p>
<p><ul class="simple">
<li><p>RISCV provided common entry for all types of exception. This is proposed code template for exception entry function, Silicon Vendor could modify the implementation.</p></li>
<li><p>For the core_exception_handler template, we provided exception register function <a class="reference internal" href="#group__NMSIS__Core__IntExcNMI__Handling_1ga9df7d45dd6f418ba31b6cec6c4958490"><span class="std std-ref">Exception_Register_EXC</span></a> which can help developer to register your exception handler for specific exception number. </p></li>
</ul>
</p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mcause</strong> – <strong>[in]</strong> code indicating the reason that caused the trap in machine mode </p></li>
<li><p><strong>sp</strong> – <strong>[in]</strong> stack pointer </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv423SystemExceptionHandlers">
<span id="_CPPv323SystemExceptionHandlers"></span><span id="_CPPv223SystemExceptionHandlers"></span><span id="SystemExceptionHandlers__unsigned-lA"></span><span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1gaedd77e0eba0ea9872a4375893480b420"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SystemExceptionHandlers</span></span></span><span class="p"><span class="pre">[</span></span><span class="n"><span class="pre">MAX_SYSTEM_EXCEPTION_NUM</span></span><span class="w"> </span><span class="o"><span class="pre">+</span></span><span class="w"> </span><span class="m"><span class="pre">1</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv423SystemExceptionHandlers" title="Permalink to this definition"></a><br /></dt>
<dd><p>Store the exception handlers for each exception ID. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This SystemExceptionHandlers are used to store all the handlers for all the exception codes Nuclei N/NX core provided.</p></li>
<li><p>Exception code 0 - 11, totally 12 exceptions are mapped to SystemExceptionHandlers[0:11]</p></li>
<li><p>Exception for NMI is also re-routed to exception handling(exception code 0xFFF) in startup code configuration, the handler itself is mapped to SystemExceptionHandlers[MAX_SYSTEM_EXCEPTION_NUM] </p></li>
</ul>
</p>
</div>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv425SystemExceptionHandlers_S">
<span id="_CPPv325SystemExceptionHandlers_S"></span><span id="_CPPv225SystemExceptionHandlers_S"></span><span id="SystemExceptionHandlers_S__unsigned-lA"></span><span class="target" id="group__NMSIS__Core__IntExcNMI__Handling_1ga01db1fdb5f948dbf4555b0f7375eff11"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SystemExceptionHandlers_S</span></span></span><span class="p"><span class="pre">[</span></span><span class="n"><span class="pre">MAX_SYSTEM_EXCEPTION_NUM</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#_CPPv425SystemExceptionHandlers_S" title="Permalink to this definition"></a><br /></dt>
<dd><p>Store the exception handlers for each exception ID in supervisor mode. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><ul class="simple">
<li><p>This SystemExceptionHandlers_S are used to store all the handlers for all the exception codes Nuclei N/NX core provided.</p></li>
<li><p>Exception code 0 - 11, totally 12 exceptions are mapped to SystemExceptionHandlers_S[0:11]</p></li>
<li><p>The NMI (Non-maskable-interrupt) cannot be trapped to the supervisor-mode or user-mode for any configuration </p></li>
</ul>
</p>
</div>
</dd></dl>

</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="core_cache.html" class="btn btn-neutral float-left" title="Cache Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="core_arm_compatiable.html" class="btn btn-neutral float-right" title="ARM Compatiable Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-Present, Nuclei.
      <span class="lastupdated">Last updated on May 23, 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>