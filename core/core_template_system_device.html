

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>System Configuration Files system_&lt;Device&gt;.c and system_&lt;Device&gt;.h &mdash; NMSIS 1.4.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=66b59bf7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=4c016a5a" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=9172181d"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Device Header File &lt;Device.h&gt;" href="core_template_device_header.html" />
    <link rel="prev" title="Device Linker Script: gcc_&lt;device&gt;.ld" href="core_template_linker_device.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/nmsis_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">Nuclei MCU Software Interface Standard(NMSIS)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">NMSIS Core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="get_started.html">Using NMSIS in Embedded Applications</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="core_templates.html">NMSIS-Core Device Templates</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="core_templates.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_templates.html#nmsis-core-processor-files">NMSIS-Core Processor Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_templates.html#device-examples">Device Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_templates.html#template-files">Template Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="core_templates.html#adapt-template-files-to-a-device">Adapt Template Files to a Device</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="core_templates.html#device-templates-explaination">Device Templates Explaination</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="core_template_startup_device.html">Startup File startup_&lt;Device&gt;.S</a></li>
<li class="toctree-l4"><a class="reference internal" href="core_template_intexc.html">Interrupt and Exception Handling File: intexc_&lt;Device&gt;.S</a></li>
<li class="toctree-l4"><a class="reference internal" href="core_template_linker_device.html">Device Linker Script: gcc_&lt;device&gt;.ld</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">System Configuration Files system_&lt;Device&gt;.c and system_&lt;Device&gt;.h</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#system-device-c-template-file">system_Device.c Template File</a></li>
<li class="toctree-l5"><a class="reference internal" href="#system-device-h-template-file">system_Device.h Template File</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="core_template_device_header.html">Device Header File &lt;Device.h&gt;</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="register_mapping.html">Register Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/index.html">NMSIS Core API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dsp/index.html">NMSIS DSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nn/index.html">NMSIS NN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NMSIS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">NMSIS Core</a></li>
          <li class="breadcrumb-item"><a href="core_templates.html">NMSIS-Core Device Templates</a></li>
      <li class="breadcrumb-item active">System Configuration Files system_&lt;Device&gt;.c and system_&lt;Device&gt;.h</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/core/core_template_system_device.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="system-configuration-files-system-device-c-and-system-device-h">
<span id="core-template-system-device"></span><h1>System Configuration Files system_&lt;Device&gt;.c and system_&lt;Device&gt;.h<a class="headerlink" href="#system-configuration-files-system-device-c-and-system-device-h" title="Link to this heading"></a></h1>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p><strong>Please be informed</strong> that the <strong>NMSIS-Core Device Templates</strong> may not be updated in a timely manner and thus could become outdated.
We suggest referring to the specific implementation of <a class="reference external" href="https://github.com/Nuclei-Software/nuclei-sdk/tree/master/SoC/evalsoc/Common">evalsoc in the Nuclei SDK</a> for the latest reference template.
This reference template may not be actively maintained in the future.</p>
</div>
<p>The <strong>System Configuration Files system_&lt;device&gt;.c and system_&lt;device&gt;.h</strong>
provides as a minimum the functions described under <a class="reference internal" href="api/core_system_device.html#core-api-system-device"><span class="std std-ref">System Device Configuration</span></a>.</p>
<p>These functions are device specific and need adaptations. In addition, the file might have
configuration settings for the device such as XTAL frequency or PLL prescaler settings,
necessary system initialization, vendor customized interrupt, exception and nmi handling code,
refer to <a class="reference internal" href="api/core_system_device.html#core-api-system-device"><span class="std std-ref">System Device Configuration</span></a> for more details.</p>
<p>For devices with external memory BUS the <code class="docutils literal notranslate"><span class="pre">system_&lt;Device&gt;.c</span></code> also configures the BUS system.</p>
<p>The silicon vendor might expose other functions (i.e. for power configuration) in the <code class="docutils literal notranslate"><span class="pre">system_&lt;Device&gt;.c</span></code> file.
In case of additional features the function prototypes need to be added to the <code class="docutils literal notranslate"><span class="pre">system_&lt;Device&gt;.h</span></code> header file.</p>
<section id="system-device-c-template-file">
<h2>system_Device.c Template File<a class="headerlink" href="#system-device-c-template-file" title="Link to this heading"></a></h2>
<p>Here we provided <code class="docutils literal notranslate"><span class="pre">system_Device.c</span></code> template file as below:</p>
<p>Please check file content in <a class="reference external" href="https://github.com/Nuclei-Software/NMSIS/blob/master/Device/_Template_Vendor/Vendor/Device/Source/system_Device.c">https://github.com/Nuclei-Software/NMSIS/blob/master/Device/_Template_Vendor/Vendor/Device/Source/system_Device.c</a></p>
</section>
<section id="system-device-h-template-file">
<h2>system_Device.h Template File<a class="headerlink" href="#system-device-h-template-file" title="Link to this heading"></a></h2>
<p>Here we provided <code class="docutils literal notranslate"><span class="pre">system_Device.h</span></code> template file as below:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="cm">/*</span>
<span class="linenos">  2</span><span class="cm"> * Copyright (c) 2009-2018 Arm Limited. All rights reserved.</span>
<span class="linenos">  3</span><span class="cm"> * Copyright (c) 2019 Nuclei Limited. All rights reserved.</span>
<span class="linenos">  4</span><span class="cm"> *</span>
<span class="linenos">  5</span><span class="cm"> * SPDX-License-Identifier: Apache-2.0</span>
<span class="linenos">  6</span><span class="cm"> *</span>
<span class="linenos">  7</span><span class="cm"> * Licensed under the Apache License, Version 2.0 (the License); you may</span>
<span class="linenos">  8</span><span class="cm"> * not use this file except in compliance with the License.</span>
<span class="linenos">  9</span><span class="cm"> * You may obtain a copy of the License at</span>
<span class="linenos"> 10</span><span class="cm"> *</span>
<span class="linenos"> 11</span><span class="cm"> * www.apache.org/licenses/LICENSE-2.0</span>
<span class="linenos"> 12</span><span class="cm"> *</span>
<span class="linenos"> 13</span><span class="cm"> * Unless required by applicable law or agreed to in writing, software</span>
<span class="linenos"> 14</span><span class="cm"> * distributed under the License is distributed on an AS IS BASIS, WITHOUT</span>
<span class="linenos"> 15</span><span class="cm"> * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="linenos"> 16</span><span class="cm"> * See the License for the specific language governing permissions and</span>
<span class="linenos"> 17</span><span class="cm"> * limitations under the License.</span>
<span class="linenos"> 18</span><span class="cm"> */</span>
<span class="linenos"> 19</span><span class="cm">/*******************************************************************************</span>
<span class="linenos"> 20</span><span class="cm"> * @file     system_&lt;Device&gt;.h</span>
<span class="linenos"> 21</span><span class="cm"> * @brief    NMSIS Nuclei N/NX Device Peripheral Access Layer Header File for</span>
<span class="linenos"> 22</span><span class="cm"> *           Device &lt;Device&gt;</span>
<span class="linenos"> 23</span><span class="cm"> * @version  V1.00</span>
<span class="linenos"> 24</span><span class="cm"> * @date     17. Dec 2019</span>
<span class="linenos"> 25</span><span class="cm"> ******************************************************************************/</span>
<span class="linenos"> 26</span>
<span class="linenos"> 27</span><span class="cp">#ifndef __SYSTEM_&lt;Device&gt;_H__   </span><span class="cm">/* ToDo: replace &#39;&lt;Device&gt;&#39; with your device name */</span>
<span class="linenos"> 28</span><span class="cp">#define __SYSTEM_&lt;Device&gt;_H__</span>
<span class="linenos"> 29</span>
<span class="linenos"> 30</span><span class="c1">// NOTE: Should never directly include this header, you should include &lt;Device&gt;.h</span>
<span class="linenos"> 31</span>
<span class="linenos"> 32</span><span class="cp">#ifdef __cplusplus</span>
<span class="linenos"> 33</span><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 34</span><span class="cp">#endif</span>
<span class="linenos"> 35</span>
<span class="linenos"> 36</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span>
<span class="linenos"> 37</span>
<span class="linenos"> 38</span><span class="k">extern</span><span class="w"> </span><span class="k">volatile</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">SystemCoreClock</span><span class="p">;</span><span class="w">     </span><span class="cm">/*!&lt; System Clock Frequency (Core Clock) */</span>
<span class="linenos"> 39</span>
<span class="linenos"> 40</span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">EXC_Frame</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 41</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">ra</span><span class="p">;</span><span class="w">                </span><span class="cm">/* ra: x1, return address for jump */</span>
<span class="linenos"> 42</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">tp</span><span class="p">;</span><span class="w">                </span><span class="cm">/* tp: x4, thread pointer */</span>
<span class="linenos"> 43</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">t0</span><span class="p">;</span><span class="w">                </span><span class="cm">/* t0: x5, temporary register 0 */</span>
<span class="linenos"> 44</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">t1</span><span class="p">;</span><span class="w">                </span><span class="cm">/* t1: x6, temporary register 1 */</span>
<span class="linenos"> 45</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">t2</span><span class="p">;</span><span class="w">                </span><span class="cm">/* t2: x7, temporary register 2 */</span>
<span class="linenos"> 46</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">a0</span><span class="p">;</span><span class="w">                </span><span class="cm">/* a0: x10, return value or function argument 0 */</span>
<span class="linenos"> 47</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">a1</span><span class="p">;</span><span class="w">                </span><span class="cm">/* a1: x11, return value or function argument 1 */</span>
<span class="linenos"> 48</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">a2</span><span class="p">;</span><span class="w">                </span><span class="cm">/* a2: x12, function argument 2 */</span>
<span class="linenos"> 49</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">a3</span><span class="p">;</span><span class="w">                </span><span class="cm">/* a3: x13, function argument 3 */</span>
<span class="linenos"> 50</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">a4</span><span class="p">;</span><span class="w">                </span><span class="cm">/* a4: x14, function argument 4 */</span>
<span class="linenos"> 51</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">a5</span><span class="p">;</span><span class="w">                </span><span class="cm">/* a5: x15, function argument 5 */</span>
<span class="linenos"> 52</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">cause</span><span class="p">;</span><span class="w">             </span><span class="cm">/* cause: machine/supervisor mode cause csr register */</span>
<span class="linenos"> 53</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">epc</span><span class="p">;</span><span class="w">               </span><span class="cm">/* epc: machine/ supervisor mode exception program counter csr register */</span>
<span class="linenos"> 54</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">msubm</span><span class="p">;</span><span class="w">             </span><span class="cm">/* msubm: machine sub-mode csr register, nuclei customized, exclusive to machine mode */</span>
<span class="linenos"> 55</span><span class="cp">#ifndef __riscv_32e</span>
<span class="linenos"> 56</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">a6</span><span class="p">;</span><span class="w">                </span><span class="cm">/* a6: x16, function argument 6 */</span>
<span class="linenos"> 57</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">a7</span><span class="p">;</span><span class="w">                </span><span class="cm">/* a7: x17, function argument 7 */</span>
<span class="linenos"> 58</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">t3</span><span class="p">;</span><span class="w">                </span><span class="cm">/* t3: x28, temporary register 3 */</span>
<span class="linenos"> 59</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">t4</span><span class="p">;</span><span class="w">                </span><span class="cm">/* t4: x29, temporary register 4 */</span>
<span class="linenos"> 60</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">t5</span><span class="p">;</span><span class="w">                </span><span class="cm">/* t5: x30, temporary register 5 */</span>
<span class="linenos"> 61</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">t6</span><span class="p">;</span><span class="w">                </span><span class="cm">/* t6: x31, temporary register 6 */</span>
<span class="linenos"> 62</span><span class="cp">#endif</span>
<span class="linenos"> 63</span><span class="p">}</span><span class="w"> </span><span class="n">EXC_Frame_Type</span><span class="p">;</span>
<span class="linenos"> 64</span>
<span class="linenos"> 65</span><span class="cm">/**</span>
<span class="linenos"> 66</span><span class="cm"> * \brief Setup the microcontroller system.</span>
<span class="linenos"> 67</span><span class="cm"> * \details</span>
<span class="linenos"> 68</span><span class="cm"> * Initialize the System and update the SystemCoreClock variable.</span>
<span class="linenos"> 69</span><span class="cm"> */</span>
<span class="linenos"> 70</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">SystemInit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="linenos"> 71</span>
<span class="linenos"> 72</span><span class="cm">/**</span>
<span class="linenos"> 73</span><span class="cm"> * \brief  Update SystemCoreClock variable.</span>
<span class="linenos"> 74</span><span class="cm"> * \details</span>
<span class="linenos"> 75</span><span class="cm"> * Updates the SystemCoreClock with current core Clock retrieved from cpu registers.</span>
<span class="linenos"> 76</span><span class="cm"> */</span>
<span class="linenos"> 77</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">SystemCoreClockUpdate</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="linenos"> 78</span>
<span class="linenos"> 79</span><span class="cm">/**</span>
<span class="linenos"> 80</span><span class="cm"> * \brief Dump Exception Frame</span>
<span class="linenos"> 81</span><span class="cm"> */</span>
<span class="linenos"> 82</span><span class="kt">void</span><span class="w"> </span><span class="nf">Exception_DumpFrame</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">mode</span><span class="p">);</span>
<span class="linenos"> 83</span>
<span class="linenos"> 84</span><span class="cm">/**</span>
<span class="linenos"> 85</span><span class="cm"> * \brief Register a m-mode exception handler for exception code EXCn</span>
<span class="linenos"> 86</span><span class="cm"> */</span>
<span class="linenos"> 87</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">Exception_Register_EXC</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">EXCn</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">exc_handler</span><span class="p">);</span>
<span class="linenos"> 88</span>
<span class="linenos"> 89</span><span class="cm">/**</span>
<span class="linenos"> 90</span><span class="cm"> * \brief Get current m-mode exception handler for exception code EXCn</span>
<span class="linenos"> 91</span><span class="cm"> */</span>
<span class="linenos"> 92</span><span class="k">extern</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="nf">Exception_Get_EXC</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">EXCn</span><span class="p">);</span>
<span class="linenos"> 93</span>
<span class="linenos"> 94</span><span class="cm">/**</span>
<span class="linenos"> 95</span><span class="cm"> * \brief Initialize Interrupt as Clint interrupt mode</span>
<span class="linenos"> 96</span><span class="cm"> */</span>
<span class="linenos"> 97</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">CLINT_Interrupt_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="linenos"> 98</span>
<span class="linenos"> 99</span><span class="cm">/**</span>
<span class="linenos">100</span><span class="cm"> * \brief Initialize Interrupt</span>
<span class="linenos">101</span><span class="cm"> */</span>
<span class="linenos">102</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">Interrupt_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="linenos">103</span>
<span class="linenos">104</span><span class="cp">#if defined(__ECLIC_PRESENT) &amp;&amp; (__ECLIC_PRESENT == 1)</span>
<span class="linenos">105</span><span class="cm">/**</span>
<span class="linenos">106</span><span class="cm"> * \brief Do ECLIC Interrupt configuration</span>
<span class="linenos">107</span><span class="cm"> */</span>
<span class="linenos">108</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">ECLIC_Interrupt_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="linenos">109</span>
<span class="linenos">110</span><span class="cm">/**</span>
<span class="linenos">111</span><span class="cm"> * \brief  Initialize a specific IRQ and register the handler</span>
<span class="linenos">112</span><span class="cm"> * \details</span>
<span class="linenos">113</span><span class="cm"> * This function set vector mode, trigger mode and polarity, interrupt level and priority,</span>
<span class="linenos">114</span><span class="cm"> * assign handler for specific IRQn.</span>
<span class="linenos">115</span><span class="cm"> */</span>
<span class="linenos">116</span><span class="k">extern</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">ECLIC_Register_IRQ</span><span class="p">(</span><span class="n">IRQn_Type</span><span class="w"> </span><span class="n">IRQn</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">shv</span><span class="p">,</span><span class="w"> </span><span class="n">ECLIC_TRIGGER_Type</span><span class="w"> </span><span class="n">trig_mode</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">lvl</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">priority</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">handler</span><span class="p">);</span>
<span class="linenos">117</span>
<span class="linenos">118</span><span class="cp">#if defined(__TEE_PRESENT) &amp;&amp; (__TEE_PRESENT == 1)</span>
<span class="linenos">119</span><span class="cm">/**</span>
<span class="linenos">120</span><span class="cm"> * \brief  Initialize a specific IRQ and register the handler of supervisor mode</span>
<span class="linenos">121</span><span class="cm"> * \details</span>
<span class="linenos">122</span><span class="cm"> * This function set vector mode, trigger mode and polarity, interrupt level and priority,</span>
<span class="linenos">123</span><span class="cm"> * assign handler for specific IRQn.</span>
<span class="linenos">124</span><span class="cm"> */</span>
<span class="linenos">125</span><span class="k">extern</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">ECLIC_Register_IRQ_S</span><span class="p">(</span><span class="n">IRQn_Type</span><span class="w"> </span><span class="n">IRQn</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">shv</span><span class="p">,</span><span class="w"> </span><span class="n">ECLIC_TRIGGER_Type</span><span class="w"> </span><span class="n">trig_mode</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">lvl</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">priority</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">handler</span><span class="p">);</span>
<span class="linenos">126</span><span class="cp">#endif</span>
<span class="linenos">127</span>
<span class="linenos">128</span><span class="cp">#endif</span>
<span class="linenos">129</span>
<span class="linenos">130</span><span class="cm">/**</span>
<span class="linenos">131</span><span class="cm"> * \brief Register a m-mode core interrupt handler for clint/plic interrupt mode</span>
<span class="linenos">132</span><span class="cm"> */</span>
<span class="linenos">133</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">Interrupt_Register_CoreIRQ</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">int_handler</span><span class="p">);</span>
<span class="linenos">134</span>
<span class="linenos">135</span><span class="cm">/**</span>
<span class="linenos">136</span><span class="cm"> * \brief Register a m-mode plic external interrupt handler for clint/plic interrupt mode</span>
<span class="linenos">137</span><span class="cm"> */</span>
<span class="linenos">138</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">Interrupt_Register_ExtIRQ</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">int_handler</span><span class="p">);</span>
<span class="linenos">139</span>
<span class="linenos">140</span><span class="cm">/**</span>
<span class="linenos">141</span><span class="cm"> * \brief Get a m-mode core interrupt handler for core interrupt number</span>
<span class="linenos">142</span><span class="cm"> */</span>
<span class="linenos">143</span><span class="k">extern</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="nf">Interrupt_Get_CoreIRQ</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">);</span>
<span class="linenos">144</span>
<span class="linenos">145</span><span class="cm">/**</span>
<span class="linenos">146</span><span class="cm"> * \brief Get a m-mode external interrupt handler for external interrupt number</span>
<span class="linenos">147</span><span class="cm"> */</span>
<span class="linenos">148</span><span class="k">extern</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="nf">Interrupt_Get_ExtIRQ</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">);</span>
<span class="linenos">149</span>
<span class="linenos">150</span><span class="cm">/**</span>
<span class="linenos">151</span><span class="cm"> * \brief Register a m-mode riscv core interrupt and register the handler for clint/plic interrupt mode</span>
<span class="linenos">152</span><span class="cm"> */</span>
<span class="linenos">153</span><span class="k">extern</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">Core_Register_IRQ</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">handler</span><span class="p">);</span>
<span class="linenos">154</span>
<span class="linenos">155</span><span class="cp">#if defined(__PLIC_PRESENT) &amp;&amp; (__PLIC_PRESENT == 1)</span>
<span class="linenos">156</span><span class="cm">/**</span>
<span class="linenos">157</span><span class="cm"> * \brief  Do plic interrupt configuration for clint/plic interrupt mode</span>
<span class="linenos">158</span><span class="cm"> */</span>
<span class="linenos">159</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">PLIC_Interrupt_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="linenos">160</span><span class="cm">/**</span>
<span class="linenos">161</span><span class="cm"> * \brief  Register a m-mode specific plic interrupt and register the handler</span>
<span class="linenos">162</span><span class="cm"> */</span>
<span class="linenos">163</span><span class="k">extern</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">PLIC_Register_IRQ</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">priority</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">handler</span><span class="p">);</span>
<span class="linenos">164</span><span class="cp">#if defined(__SMODE_PRESENT) &amp;&amp; (__SMODE_PRESENT == 1)</span>
<span class="linenos">165</span><span class="cm">/**</span>
<span class="linenos">166</span><span class="cm"> * \brief  Register a s-mode specific plic interrupt and register the handler</span>
<span class="linenos">167</span><span class="cm"> */</span>
<span class="linenos">168</span><span class="k">extern</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">PLIC_Register_IRQ_S</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">priority</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">handler</span><span class="p">);</span>
<span class="linenos">169</span><span class="cp">#endif</span>
<span class="linenos">170</span><span class="cp">#endif</span>
<span class="linenos">171</span>
<span class="linenos">172</span><span class="cp">#if defined(__SMODE_PRESENT) &amp;&amp; (__SMODE_PRESENT == 1)</span>
<span class="linenos">173</span><span class="cm">/**</span>
<span class="linenos">174</span><span class="cm"> * \brief Register a s-mode exception handler for exception code EXCn</span>
<span class="linenos">175</span><span class="cm"> */</span>
<span class="linenos">176</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">Exception_Register_EXC_S</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">EXCn</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">exc_handler</span><span class="p">);</span>
<span class="linenos">177</span>
<span class="linenos">178</span><span class="cm">/**</span>
<span class="linenos">179</span><span class="cm"> * \brief Get current s-mode exception handler for exception code EXCn</span>
<span class="linenos">180</span><span class="cm"> */</span>
<span class="linenos">181</span><span class="k">extern</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="nf">Exception_Get_EXC_S</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">EXCn</span><span class="p">);</span>
<span class="linenos">182</span>
<span class="linenos">183</span><span class="cm">/**</span>
<span class="linenos">184</span><span class="cm"> * \brief Register a s-mode core interrupt handler for clint/plic interrupt mode</span>
<span class="linenos">185</span><span class="cm"> */</span>
<span class="linenos">186</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">Interrupt_Register_CoreIRQ_S</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">int_handler</span><span class="p">);</span>
<span class="linenos">187</span>
<span class="linenos">188</span><span class="cm">/**</span>
<span class="linenos">189</span><span class="cm"> * \brief Register a s-mode plic external interrupt handler for clint/plic interrupt mode</span>
<span class="linenos">190</span><span class="cm"> */</span>
<span class="linenos">191</span><span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">Interrupt_Register_ExtIRQ_S</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">int_handler</span><span class="p">);</span>
<span class="linenos">192</span>
<span class="linenos">193</span><span class="cm">/**</span>
<span class="linenos">194</span><span class="cm"> * \brief Get a s-mode core interrupt handler for core interrupt number</span>
<span class="linenos">195</span><span class="cm"> */</span>
<span class="linenos">196</span><span class="k">extern</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="nf">Interrupt_Get_CoreIRQ_S</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">);</span>
<span class="linenos">197</span>
<span class="linenos">198</span><span class="cm">/**</span>
<span class="linenos">199</span><span class="cm"> * \brief Get a s-mode external interrupt handler for external interrupt number</span>
<span class="linenos">200</span><span class="cm"> */</span>
<span class="linenos">201</span><span class="k">extern</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="nf">Interrupt_Get_ExtIRQ_S</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">);</span>
<span class="linenos">202</span>
<span class="linenos">203</span><span class="cm">/**</span>
<span class="linenos">204</span><span class="cm"> * \brief Register a s-mode riscv core interrupt and register the handler for clint/plic interrupt mode</span>
<span class="linenos">205</span><span class="cm"> */</span>
<span class="linenos">206</span><span class="k">extern</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">Core_Register_IRQ_S</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">irqn</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">handler</span><span class="p">);</span>
<span class="linenos">207</span><span class="cp">#endif</span>
<span class="linenos">208</span>
<span class="linenos">209</span>
<span class="linenos">210</span><span class="cp">#ifdef __cplusplus</span>
<span class="linenos">211</span><span class="p">}</span>
<span class="linenos">212</span><span class="cp">#endif</span>
<span class="linenos">213</span>
<span class="linenos">214</span><span class="cp">#endif </span><span class="cm">/* __SYSTEM_&lt;Device&gt;_H__ */</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="core_template_linker_device.html" class="btn btn-neutral float-left" title="Device Linker Script: gcc_&lt;device&gt;.ld" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="core_template_device_header.html" class="btn btn-neutral float-right" title="Device Header File &lt;Device.h&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-Present, Nuclei.
      <span class="lastupdated">Last updated on May 14, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>