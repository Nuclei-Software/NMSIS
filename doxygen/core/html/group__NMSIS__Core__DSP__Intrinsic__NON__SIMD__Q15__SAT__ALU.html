<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NMSIS-Core: Non-SIMD Q15 saturation ALU Instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nmsis_logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NMSIS-Core
   &#160;<span id="projectnumber">Version 1.1.0</span>
   </div>
   <div id="projectbrief">NMSIS-Core support for Nuclei processor-based devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__NMSIS__Core__DSP__Intrinsic__NON__SIMD__Q15__SAT__ALU.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Non-SIMD Q15 saturation ALU Instructions<div class="ingroups"><a class="el" href="group__NMSIS__Core__DSP__Intrinsic.html">Intrinsic Functions for SIMD Instructions</a> &raquo; <a class="el" href="group__NMSIS__Core__DSP__Intrinsic__NON__SIMD.html">Non-SIMD Instructions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Non-SIMD Q15 saturation ALU Instructions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3d272c3c6988c3c1c76ed6f5896c008e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__DSP__Intrinsic__NON__SIMD__Q15__SAT__ALU.html#ga3d272c3c6988c3c1c76ed6f5896c008e">__RV_KADDH</a> (int a, int b)</td></tr>
<tr class="memdesc:ga3d272c3c6988c3c1c76ed6f5896c008e"><td class="mdescLeft">&#160;</td><td class="mdescRight">KADDH (Signed Addition with Q15 Saturation)  <a href="#ga3d272c3c6988c3c1c76ed6f5896c008e">More...</a><br /></td></tr>
<tr class="separator:ga3d272c3c6988c3c1c76ed6f5896c008e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26af5537e6aca0133b66832596728a8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__DSP__Intrinsic__NON__SIMD__Q15__SAT__ALU.html#ga26af5537e6aca0133b66832596728a8e">__RV_KHMBB</a> (unsigned int a, unsigned int b)</td></tr>
<tr class="memdesc:ga26af5537e6aca0133b66832596728a8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">KHMBB (Signed Saturating Half Multiply B16 x B16)  <a href="#ga26af5537e6aca0133b66832596728a8e">More...</a><br /></td></tr>
<tr class="separator:ga26af5537e6aca0133b66832596728a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96e244df43ec32a722a3562a0a59a6a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__DSP__Intrinsic__NON__SIMD__Q15__SAT__ALU.html#ga96e244df43ec32a722a3562a0a59a6a6">__RV_KHMBT</a> (unsigned int a, unsigned int b)</td></tr>
<tr class="memdesc:ga96e244df43ec32a722a3562a0a59a6a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">KHMBT (Signed Saturating Half Multiply B16 x T16)  <a href="#ga96e244df43ec32a722a3562a0a59a6a6">More...</a><br /></td></tr>
<tr class="separator:ga96e244df43ec32a722a3562a0a59a6a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06a6deed6954a496ac381758e067e850"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__DSP__Intrinsic__NON__SIMD__Q15__SAT__ALU.html#ga06a6deed6954a496ac381758e067e850">__RV_KHMTT</a> (unsigned int a, unsigned int b)</td></tr>
<tr class="memdesc:ga06a6deed6954a496ac381758e067e850"><td class="mdescLeft">&#160;</td><td class="mdescRight">KHMTT (Signed Saturating Half Multiply T16 x T16)  <a href="#ga06a6deed6954a496ac381758e067e850">More...</a><br /></td></tr>
<tr class="separator:ga06a6deed6954a496ac381758e067e850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae30012cd8914b62f2fb84236b138f54f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__DSP__Intrinsic__NON__SIMD__Q15__SAT__ALU.html#gae30012cd8914b62f2fb84236b138f54f">__RV_KSUBH</a> (int a, int b)</td></tr>
<tr class="memdesc:gae30012cd8914b62f2fb84236b138f54f"><td class="mdescLeft">&#160;</td><td class="mdescRight">KSUBH (Signed Subtraction with Q15 Saturation)  <a href="#gae30012cd8914b62f2fb84236b138f54f">More...</a><br /></td></tr>
<tr class="separator:gae30012cd8914b62f2fb84236b138f54f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5a82ca7a98ea1c06cd7a468d035abcd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__DSP__Intrinsic__NON__SIMD__Q15__SAT__ALU.html#gaf5a82ca7a98ea1c06cd7a468d035abcd">__RV_UKADDH</a> (unsigned int a, unsigned int b)</td></tr>
<tr class="memdesc:gaf5a82ca7a98ea1c06cd7a468d035abcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">UKADDH (Unsigned Addition with U16 Saturation)  <a href="#gaf5a82ca7a98ea1c06cd7a468d035abcd">More...</a><br /></td></tr>
<tr class="separator:gaf5a82ca7a98ea1c06cd7a468d035abcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f7265e350aad977038169d60af14e55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__DSP__Intrinsic__NON__SIMD__Q15__SAT__ALU.html#ga8f7265e350aad977038169d60af14e55">__RV_UKSUBH</a> (unsigned int a, unsigned int b)</td></tr>
<tr class="memdesc:ga8f7265e350aad977038169d60af14e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">UKSUBH (Unsigned Subtraction with U16 Saturation)  <a href="#ga8f7265e350aad977038169d60af14e55">More...</a><br /></td></tr>
<tr class="separator:ga8f7265e350aad977038169d60af14e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Non-SIMD Q15 saturation ALU Instructions. </p>
<p>there are 7 Non-SIMD Q15 saturation ALU Instructions </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3d272c3c6988c3c1c76ed6f5896c008e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3d272c3c6988c3c1c76ed6f5896c008e">&#9670;&nbsp;</a></span>__RV_KADDH()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long __RV_KADDH </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>KADDH (Signed Addition with Q15 Saturation) </p>
<p><b>Type</b>: DSP</p>
<p><b>Syntax</b>:<br />
</p><div class="fragment"><div class="line">KADDH Rd, Rs1, Rs2</div></div><!-- fragment --><p><b>Purpose</b>:<br />
Add the signed lower 32-bit content of two registers with Q15 saturation.</p>
<p><b>Description</b>:<br />
The signed lower 32-bit content of Rs1 is added with the signed lower 32-bit content of Rs2. And the result is saturated to the 16-bit signed integer range of [-2^15, 2^15-1] and then sign- extended and written to Rd. If saturation happens, this instruction sets the OV flag.</p>
<p><b>Operations</b>:<br />
</p><div class="fragment"><div class="line">tmp = Rs1.W[0] + Rs2.W[0];</div><div class="line"><span class="keywordflow">if</span> (tmp &gt; 32767) {</div><div class="line">  res = 32767;</div><div class="line">  OV = 1;</div><div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp &lt; -32768) {</div><div class="line">  res = -32768;</div><div class="line">  OV = 1</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">  res = tmp;</div><div class="line">}</div><div class="line">Rd = SE(tmp[15:0]);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>int type of value stored in a </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>int type of value stored in b </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value stored in long type </dd></dl>

<p class="definition">Definition at line <a class="el" href="core__feature__dsp_8h_source.html#l01710">1710</a> of file <a class="el" href="core__feature__dsp_8h_source.html">core_feature_dsp.h</a>.</p>

<p class="reference">References <a class="el" href="nmsis__gcc_8h_source.html#l00055">__ASM</a>.</p>
<div class="fragment"><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;{</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordtype">long</span> result;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <a class="code" href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;kaddh %0, %1, %2&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(result) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b));</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__CompilerControl_html_ga1378040bcf22428955c6e3ce9c2053cd"><div class="ttname"><a href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a></div><div class="ttdeci">#define __ASM</div><div class="ttdoc">Pass information from the compiler to the assembler. </div><div class="ttdef"><b>Definition:</b> <a href="nmsis__gcc_8h_source.html#l00055">nmsis_gcc.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga26af5537e6aca0133b66832596728a8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26af5537e6aca0133b66832596728a8e">&#9670;&nbsp;</a></span>__RV_KHMBB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long __RV_KHMBB </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>KHMBB (Signed Saturating Half Multiply B16 x B16) </p>
<p><b>Type</b>: DSP</p>
<p><b>Syntax</b>:<br />
</p><div class="fragment"><div class="line">KHMxy Rd, Rs1, Rs2 (xy = BB, BT, TT)</div></div><!-- fragment --><p><b>Purpose</b>:<br />
Multiply the signed Q15 number contents of two 16-bit data in the corresponding portion of the lower 32-bit chunk in registers and then right-shift 15 bits to turn the Q30 result into a Q15 number again and saturate the Q15 result into the destination register. If saturation happens, an overflow flag OV will be set.</p>
<p><b>Description</b>:<br />
Multiply the top or bottom 16-bit Q15 content of the lower 32-bit portion in Rs1 with the top or bottom 16-bit Q15 content of the lower 32-bit portion in Rs2. The Q30 result is then right- shifted 15-bits and saturated into a Q15 value. The Q15 value is then sing-extended and written into Rd. When both the two Q15 inputs are 0x8000, saturation will happen. The result will be saturated to 0x7FFF and the overflow flag OV will be set.</p>
<p><b>Operations</b>:<br />
</p><div class="fragment"><div class="line">aop = Rs1.H[0]; bop = Rs2.H[0]; <span class="comment">// KHMBB</span></div><div class="line">aop = Rs1.H[0]; bop = Rs2.H[1]; <span class="comment">// KHMBT</span></div><div class="line">aop = Rs1.H[1]; bop = Rs2.H[1]; <span class="comment">// KHMTT</span></div><div class="line">If (0x8000 != aop | 0x8000 != bop) {</div><div class="line">  Mresult[31:0] = aop * bop;</div><div class="line">  res[15:0] = Mresult[30:15];</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">  res[15:0] = 0x7FFF;</div><div class="line">  OV = 1;</div><div class="line">}</div><div class="line">Rd = SE32(res[15:0]); <span class="comment">// Rv32</span></div><div class="line">Rd = SE64(res[15:0]); <span class="comment">// RV64</span></div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>unsigned int type of value stored in a </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>unsigned int type of value stored in b </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value stored in long type </dd></dl>

<p class="definition">Definition at line <a class="el" href="core__feature__dsp_8h_source.html#l02532">2532</a> of file <a class="el" href="core__feature__dsp_8h_source.html">core_feature_dsp.h</a>.</p>

<p class="reference">References <a class="el" href="nmsis__gcc_8h_source.html#l00055">__ASM</a>.</p>
<div class="fragment"><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;{</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <span class="keywordtype">long</span> result;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <a class="code" href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;khmbb %0, %1, %2&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(result) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b));</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__CompilerControl_html_ga1378040bcf22428955c6e3ce9c2053cd"><div class="ttname"><a href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a></div><div class="ttdeci">#define __ASM</div><div class="ttdoc">Pass information from the compiler to the assembler. </div><div class="ttdef"><b>Definition:</b> <a href="nmsis__gcc_8h_source.html#l00055">nmsis_gcc.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga96e244df43ec32a722a3562a0a59a6a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga96e244df43ec32a722a3562a0a59a6a6">&#9670;&nbsp;</a></span>__RV_KHMBT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long __RV_KHMBT </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>KHMBT (Signed Saturating Half Multiply B16 x T16) </p>
<p><b>Type</b>: DSP</p>
<p><b>Syntax</b>:<br />
</p><div class="fragment"><div class="line">KHMxy Rd, Rs1, Rs2 (xy = BB, BT, TT)</div></div><!-- fragment --><p><b>Purpose</b>:<br />
Multiply the signed Q15 number contents of two 16-bit data in the corresponding portion of the lower 32-bit chunk in registers and then right-shift 15 bits to turn the Q30 result into a Q15 number again and saturate the Q15 result into the destination register. If saturation happens, an overflow flag OV will be set.</p>
<p><b>Description</b>:<br />
Multiply the top or bottom 16-bit Q15 content of the lower 32-bit portion in Rs1 with the top or bottom 16-bit Q15 content of the lower 32-bit portion in Rs2. The Q30 result is then right- shifted 15-bits and saturated into a Q15 value. The Q15 value is then sing-extended and written into Rd. When both the two Q15 inputs are 0x8000, saturation will happen. The result will be saturated to 0x7FFF and the overflow flag OV will be set.</p>
<p><b>Operations</b>:<br />
</p><div class="fragment"><div class="line">aop = Rs1.H[0]; bop = Rs2.H[0]; <span class="comment">// KHMBB</span></div><div class="line">aop = Rs1.H[0]; bop = Rs2.H[1]; <span class="comment">// KHMBT</span></div><div class="line">aop = Rs1.H[1]; bop = Rs2.H[1]; <span class="comment">// KHMTT</span></div><div class="line">If (0x8000 != aop | 0x8000 != bop) {</div><div class="line">  Mresult[31:0] = aop * bop;</div><div class="line">  res[15:0] = Mresult[30:15];</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">  res[15:0] = 0x7FFF;</div><div class="line">  OV = 1;</div><div class="line">}</div><div class="line">Rd = SE32(res[15:0]); <span class="comment">// Rv32</span></div><div class="line">Rd = SE64(res[15:0]); <span class="comment">// RV64</span></div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>unsigned int type of value stored in a </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>unsigned int type of value stored in b </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value stored in long type </dd></dl>

<p class="definition">Definition at line <a class="el" href="core__feature__dsp_8h_source.html#l02585">2585</a> of file <a class="el" href="core__feature__dsp_8h_source.html">core_feature_dsp.h</a>.</p>

<p class="reference">References <a class="el" href="nmsis__gcc_8h_source.html#l00055">__ASM</a>.</p>
<div class="fragment"><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;{</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <span class="keywordtype">long</span> result;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <a class="code" href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;khmbt %0, %1, %2&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(result) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b));</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__CompilerControl_html_ga1378040bcf22428955c6e3ce9c2053cd"><div class="ttname"><a href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a></div><div class="ttdeci">#define __ASM</div><div class="ttdoc">Pass information from the compiler to the assembler. </div><div class="ttdef"><b>Definition:</b> <a href="nmsis__gcc_8h_source.html#l00055">nmsis_gcc.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga06a6deed6954a496ac381758e067e850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06a6deed6954a496ac381758e067e850">&#9670;&nbsp;</a></span>__RV_KHMTT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long __RV_KHMTT </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>KHMTT (Signed Saturating Half Multiply T16 x T16) </p>
<p><b>Type</b>: DSP</p>
<p><b>Syntax</b>:<br />
</p><div class="fragment"><div class="line">KHMxy Rd, Rs1, Rs2 (xy = BB, BT, TT)</div></div><!-- fragment --><p><b>Purpose</b>:<br />
Multiply the signed Q15 number contents of two 16-bit data in the corresponding portion of the lower 32-bit chunk in registers and then right-shift 15 bits to turn the Q30 result into a Q15 number again and saturate the Q15 result into the destination register. If saturation happens, an overflow flag OV will be set.</p>
<p><b>Description</b>:<br />
Multiply the top or bottom 16-bit Q15 content of the lower 32-bit portion in Rs1 with the top or bottom 16-bit Q15 content of the lower 32-bit portion in Rs2. The Q30 result is then right- shifted 15-bits and saturated into a Q15 value. The Q15 value is then sing-extended and written into Rd. When both the two Q15 inputs are 0x8000, saturation will happen. The result will be saturated to 0x7FFF and the overflow flag OV will be set.</p>
<p><b>Operations</b>:<br />
</p><div class="fragment"><div class="line">aop = Rs1.H[0]; bop = Rs2.H[0]; <span class="comment">// KHMBB</span></div><div class="line">aop = Rs1.H[0]; bop = Rs2.H[1]; <span class="comment">// KHMBT</span></div><div class="line">aop = Rs1.H[1]; bop = Rs2.H[1]; <span class="comment">// KHMTT</span></div><div class="line">If (0x8000 != aop | 0x8000 != bop) {</div><div class="line">  Mresult[31:0] = aop * bop;</div><div class="line">  res[15:0] = Mresult[30:15];</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">  res[15:0] = 0x7FFF;</div><div class="line">  OV = 1;</div><div class="line">}</div><div class="line">Rd = SE32(res[15:0]); <span class="comment">// Rv32</span></div><div class="line">Rd = SE64(res[15:0]); <span class="comment">// RV64</span></div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>unsigned int type of value stored in a </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>unsigned int type of value stored in b </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value stored in long type </dd></dl>

<p class="definition">Definition at line <a class="el" href="core__feature__dsp_8h_source.html#l02638">2638</a> of file <a class="el" href="core__feature__dsp_8h_source.html">core_feature_dsp.h</a>.</p>

<p class="reference">References <a class="el" href="nmsis__gcc_8h_source.html#l00055">__ASM</a>.</p>
<div class="fragment"><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;{</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="keywordtype">long</span> result;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    <a class="code" href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;khmtt %0, %1, %2&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(result) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b));</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__CompilerControl_html_ga1378040bcf22428955c6e3ce9c2053cd"><div class="ttname"><a href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a></div><div class="ttdeci">#define __ASM</div><div class="ttdoc">Pass information from the compiler to the assembler. </div><div class="ttdef"><b>Definition:</b> <a href="nmsis__gcc_8h_source.html#l00055">nmsis_gcc.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae30012cd8914b62f2fb84236b138f54f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae30012cd8914b62f2fb84236b138f54f">&#9670;&nbsp;</a></span>__RV_KSUBH()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> long __RV_KSUBH </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>KSUBH (Signed Subtraction with Q15 Saturation) </p>
<p><b>Type</b>: DSP</p>
<p><b>Syntax</b>:<br />
</p><div class="fragment"><div class="line">KSUBH Rd, Rs1, Rs2</div></div><!-- fragment --><p><b>Purpose</b>:<br />
Subtract the signed lower 32-bit content of two registers with Q15 saturation.</p>
<p><b>Description</b>:<br />
The signed lower 32-bit content of Rs2 is subtracted from the signed lower 32-bit content of Rs1. And the result is saturated to the 16-bit signed integer range of [-2^15, 2^15-1] and then sign-extended and written to Rd. If saturation happens, this instruction sets the OV flag.</p>
<p><b>Operations</b>:<br />
</p><div class="fragment"><div class="line">tmp = Rs1.W[0] - Rs2.W[0];</div><div class="line"><span class="keywordflow">if</span> (tmp &gt; (2^15)-1) {</div><div class="line">  res = (2^15)-1;</div><div class="line">  OV = 1;</div><div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp &lt; -2^15) {</div><div class="line">  res = -2^15;</div><div class="line">  OV = 1</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">  res = tmp;</div><div class="line">}</div><div class="line">Rd = SE(res[15:0]);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>int type of value stored in a </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>int type of value stored in b </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value stored in long type </dd></dl>

<p class="definition">Definition at line <a class="el" href="core__feature__dsp_8h_source.html#l05540">5540</a> of file <a class="el" href="core__feature__dsp_8h_source.html">core_feature_dsp.h</a>.</p>

<p class="reference">References <a class="el" href="nmsis__gcc_8h_source.html#l00055">__ASM</a>.</p>
<div class="fragment"><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;{</div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;    <span class="keywordtype">long</span> result;</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;    <a class="code" href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;ksubh %0, %1, %2&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(result) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b));</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__CompilerControl_html_ga1378040bcf22428955c6e3ce9c2053cd"><div class="ttname"><a href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a></div><div class="ttdeci">#define __ASM</div><div class="ttdoc">Pass information from the compiler to the assembler. </div><div class="ttdef"><b>Definition:</b> <a href="nmsis__gcc_8h_source.html#l00055">nmsis_gcc.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaf5a82ca7a98ea1c06cd7a468d035abcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf5a82ca7a98ea1c06cd7a468d035abcd">&#9670;&nbsp;</a></span>__RV_UKADDH()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> unsigned long __RV_UKADDH </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UKADDH (Unsigned Addition with U16 Saturation) </p>
<p><b>Type</b>: DSP</p>
<p><b>Syntax</b>:<br />
</p><div class="fragment"><div class="line">UKADDH Rd, Rs1, Rs2</div></div><!-- fragment --><p><b>Purpose</b>:<br />
Add the unsigned lower 32-bit content of two registers with U16 saturation.</p>
<p><b>Description</b>:<br />
The unsigned lower 32-bit content of Rs1 is added with the unsigned lower 32-bit content of Rs2. And the result is saturated to the 16-bit unsigned integer range of [0, 2^16-1] and then sign-extended and written to Rd. If saturation happens, this instruction sets the OV flag.</p>
<p><b>Operations</b>:<br />
</p><div class="fragment"><div class="line">tmp = Rs1.W[0] + Rs2.W[0];</div><div class="line"><span class="keywordflow">if</span> (tmp &gt; (2^16)-1) {</div><div class="line">  tmp = (2^16)-1;</div><div class="line">  OV = 1;</div><div class="line">}</div><div class="line">Rd = SE(tmp[15:0]);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>unsigned int type of value stored in a </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>unsigned int type of value stored in b </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value stored in unsigned long type </dd></dl>

<p class="definition">Definition at line <a class="el" href="core__feature__dsp_8h_source.html#l11563">11563</a> of file <a class="el" href="core__feature__dsp_8h_source.html">core_feature_dsp.h</a>.</p>

<p class="reference">References <a class="el" href="nmsis__gcc_8h_source.html#l00055">__ASM</a>.</p>
<div class="fragment"><div class="line"><a name="l11564"></a><span class="lineno">11564</span>&#160;{</div><div class="line"><a name="l11565"></a><span class="lineno">11565</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> result;</div><div class="line"><a name="l11566"></a><span class="lineno">11566</span>&#160;    <a class="code" href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;ukaddh %0, %1, %2&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(result) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b));</div><div class="line"><a name="l11567"></a><span class="lineno">11567</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l11568"></a><span class="lineno">11568</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__CompilerControl_html_ga1378040bcf22428955c6e3ce9c2053cd"><div class="ttname"><a href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a></div><div class="ttdeci">#define __ASM</div><div class="ttdoc">Pass information from the compiler to the assembler. </div><div class="ttdef"><b>Definition:</b> <a href="nmsis__gcc_8h_source.html#l00055">nmsis_gcc.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8f7265e350aad977038169d60af14e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8f7265e350aad977038169d60af14e55">&#9670;&nbsp;</a></span>__RV_UKSUBH()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NMSIS__Core__CompilerControl.html#gab904513442afdf77d4f8c74f23cbb040">__STATIC_FORCEINLINE</a> unsigned long __RV_UKSUBH </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UKSUBH (Unsigned Subtraction with U16 Saturation) </p>
<p><b>Type</b>: DSP</p>
<p><b>Syntax</b>:<br />
</p><div class="fragment"><div class="line">UKSUBH Rd, Rs1, Rs2</div></div><!-- fragment --><p><b>Purpose</b>:<br />
Subtract the unsigned lower 32-bit content of two registers with U16 saturation.</p>
<p><b>Description</b>:<br />
The unsigned lower 32-bit content of Rs2 is subtracted from the unsigned lower 32-bit content of Rs1. And the result is saturated to the 16-bit unsigned integer range of [0, 2^16-1] and then sign-extended and written to Rd. If saturation happens, this instruction sets the OV flag.</p>
<p><b>Operations</b>:<br />
</p><div class="fragment"><div class="line">tmp = Rs1.W[0] - Rs2.W[0];</div><div class="line"><span class="keywordflow">if</span> (tmp &gt; (2^16)-1) {</div><div class="line">  tmp = (2^16)-1;</div><div class="line">  OV = 1;</div><div class="line">}</div><div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp &lt; 0) {</div><div class="line">  tmp = 0;</div><div class="line">  OV = 1;</div><div class="line">}</div><div class="line">Rd = SE(tmp[15:0]);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>unsigned int type of value stored in a </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>unsigned int type of value stored in b </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value stored in unsigned long type </dd></dl>

<p class="definition">Definition at line <a class="el" href="core__feature__dsp_8h_source.html#l12156">12156</a> of file <a class="el" href="core__feature__dsp_8h_source.html">core_feature_dsp.h</a>.</p>

<p class="reference">References <a class="el" href="nmsis__gcc_8h_source.html#l00055">__ASM</a>.</p>
<div class="fragment"><div class="line"><a name="l12157"></a><span class="lineno">12157</span>&#160;{</div><div class="line"><a name="l12158"></a><span class="lineno">12158</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> result;</div><div class="line"><a name="l12159"></a><span class="lineno">12159</span>&#160;    <a class="code" href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;uksubh %0, %1, %2&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span>(result) : <span class="stringliteral">&quot;r&quot;</span>(a), <span class="stringliteral">&quot;r&quot;</span>(b));</div><div class="line"><a name="l12160"></a><span class="lineno">12160</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l12161"></a><span class="lineno">12161</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__CompilerControl_html_ga1378040bcf22428955c6e3ce9c2053cd"><div class="ttname"><a href="group__NMSIS__Core__CompilerControl.html#ga1378040bcf22428955c6e3ce9c2053cd">__ASM</a></div><div class="ttdeci">#define __ASM</div><div class="ttdoc">Pass information from the compiler to the assembler. </div><div class="ttdef"><b>Definition:</b> <a href="nmsis__gcc_8h_source.html#l00055">nmsis_gcc.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jan 5 2023 09:05:06 for NMSIS-Core by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
