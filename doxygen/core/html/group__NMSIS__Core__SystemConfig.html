<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NMSIS-Core: System Device Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nmsis_logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NMSIS-Core
   &#160;<span id="projectnumber">Version 1.4.0</span>
   </div>
   <div id="projectbrief">NMSIS-Core support for Nuclei processor-based devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__NMSIS__Core__SystemConfig.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">System Device Configuration</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for system and clock setup available in system_&lt;device&gt;.c.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__NMSIS__Core__IntExcNMI__Handling"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__IntExcNMI__Handling.html">Interrupt and Exception and NMI Handling</a></td></tr>
<tr class="memdesc:group__NMSIS__Core__IntExcNMI__Handling"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions for interrupt, exception and nmi handle available in system_&lt;device&gt;.c. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga1deba62f872739ce8bb0421ba46ad45a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga1deba62f872739ce8bb0421ba46ad45a">CLINT_MSIP</a>(base,  hartid)&#160;&#160;&#160;(*(volatile uint32_t *)((uintptr_t)((base) + ((hartid) * 4))))</td></tr>
<tr class="separator:ga1deba62f872739ce8bb0421ba46ad45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa26abf3a071baa0fc828f476a2e5b208"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(base,  ofs)&#160;&#160;&#160;(*(volatile uint32_t *)((uintptr_t)((base) + (ofs))))</td></tr>
<tr class="separator:gaa26abf3a071baa0fc828f476a2e5b208"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga333c13ff9e53ba253ed6d3b06072344c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga333c13ff9e53ba253ed6d3b06072344c">exc_entry_s</a> (void)</td></tr>
<tr class="separator:ga333c13ff9e53ba253ed6d3b06072344c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cf42fa93bc1fb47efbbbf361e395b6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga2cf42fa93bc1fb47efbbbf361e395b6e">irq_entry_s</a> (void)</td></tr>
<tr class="memdesc:ga2cf42fa93bc1fb47efbbbf361e395b6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">default entry for s-mode non-vector irq entry  <a href="group__NMSIS__Core__SystemConfig.html#ga2cf42fa93bc1fb47efbbbf361e395b6e">More...</a><br /></td></tr>
<tr class="separator:ga2cf42fa93bc1fb47efbbbf361e395b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85a0a6e97bb1e5b8d21e0d87426a437d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga85a0a6e97bb1e5b8d21e0d87426a437d">default_intexc_handler</a> (void)</td></tr>
<tr class="memdesc:ga85a0a6e97bb1e5b8d21e0d87426a437d"><td class="mdescLeft">&#160;</td><td class="mdescRight">default entry for s-mode exception entry  <a href="group__NMSIS__Core__SystemConfig.html#ga85a0a6e97bb1e5b8d21e0d87426a437d">More...</a><br /></td></tr>
<tr class="separator:ga85a0a6e97bb1e5b8d21e0d87426a437d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae0c36a9591fe6e9c45ecb21a794f0f0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gae0c36a9591fe6e9c45ecb21a794f0f0f">SystemCoreClockUpdate</a> (void)</td></tr>
<tr class="memdesc:gae0c36a9591fe6e9c45ecb21a794f0f0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to update the variable <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">SystemCoreClock</a>.  <a href="group__NMSIS__Core__SystemConfig.html#gae0c36a9591fe6e9c45ecb21a794f0f0f">More...</a><br /></td></tr>
<tr class="separator:gae0c36a9591fe6e9c45ecb21a794f0f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93f514700ccf00d08dbdcff7f1224eb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga93f514700ccf00d08dbdcff7f1224eb2">SystemInit</a> (void)</td></tr>
<tr class="memdesc:ga93f514700ccf00d08dbdcff7f1224eb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to Initialize the system.  <a href="group__NMSIS__Core__SystemConfig.html#ga93f514700ccf00d08dbdcff7f1224eb2">More...</a><br /></td></tr>
<tr class="separator:ga93f514700ccf00d08dbdcff7f1224eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga650b0aff4d3e3c20d326fbc558b6f90f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga650b0aff4d3e3c20d326fbc558b6f90f">SystemBannerPrint</a> (void)</td></tr>
<tr class="memdesc:ga650b0aff4d3e3c20d326fbc558b6f90f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Banner Print for Nuclei SDK.  <a href="group__NMSIS__Core__SystemConfig.html#ga650b0aff4d3e3c20d326fbc558b6f90f">More...</a><br /></td></tr>
<tr class="separator:ga650b0aff4d3e3c20d326fbc558b6f90f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29f22384ffd27dae64af8672f6304781"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga29f22384ffd27dae64af8672f6304781">irq_entry</a> (void)</td></tr>
<tr class="separator:ga29f22384ffd27dae64af8672f6304781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8966ec72bfbe215fbdca1a3983df2bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gac8966ec72bfbe215fbdca1a3983df2bf">exc_entry</a> (void)</td></tr>
<tr class="separator:gac8966ec72bfbe215fbdca1a3983df2bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70fba7831dd570ce491537271b675f15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga70fba7831dd570ce491537271b675f15">ECLIC_Interrupt_Init</a> (void)</td></tr>
<tr class="memdesc:ga70fba7831dd570ce491537271b675f15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do ECLIC Interrupt configuration.  <a href="group__NMSIS__Core__SystemConfig.html#ga70fba7831dd570ce491537271b675f15">More...</a><br /></td></tr>
<tr class="separator:ga70fba7831dd570ce491537271b675f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4de3e443b9a700e84bb1d1dcf3888ad3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga4de3e443b9a700e84bb1d1dcf3888ad3">CLINT_Interrupt_Init</a> (void)</td></tr>
<tr class="memdesc:ga4de3e443b9a700e84bb1d1dcf3888ad3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do CLINT Interrupt configuration.  <a href="group__NMSIS__Core__SystemConfig.html#ga4de3e443b9a700e84bb1d1dcf3888ad3">More...</a><br /></td></tr>
<tr class="separator:ga4de3e443b9a700e84bb1d1dcf3888ad3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9bf05b8b9ade59d86f9c58eea665ca9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga9bf05b8b9ade59d86f9c58eea665ca9c">PLIC_Interrupt_Init</a> (void)</td></tr>
<tr class="memdesc:ga9bf05b8b9ade59d86f9c58eea665ca9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do PLIC Interrupt configuration.  <a href="group__NMSIS__Core__SystemConfig.html#ga9bf05b8b9ade59d86f9c58eea665ca9c">More...</a><br /></td></tr>
<tr class="separator:ga9bf05b8b9ade59d86f9c58eea665ca9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeac2103d8a0e1baccd0a23df081650c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gaeac2103d8a0e1baccd0a23df081650c9">Interrupt_Init</a> (void)</td></tr>
<tr class="memdesc:gaeac2103d8a0e1baccd0a23df081650c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize interrupt controller  <a href="group__NMSIS__Core__SystemConfig.html#gaeac2103d8a0e1baccd0a23df081650c9">More...</a><br /></td></tr>
<tr class="separator:gaeac2103d8a0e1baccd0a23df081650c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52cbc8fa60b210b75ac79baa25ac74bb"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga52cbc8fa60b210b75ac79baa25ac74bb">ECLIC_Register_IRQ</a> (<a class="el" href="group__NMSIS__Core__IntExc.html#ga7e1129cd8a196f4284d41db3e82ad5c8">IRQn_Type</a> IRQn, uint8_t shv, <a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga35f79c25d5118ccfde82872bc5946ecf">ECLIC_TRIGGER_Type</a> trig_mode, uint8_t lvl, uint8_t priority, void *handler)</td></tr>
<tr class="memdesc:ga52cbc8fa60b210b75ac79baa25ac74bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a specific IRQ and register the handler.  <a href="group__NMSIS__Core__SystemConfig.html#ga52cbc8fa60b210b75ac79baa25ac74bb">More...</a><br /></td></tr>
<tr class="separator:ga52cbc8fa60b210b75ac79baa25ac74bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7a197a47f395e2bbdf447ac0fbd79df"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gab7a197a47f395e2bbdf447ac0fbd79df">Core_Register_IRQ</a> (uint32_t irqn, void *handler)</td></tr>
<tr class="memdesc:gab7a197a47f395e2bbdf447ac0fbd79df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a m-mode riscv core interrupt and register the handler.  <a href="group__NMSIS__Core__SystemConfig.html#gab7a197a47f395e2bbdf447ac0fbd79df">More...</a><br /></td></tr>
<tr class="separator:gab7a197a47f395e2bbdf447ac0fbd79df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b4e3e9a3ff7b408d7e31939a07ac3d7"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga7b4e3e9a3ff7b408d7e31939a07ac3d7">Core_Register_IRQ_S</a> (uint32_t irqn, void *handler)</td></tr>
<tr class="memdesc:ga7b4e3e9a3ff7b408d7e31939a07ac3d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a riscv s-mode core interrupt and register the handler.  <a href="group__NMSIS__Core__SystemConfig.html#ga7b4e3e9a3ff7b408d7e31939a07ac3d7">More...</a><br /></td></tr>
<tr class="separator:ga7b4e3e9a3ff7b408d7e31939a07ac3d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6d9a05c4ea29dce5179b6d4e26bb9a5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gaa6d9a05c4ea29dce5179b6d4e26bb9a5">PLIC_Register_IRQ</a> (uint32_t source, uint8_t priority, void *handler)</td></tr>
<tr class="memdesc:gaa6d9a05c4ea29dce5179b6d4e26bb9a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a m-mode specific plic interrupt and register the handler.  <a href="group__NMSIS__Core__SystemConfig.html#gaa6d9a05c4ea29dce5179b6d4e26bb9a5">More...</a><br /></td></tr>
<tr class="separator:gaa6d9a05c4ea29dce5179b6d4e26bb9a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadec79146bddf812bc9c38bebdbf9dd6d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gadec79146bddf812bc9c38bebdbf9dd6d">PLIC_Register_IRQ_S</a> (uint32_t source, uint8_t priority, void *handler)</td></tr>
<tr class="memdesc:gadec79146bddf812bc9c38bebdbf9dd6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a s-mode specific plic interrupt and register the handler.  <a href="group__NMSIS__Core__SystemConfig.html#gadec79146bddf812bc9c38bebdbf9dd6d">More...</a><br /></td></tr>
<tr class="separator:gadec79146bddf812bc9c38bebdbf9dd6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga520a945a0989507aba2d8fcc1470ef56"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga520a945a0989507aba2d8fcc1470ef56">ECLIC_Register_IRQ_S</a> (<a class="el" href="group__NMSIS__Core__IntExc.html#ga7e1129cd8a196f4284d41db3e82ad5c8">IRQn_Type</a> IRQn, uint8_t shv, <a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga35f79c25d5118ccfde82872bc5946ecf">ECLIC_TRIGGER_Type</a> trig_mode, uint8_t lvl, uint8_t priority, void *handler)</td></tr>
<tr class="memdesc:ga520a945a0989507aba2d8fcc1470ef56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a specific IRQ and register the handler for supervisor mode.  <a href="group__NMSIS__Core__SystemConfig.html#ga520a945a0989507aba2d8fcc1470ef56">More...</a><br /></td></tr>
<tr class="separator:ga520a945a0989507aba2d8fcc1470ef56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga808fd81293dc09e656377635e8b8cd08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga808fd81293dc09e656377635e8b8cd08">__sync_harts</a> (void)</td></tr>
<tr class="memdesc:ga808fd81293dc09e656377635e8b8cd08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize all harts.  <a href="group__NMSIS__Core__SystemConfig.html#ga808fd81293dc09e656377635e8b8cd08">More...</a><br /></td></tr>
<tr class="separator:ga808fd81293dc09e656377635e8b8cd08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae464e755c44ec870768275d44f77dc54"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gae464e755c44ec870768275d44f77dc54">Trap_Init</a> (void)</td></tr>
<tr class="memdesc:gae464e755c44ec870768275d44f77dc54"><td class="mdescLeft">&#160;</td><td class="mdescRight">do the init for trap  <a href="group__NMSIS__Core__SystemConfig.html#gae464e755c44ec870768275d44f77dc54">More...</a><br /></td></tr>
<tr class="separator:gae464e755c44ec870768275d44f77dc54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad13ba247efe59bbe2b6004d9bd0f10db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gad13ba247efe59bbe2b6004d9bd0f10db">_premain_init</a> (void)</td></tr>
<tr class="memdesc:gad13ba247efe59bbe2b6004d9bd0f10db"><td class="mdescLeft">&#160;</td><td class="mdescRight">early init function before main  <a href="group__NMSIS__Core__SystemConfig.html#gad13ba247efe59bbe2b6004d9bd0f10db">More...</a><br /></td></tr>
<tr class="separator:gad13ba247efe59bbe2b6004d9bd0f10db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6eb76a75cf67b543443efc82ecf33713"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga6eb76a75cf67b543443efc82ecf33713">_postmain_fini</a> (int status)</td></tr>
<tr class="memdesc:ga6eb76a75cf67b543443efc82ecf33713"><td class="mdescLeft">&#160;</td><td class="mdescRight">finish function after main  <a href="group__NMSIS__Core__SystemConfig.html#ga6eb76a75cf67b543443efc82ecf33713">More...</a><br /></td></tr>
<tr class="separator:ga6eb76a75cf67b543443efc82ecf33713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1cbc4315ef293463e6057dfb24c8115"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gad1cbc4315ef293463e6057dfb24c8115">_init</a> (void)</td></tr>
<tr class="memdesc:gad1cbc4315ef293463e6057dfb24c8115"><td class="mdescLeft">&#160;</td><td class="mdescRight">_init function called in __libc_init_array()  <a href="group__NMSIS__Core__SystemConfig.html#gad1cbc4315ef293463e6057dfb24c8115">More...</a><br /></td></tr>
<tr class="separator:gad1cbc4315ef293463e6057dfb24c8115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga173a20f19acf36985bbac6786a02b544"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga173a20f19acf36985bbac6786a02b544">_fini</a> (void)</td></tr>
<tr class="memdesc:ga173a20f19acf36985bbac6786a02b544"><td class="mdescLeft">&#160;</td><td class="mdescRight">_fini function called in __libc_fini_array()  <a href="group__NMSIS__Core__SystemConfig.html#ga173a20f19acf36985bbac6786a02b544">More...</a><br /></td></tr>
<tr class="separator:ga173a20f19acf36985bbac6786a02b544"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga0814e683179ebb031663c192f7e9b579"><td class="memItemLeft" align="right" valign="top">volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">SystemCoreClock</a> = SYSTEM_CLOCK</td></tr>
<tr class="memdesc:ga0814e683179ebb031663c192f7e9b579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable to hold the system core clock value.  <a href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">More...</a><br /></td></tr>
<tr class="separator:ga0814e683179ebb031663c192f7e9b579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga15c4e6e47d949b4b3930b8b5adad2e89"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga15c4e6e47d949b4b3930b8b5adad2e89">vector_base</a> []</td></tr>
<tr class="separator:ga15c4e6e47d949b4b3930b8b5adad2e89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga848c9baf0a0e46da60d0874fa9f0796e"><td class="memItemLeft" align="right" valign="top">volatile unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga848c9baf0a0e46da60d0874fa9f0796e">CpuIRegionBase</a> = 0xFFFFFFFF</td></tr>
<tr class="memdesc:ga848c9baf0a0e46da60d0874fa9f0796e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nuclei RISC-V CPU IRegion Base Address Probed, you should avoid to use it in your application code, please use __IREGION_BASEADDR if you want.  <a href="group__NMSIS__Core__SystemConfig.html#ga848c9baf0a0e46da60d0874fa9f0796e">More...</a><br /></td></tr>
<tr class="separator:ga848c9baf0a0e46da60d0874fa9f0796e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for system and clock setup available in system_&lt;device&gt;.c. </p>
<p>Nuclei provides a template file <b><a class="el" href="system__Device_8c_source.html">system_Device.c</a></b> that must be adapted by the silicon vendor to match their actual device. As a <b>minimum requirement</b>, this file must provide:</p><ul>
<li>A device-specific system configuration function, <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga93f514700ccf00d08dbdcff7f1224eb2">SystemInit</a>.</li>
<li>Global c library <a class="el" href="group__NMSIS__Core__SystemConfig.html#gad13ba247efe59bbe2b6004d9bd0f10db">_premain_init</a> and <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga6eb76a75cf67b543443efc82ecf33713">_postmain_fini</a> functions called right before calling main function.<ul>
<li>A global variable that contains the system frequency, <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">SystemCoreClock</a>.</li>
<li>A global eclic configuration initialization, ECLIC_Init.</li>
<li>A global exception and trap configuration initialization, <a class="el" href="group__NMSIS__Core__SystemConfig.html#gae464e755c44ec870768275d44f77dc54">Trap_Init</a> and <a class="el" href="group__NMSIS__Core__IntExcNMI__Handling.html#gab6afbaed495af51eeeb4eb7d1c5da420">Exception_Init</a>.</li>
</ul>
</li>
<li>Vendor customized interrupt, exception and nmi handling code, see <a class="el" href="group__NMSIS__Core__IntExcNMI__Handling.html">Interrupt and Exception and NMI Handling</a></li>
</ul>
<p>The file configures the device and, typically, initializes the oscillator (PLL) that is part of the microcontroller device. This file might export other functions or variables that provide a more flexible configuration of the microcontroller system.</p>
<p>And this file also provided common interrupt, exception and NMI exception handling framework template, Silicon vendor can customize these template code as they want.</p>
<dl class="section note"><dt>Note</dt><dd>Please pay special attention to the static variable <code>SystemCoreClock</code>. This variable might be used throughout the whole system initialization and runtime to calculate frequency/time related values. Thus one must assure that the variable always reflects the actual system clock speed.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Be aware that a value stored to <code>SystemCoreClock</code> during low level initialization (i.e. <code><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga93f514700ccf00d08dbdcff7f1224eb2" title="Function to Initialize the system.">SystemInit()</a></code>) might get overwritten by C libray startup code and/or .bss section initialization. Thus its highly recommended to call <a class="el" href="group__NMSIS__Core__SystemConfig.html#gae0c36a9591fe6e9c45ecb21a794f0f0f">SystemCoreClockUpdate</a> at the beginning of the user <code>main()</code> routine. </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga1deba62f872739ce8bb0421ba46ad45a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1deba62f872739ce8bb0421ba46ad45a">&#9670;&nbsp;</a></span>CLINT_MSIP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLINT_MSIP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">base, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hartid&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(*(volatile uint32_t *)((uintptr_t)((base) + ((hartid) * 4))))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01244">1244</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>

</div>
</div>
<a id="gaa26abf3a071baa0fc828f476a2e5b208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa26abf3a071baa0fc828f476a2e5b208">&#9670;&nbsp;</a></span>SMP_CTRLREG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMP_CTRLREG</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">base, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ofs&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(*(volatile uint32_t *)((uintptr_t)((base) + (ofs))))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01245">1245</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga808fd81293dc09e656377635e8b8cd08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga808fd81293dc09e656377635e8b8cd08">&#9670;&nbsp;</a></span>__sync_harts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __sync_harts </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize all harts. </p>
<p>This function is used to synchronize all the harts, especially to wait the boot hart finish initialization of data section, bss section and c runtines initialization This function must be placed in .text.init section, since section initialization is not ready, global variable and static variable should be avoid to use in this function, and avoid to call other functions </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01247">1247</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;{</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="comment">// Only do synchronize when SMP_CPU_CNT is defined and number &gt; 0</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="comment">// TODO: If you don&#39;t need to support SMP, you can directly remove code in it</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="preprocessor">#if defined(SMP_CPU_CNT) &amp;&amp; (SMP_CPU_CNT &gt; 1)</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> hartid = <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga578d4ba2532485995190134b2beb03ff">__get_hart_id</a>();</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> tmr_hartid = <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga834d34ef7d8b4425f3f69485cc666320">__get_hart_index</a>();</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> clint_base, irgb_base, smp_base;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mcfg_info;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">// NOTE: we should avoid to use global variable such as CpuIRegionBase before smp cpu are configured</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    mcfg_info = <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga7fd083b254f2438fe5cbf9d667468324">CSR_MCFG_INFO</a>);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="comment">// Assume IREGION feature present</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">if</span> (mcfg_info &amp; <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga38db90b73d8081a90fc4e9a98beca9a0">MCFG_INFO_IREGION_EXIST</a>) { <span class="comment">// IRegion Info present</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="comment">// clint base = system timer base + 0x1000</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        irgb_base = (<a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gaa4527441fd9a67ca24bc8357ea3c165d">CSR_MIRGB_INFO</a>) &gt;&gt; 10) &lt;&lt; 10;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        clint_base = irgb_base + <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga8aa2875712d93990e73772c0416667c4">IREGION_TIMER_OFS</a> + 0x1000;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        smp_base = irgb_base + <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gacd5e7c1f67cab628cf77bb1ec552c220">IREGION_SMP_OFS</a>;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <span class="comment">// Should not enter to here if iregion feature present</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="keywordflow">while</span>(1);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="comment">// Enable SMP</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(smp_base, 0xc) = 0xFFFFFFFF;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="comment">// Enaable L2, disable cluster local memory</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(smp_base, 0x4) &amp; 0x1) {</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(smp_base, 0x10) = 0x1;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(smp_base, 0xd8) = 0x0;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    }</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <a class="code" href="group__NMSIS__Core__CPU__Intrinsic.html#ga4e8baf26c3f68696f2b2ad0510eafdb5">__SMP_RWMB</a>();</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="comment">// pre-condition: interrupt must be disabled, this is done before calling this function</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="comment">// BOOT_HARTID is defined &lt;Device.h&gt;</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">if</span> (hartid == BOOT_HARTID) { <span class="comment">// boot hart</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="comment">// clear msip pending</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; SMP_CPU_CNT; i ++) {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <a class="code" href="group__NMSIS__Core__SystemConfig.html#ga1deba62f872739ce8bb0421ba46ad45a">CLINT_MSIP</a>(clint_base, i) = 0;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <a class="code" href="group__NMSIS__Core__CPU__Intrinsic.html#ga4e8baf26c3f68696f2b2ad0510eafdb5">__SMP_RWMB</a>();</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="comment">// Set machine software interrupt pending to 1</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#ga1deba62f872739ce8bb0421ba46ad45a">CLINT_MSIP</a>(clint_base, tmr_hartid) = 1;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <a class="code" href="group__NMSIS__Core__CPU__Intrinsic.html#ga4e8baf26c3f68696f2b2ad0510eafdb5">__SMP_RWMB</a>();</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <span class="comment">// wait for pending bit cleared by boot hart</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="group__NMSIS__Core__SystemConfig.html#ga1deba62f872739ce8bb0421ba46ad45a">CLINT_MSIP</a>(clint_base, tmr_hartid) == 1);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__CPU__Intrinsic_html_ga4e8baf26c3f68696f2b2ad0510eafdb5"><div class="ttname"><a href="group__NMSIS__Core__CPU__Intrinsic.html#ga4e8baf26c3f68696f2b2ad0510eafdb5">__SMP_RWMB</a></div><div class="ttdeci">#define __SMP_RWMB()</div><div class="ttdoc">SMP Read &amp; Write Memory barrier.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l02055">core_feature_base.h:2055</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga38db90b73d8081a90fc4e9a98beca9a0"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga38db90b73d8081a90fc4e9a98beca9a0">MCFG_INFO_IREGION_EXIST</a></div><div class="ttdeci">#define MCFG_INFO_IREGION_EXIST</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00307">riscv_encoding.h:307</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga8aa2875712d93990e73772c0416667c4"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga8aa2875712d93990e73772c0416667c4">IREGION_TIMER_OFS</a></div><div class="ttdeci">#define IREGION_TIMER_OFS</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00348">riscv_encoding.h:348</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_gacd5e7c1f67cab628cf77bb1ec552c220"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#gacd5e7c1f67cab628cf77bb1ec552c220">IREGION_SMP_OFS</a></div><div class="ttdeci">#define IREGION_SMP_OFS</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00349">riscv_encoding.h:349</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_ga355c96e5bd1ab3df0203e23a887c00c0"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a></div><div class="ttdeci">#define __RV_CSR_READ(csr)</div><div class="ttdoc">CSR operation Macro for csrr instruction.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00642">core_feature_base.h:642</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_ga578d4ba2532485995190134b2beb03ff"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#ga578d4ba2532485995190134b2beb03ff">__get_hart_id</a></div><div class="ttdeci">__STATIC_FORCEINLINE unsigned long __get_hart_id(void)</div><div class="ttdoc">Get hart id of current cluster.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l01250">core_feature_base.h:1250</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_ga834d34ef7d8b4425f3f69485cc666320"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#ga834d34ef7d8b4425f3f69485cc666320">__get_hart_index</a></div><div class="ttdeci">__STATIC_FORCEINLINE unsigned long __get_hart_index(void)</div><div class="ttdoc">Get hart index of current cluster.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l01230">core_feature_base.h:1230</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_ga7fd083b254f2438fe5cbf9d667468324"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#ga7fd083b254f2438fe5cbf9d667468324">CSR_MCFG_INFO</a></div><div class="ttdeci">#define CSR_MCFG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l01058">riscv_encoding.h:1058</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_gaa4527441fd9a67ca24bc8357ea3c165d"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#gaa4527441fd9a67ca24bc8357ea3c165d">CSR_MIRGB_INFO</a></div><div class="ttdeci">#define CSR_MIRGB_INFO</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l01046">riscv_encoding.h:1046</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga1deba62f872739ce8bb0421ba46ad45a"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga1deba62f872739ce8bb0421ba46ad45a">CLINT_MSIP</a></div><div class="ttdeci">#define CLINT_MSIP(base, hartid)</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l01244">system_Device.c:1244</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_gaa26abf3a071baa0fc828f476a2e5b208"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a></div><div class="ttdeci">#define SMP_CTRLREG(base, ofs)</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l01245">system_Device.c:1245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga173a20f19acf36985bbac6786a02b544"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga173a20f19acf36985bbac6786a02b544">&#9670;&nbsp;</a></span>_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _fini </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>_fini function called in __libc_fini_array() </p>
<p>This <code>__libc_fini_array()</code> function is called when exit main. user need to implement this function, otherwise when link it will error fini.c:(.text.__libc_fini_array+0x28): undefined reference to &lsquo;_fini&rsquo; </p><dl class="section note"><dt>Note</dt><dd>Please use <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga6eb76a75cf67b543443efc82ecf33713">_postmain_fini</a> function now </dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01554">1554</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;{</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="comment">/* Don&#39;t put any code here, please use _postmain_fini now */</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gad1cbc4315ef293463e6057dfb24c8115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1cbc4315ef293463e6057dfb24c8115">&#9670;&nbsp;</a></span>_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>_init function called in __libc_init_array() </p>
<p>This <code>__libc_init_array()</code> function is called during startup code, user need to implement this function, otherwise when link it will error init.c:(.text.__libc_init_array+0x26): undefined reference to &lsquo;_init&rsquo; </p><dl class="section note"><dt>Note</dt><dd>Please use <a class="el" href="group__NMSIS__Core__SystemConfig.html#gad13ba247efe59bbe2b6004d9bd0f10db">_premain_init</a> function now </dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01540">1540</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;{</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="comment">/* Don&#39;t put any code here, please use _premain_init now */</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6eb76a75cf67b543443efc82ecf33713"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6eb76a75cf67b543443efc82ecf33713">&#9670;&nbsp;</a></span>_postmain_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _postmain_fini </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>finish function after main </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>status code return from main</td></tr>
  </table>
  </dd>
</dl>
<p>This function is executed right after main function. For RISC-V gnu toolchain, _fini function might not be called by __libc_fini_array function, so we defined a new function to do initialization </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01518">1518</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;{</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="preprocessor">#if defined(CODESIZE) &amp;&amp; (CODESIZE == 1)</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="preprocessor">#ifdef CFG_SIMULATION</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    SIMULATION_EXIT(status);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="comment">/* TODO: Add your own finishing code here, called after main */</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keyword">extern</span> <span class="keywordtype">void</span> simulation_exit(<span class="keywordtype">int</span> status);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    simulation_exit(status);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gad13ba247efe59bbe2b6004d9bd0f10db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad13ba247efe59bbe2b6004d9bd0f10db">&#9670;&nbsp;</a></span>_premain_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _premain_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>early init function before main </p>
<p>This function is executed right before main function. For RISC-V gnu toolchain, _init function might not be called by __libc_init_array function, so we defined a new function to do initialization. </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01324">1324</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;{</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="preprocessor">#if defined(CODESIZE) &amp;&amp; (CODESIZE == 1)</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="comment">// TODO to reduce the code size of application</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">// No need to do so complex premain initialization steps</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="comment">// You just need to initialize the cpu resource you need to use in your</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="comment">// application code.</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="preprocessor">#ifndef CFG_IREGION_BASE_ADDR       </span><span class="comment">// Need to probe the cpu iregion base address</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">// Probe CPUIRegionBase for other cpu internal peripheral to use</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="group__NMSIS__Core__SystemConfig.html#ga848c9baf0a0e46da60d0874fa9f0796e">CpuIRegionBase</a> = (<a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gaa4527441fd9a67ca24bc8357ea3c165d">CSR_MIRGB_INFO</a>) &gt;&gt; 10) &lt;&lt; 10;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="comment">// TODO Still need to initialize uart for other code need to do printf</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="comment">// If you want to reduce more code, you can comment below code</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    uart_init(SOC_DEBUG_UART, 115200);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="comment">// TODO to make it possible for configurable boot hartid</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> hartid = <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga578d4ba2532485995190134b2beb03ff">__get_hart_id</a>();</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mcfginfo = <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga7fd083b254f2438fe5cbf9d667468324">CSR_MCFG_INFO</a>);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="comment">/* TODO: Add your own initialization code here, called before main */</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="comment">// TODO This code controlled by macros RUNMODE_* are only used internally by Nuclei</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="comment">// You can remove it if you don&#39;t want it</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="comment">// No need to use in your code</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="preprocessor">#if defined(RUNMODE_ILM_EN) || defined(RUNMODE_ECC_EN)</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="comment">// Only disable ilm when it is present</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keywordflow">if</span> (mcfginfo &amp; <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gabcbe04e4da52ab5fbbbbb10c6629cf32">MCFG_INFO_ILM</a>) {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="preprocessor">#if defined(RUNMODE_ECC_EN)</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="preprocessor">#if RUNMODE_ECC_EN == 0</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga14cf0513f6b576fcd1ff700b08f65543">__RV_CSR_CLEAR</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga76a5574122af1a8da6e2bd68c39da922">CSR_MILM_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga00f2ec5471765545572aef07793a676c">MILM_CTL_ILM_ECC_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga27d7dbd69da032a1abe3471fbb0345c3">MILM_CTL_ILM_ECC_EXCP_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga41dac82da614aab446c52c6e86cbc822">MILM_CTL_ILM_ECC_CHK_EN</a>);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga76a5574122af1a8da6e2bd68c39da922">CSR_MILM_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga00f2ec5471765545572aef07793a676c">MILM_CTL_ILM_ECC_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga27d7dbd69da032a1abe3471fbb0345c3">MILM_CTL_ILM_ECC_EXCP_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga41dac82da614aab446c52c6e86cbc822">MILM_CTL_ILM_ECC_CHK_EN</a>);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="preprocessor">#if defined(RUNMODE_ILM_EN)</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="preprocessor">#if RUNMODE_ILM_EN == 0</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga14cf0513f6b576fcd1ff700b08f65543">__RV_CSR_CLEAR</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga76a5574122af1a8da6e2bd68c39da922">CSR_MILM_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga5c75afd05ea4349e7dc851589a2b4c60">MILM_CTL_ILM_EN</a>);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga76a5574122af1a8da6e2bd68c39da922">CSR_MILM_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga5c75afd05ea4349e7dc851589a2b4c60">MILM_CTL_ILM_EN</a>);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="preprocessor">#if defined(RUNMODE_DLM_EN) || defined(RUNMODE_ECC_EN)</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="comment">// Only disable dlm when it is present</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">if</span> (mcfginfo &amp; <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga60e344b3401de3421dde506783b0f5e8">MCFG_INFO_DLM</a>) {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="preprocessor">#if defined(RUNMODE_ECC_EN)</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="preprocessor">#if RUNMODE_ECC_EN == 0</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga14cf0513f6b576fcd1ff700b08f65543">__RV_CSR_CLEAR</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga4958637ace7ceaea76e4fa4467fd6cd6">CSR_MDLM_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gaef060f008524963c4e5556b378ab77f4">MDLM_CTL_DLM_ECC_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gade0e18fa462c3271b27acb36eae59d80">MDLM_CTL_DLM_ECC_EXCP_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga04c47cb7e8dd28baa9489f1af9cdd8ea">MDLM_CTL_DLM_ECC_CHK_EN</a>);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga4958637ace7ceaea76e4fa4467fd6cd6">CSR_MDLM_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gaef060f008524963c4e5556b378ab77f4">MDLM_CTL_DLM_ECC_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gade0e18fa462c3271b27acb36eae59d80">MDLM_CTL_DLM_ECC_EXCP_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga04c47cb7e8dd28baa9489f1af9cdd8ea">MDLM_CTL_DLM_ECC_CHK_EN</a>);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="preprocessor">#if defined(RUNMODE_DLM_EN)</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="preprocessor">#if RUNMODE_DLM_EN == 0</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga14cf0513f6b576fcd1ff700b08f65543">__RV_CSR_CLEAR</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga4958637ace7ceaea76e4fa4467fd6cd6">CSR_MDLM_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga6cb4731642366eac4dfbba732abdf45c">MDLM_CTL_DLM_EN</a>);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga4958637ace7ceaea76e4fa4467fd6cd6">CSR_MDLM_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga6cb4731642366eac4dfbba732abdf45c">MDLM_CTL_DLM_EN</a>);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="preprocessor">#if defined(RUNMODE_LDSPEC_EN)</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="preprocessor">#if RUNMODE_LDSPEC_EN == 1</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gabec3fb75f542861f5dcd5a1cda1df932">CSR_MMISC_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga46c28cbcf77e7038da65179d0c47ccf6">MMISC_CTL_LDSPEC_ENABLE</a>);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga14cf0513f6b576fcd1ff700b08f65543">__RV_CSR_CLEAR</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gabec3fb75f542861f5dcd5a1cda1df932">CSR_MMISC_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga46c28cbcf77e7038da65179d0c47ccf6">MMISC_CTL_LDSPEC_ENABLE</a>);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160; </div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="comment">/* __ICACHE_PRESENT and __DCACHE_PRESENT are defined in evalsoc.h */</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">// For our internal cpu testing, they want to set evalsoc __ICACHE_PRESENT/__DCACHE_PRESENT to be 1</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="comment">// __CCM_PRESENT is still default to 0 in evalsoc.h, since it is used in core_feature_eclic.h to register interrupt, if set to 1, it might cause exception</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="comment">// but in the cpu, icache or dcache might not exist due to cpu configuration, so here</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">// we need to check whether icache/dcache really exist, if yes, then turn on it</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="preprocessor">#if defined(__ICACHE_PRESENT) &amp;&amp; (__ICACHE_PRESENT == 1)</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__NMSIS__Core__ICache.html#ga33f538692ce5743e5c23004d03cba712">ICachePresent</a>()) { <span class="comment">// Check whether icache real present or not</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="preprocessor">#if defined(RUNMODE_ECC_EN)</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="preprocessor">#if RUNMODE_ECC_EN == 0</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga14cf0513f6b576fcd1ff700b08f65543">__RV_CSR_CLEAR</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga6e79ed96b3346ea75923126b7c4d9d67">CSR_MCACHE_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gac212acd84f08a26197bc439bc58d5e58">MCACHE_CTL_IC_ECC_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga791603ffdcc47fbb787ac4c6ecd55f30">MCACHE_CTL_IC_ECC_EXCP_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga7b4e994c56ce6affb4c795feee2d0543">MCACHE_CTL_IC_ECC_CHK_EN</a>);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga6e79ed96b3346ea75923126b7c4d9d67">CSR_MCACHE_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gac212acd84f08a26197bc439bc58d5e58">MCACHE_CTL_IC_ECC_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga791603ffdcc47fbb787ac4c6ecd55f30">MCACHE_CTL_IC_ECC_EXCP_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga7b4e994c56ce6affb4c795feee2d0543">MCACHE_CTL_IC_ECC_CHK_EN</a>);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <a class="code" href="group__NMSIS__Core__ICache.html#ga76dfd7aff65a6a7fa91b53dbe44f9ce5">EnableICache</a>();</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="preprocessor">#if defined(__DCACHE_PRESENT) &amp;&amp; (__DCACHE_PRESENT == 1)</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__NMSIS__Core__DCache.html#ga8433f280786b22c34c284fcefedd3873">DCachePresent</a>()) { <span class="comment">// Check whether dcache real present or not</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="preprocessor">#if defined(RUNMODE_ECC_EN)</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="preprocessor">#if RUNMODE_ECC_EN == 0</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga14cf0513f6b576fcd1ff700b08f65543">__RV_CSR_CLEAR</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga6e79ed96b3346ea75923126b7c4d9d67">CSR_MCACHE_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga24f8fec1fe980ff09a748634ded5f3ec">MCACHE_CTL_DC_ECC_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gaa812767233bc30aa4f5e215a00e10a1a">MCACHE_CTL_DC_ECC_EXCP_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga04485a1a38f8fe5e86a0db810da4a88d">MCACHE_CTL_DC_ECC_CHK_EN</a>);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga6e79ed96b3346ea75923126b7c4d9d67">CSR_MCACHE_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga24f8fec1fe980ff09a748634ded5f3ec">MCACHE_CTL_DC_ECC_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gaa812767233bc30aa4f5e215a00e10a1a">MCACHE_CTL_DC_ECC_EXCP_EN</a> | <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga04485a1a38f8fe5e86a0db810da4a88d">MCACHE_CTL_DC_ECC_CHK_EN</a>);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <a class="code" href="group__NMSIS__Core__DCache.html#gaf90783ed69b3589cde6fe7dbabeb17c0">EnableDCache</a>();</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160; </div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="comment">/* Do fence and fence.i to make sure previous ilm/dlm/icache/dcache control done */</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <a class="code" href="group__NMSIS__Core__CPU__Intrinsic.html#ga683c246c3fdba09511675365a2fa8bd3">__RWMB</a>();</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="group__NMSIS__Core__CPU__Intrinsic.html#ga5b4c34e720fb0c9e939540333dd640e6">__FENCE_I</a>();</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="comment">// BOOT_HARTID is defined &lt;Device.h&gt; and also controlled by BOOT_HARTID in conf/evalsoc/build.mk</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="preprocessor">#ifndef CFG_IREGION_BASE_ADDR       </span><span class="comment">// Need to probe the cpu iregion base address</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordflow">if</span> (hartid == BOOT_HARTID) { <span class="comment">// only done in boot hart</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        <span class="comment">// IREGION INFO MUST BE AFTER L1/L2 Cache enabled and SMP enabled if SMP present</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#ga848c9baf0a0e46da60d0874fa9f0796e">CpuIRegionBase</a> = (<a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gaa4527441fd9a67ca24bc8357ea3c165d">CSR_MIRGB_INFO</a>) &gt;&gt; 10) &lt;&lt; 10;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="comment">// wait for correct iregion base addr is set by boot hart</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="group__NMSIS__Core__SystemConfig.html#ga848c9baf0a0e46da60d0874fa9f0796e">CpuIRegionBase</a> == 0xFFFFFFFF);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="preprocessor">#if defined(RUNMODE_L2_EN)</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">if</span> ((mcfginfo &amp; (0x1 &lt;&lt; 11)) &amp;&amp; <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(__SMPCC_BASEADDR, 0x4) &amp; 0x1 ) { <span class="comment">// L2 Cache present</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="preprocessor">#if RUNMODE_L2_EN == 1</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="comment">// Enable L2, disable cluster local memory</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(__SMPCC_BASEADDR, 0x10) = 0x1;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(__SMPCC_BASEADDR, 0xd8) = 0x0;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <a class="code" href="group__NMSIS__Core__CPU__Intrinsic.html#ga4e8baf26c3f68696f2b2ad0510eafdb5">__SMP_RWMB</a>();</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <span class="comment">// Disable L2, enable cluster local memory</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(__SMPCC_BASEADDR, 0x10) = 0x0;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <span class="comment">// use as clm or cache, when l2 disable, the affect to ddr is the same, l2 is really disabled</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa26abf3a071baa0fc828f476a2e5b208">SMP_CTRLREG</a>(__SMPCC_BASEADDR, 0xd8) = 0;<span class="comment">//0xFFFFFFFF;</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <a class="code" href="group__NMSIS__Core__CPU__Intrinsic.html#ga4e8baf26c3f68696f2b2ad0510eafdb5">__SMP_RWMB</a>();</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    }</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160; </div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="preprocessor">#if defined(RUNMODE_BPU_EN)</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="preprocessor">#if RUNMODE_BPU_EN == 1</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gabec3fb75f542861f5dcd5a1cda1df932">CSR_MMISC_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gac62547380ae39bae590e77751554f8cd">MMISC_CTL_BPU</a>);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga14cf0513f6b576fcd1ff700b08f65543">__RV_CSR_CLEAR</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gabec3fb75f542861f5dcd5a1cda1df932">CSR_MMISC_CTL</a>, <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#gac62547380ae39bae590e77751554f8cd">MMISC_CTL_BPU</a>);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="preprocessor">#if defined(__CCM_PRESENT) &amp;&amp; (__CCM_PRESENT == 1)</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="comment">// NOTE: CFG_HAS_SMODE and CFG_HAS_UMODE are defined in auto generated cpufeature.h if present in cpu</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="preprocessor">#if defined(CFG_HAS_SMODE) || defined(CFG_HAS_UMODE)</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <a class="code" href="group__NMSIS__Core__Cache.html#gae688fd9a26b86cd4bd8b78242b3f2e43">EnableSUCCM</a>();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keywordflow">if</span> (hartid == BOOT_HARTID) { <span class="comment">// only required for boot hartid</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <span class="comment">// TODO implement get_cpu_freq function to get real cpu clock freq in HZ or directly give the real cpu HZ</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="comment">// TODO you can directly give the correct cpu frequency here, if you know it without call get_cpu_freq function</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">SystemCoreClock</a> = get_cpu_freq();</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        uart_init(SOC_DEBUG_UART, 115200);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="comment">/* Display banner after UART initialized */</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#ga650b0aff4d3e3c20d326fbc558b6f90f">SystemBannerPrint</a>();</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <span class="comment">/* Initialize exception default handlers */</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#gab6afbaed495af51eeeb4eb7d1c5da420">Exception_Init</a>();</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <span class="comment">/* Interrupt initialization */</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaeac2103d8a0e1baccd0a23df081650c9">Interrupt_Init</a>();</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="comment">// TODO: internal usage for Nuclei</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="preprocessor">#ifdef RUNMODE_CONTROL</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        NSDK_DEBUG(<span class="stringliteral">&quot;Current RUNMODE=%s, ilm:%d, dlm %d, icache %d, dcache %d, ccm %d\n&quot;</span>, \</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            RUNMODE_STRING, RUNMODE_ILM_EN, RUNMODE_DLM_EN, \</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;            RUNMODE_IC_EN, RUNMODE_DC_EN, RUNMODE_CCM_EN);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <span class="comment">// ILM and DLM need to be present</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <span class="keywordflow">if</span> (mcfginfo &amp; 0x180 == 0x180) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;            NSDK_DEBUG(<span class="stringliteral">&quot;CSR: MILM_CTL 0x%x, MDLM_CTL 0x%x\n&quot;</span>, \</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga76a5574122af1a8da6e2bd68c39da922">CSR_MILM_CTL</a>), <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga4958637ace7ceaea76e4fa4467fd6cd6">CSR_MDLM_CTL</a>));</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        }</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="comment">// I/D cache need to be present</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="keywordflow">if</span> (mcfginfo &amp; 0x600) {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;            NSDK_DEBUG(<span class="stringliteral">&quot;CSR: MCACHE_CTL 0x%x\n&quot;</span>, <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga6e79ed96b3346ea75923126b7c4d9d67">CSR_MCACHE_CTL</a>));</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        NSDK_DEBUG(<span class="stringliteral">&quot;CSR: MMISC_CTL 0x%x\n&quot;</span>, <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gabec3fb75f542861f5dcd5a1cda1df932">CSR_MMISC_CTL</a>));</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        <span class="comment">/* Interrupt initialization */</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaeac2103d8a0e1baccd0a23df081650c9">Interrupt_Init</a>();</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160; </div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__CPU__Intrinsic_html_ga5b4c34e720fb0c9e939540333dd640e6"><div class="ttname"><a href="group__NMSIS__Core__CPU__Intrinsic.html#ga5b4c34e720fb0c9e939540333dd640e6">__FENCE_I</a></div><div class="ttdeci">__STATIC_FORCEINLINE void __FENCE_I(void)</div><div class="ttdoc">Fence.i Instruction.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l02040">core_feature_base.h:2040</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CPU__Intrinsic_html_ga683c246c3fdba09511675365a2fa8bd3"><div class="ttname"><a href="group__NMSIS__Core__CPU__Intrinsic.html#ga683c246c3fdba09511675365a2fa8bd3">__RWMB</a></div><div class="ttdeci">#define __RWMB()</div><div class="ttdoc">Read &amp; Write Memory barrier.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l02046">core_feature_base.h:2046</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga00f2ec5471765545572aef07793a676c"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga00f2ec5471765545572aef07793a676c">MILM_CTL_ILM_ECC_EN</a></div><div class="ttdeci">#define MILM_CTL_ILM_ECC_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00244">riscv_encoding.h:244</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga04485a1a38f8fe5e86a0db810da4a88d"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga04485a1a38f8fe5e86a0db810da4a88d">MCACHE_CTL_DC_ECC_CHK_EN</a></div><div class="ttdeci">#define MCACHE_CTL_DC_ECC_CHK_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00287">riscv_encoding.h:287</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga04c47cb7e8dd28baa9489f1af9cdd8ea"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga04c47cb7e8dd28baa9489f1af9cdd8ea">MDLM_CTL_DLM_ECC_CHK_EN</a></div><div class="ttdeci">#define MDLM_CTL_DLM_ECC_CHK_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00248">riscv_encoding.h:248</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga24f8fec1fe980ff09a748634ded5f3ec"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga24f8fec1fe980ff09a748634ded5f3ec">MCACHE_CTL_DC_ECC_EN</a></div><div class="ttdeci">#define MCACHE_CTL_DC_ECC_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00281">riscv_encoding.h:281</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga27d7dbd69da032a1abe3471fbb0345c3"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga27d7dbd69da032a1abe3471fbb0345c3">MILM_CTL_ILM_ECC_EXCP_EN</a></div><div class="ttdeci">#define MILM_CTL_ILM_ECC_EXCP_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00243">riscv_encoding.h:243</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga41dac82da614aab446c52c6e86cbc822"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga41dac82da614aab446c52c6e86cbc822">MILM_CTL_ILM_ECC_CHK_EN</a></div><div class="ttdeci">#define MILM_CTL_ILM_ECC_CHK_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00240">riscv_encoding.h:240</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga46c28cbcf77e7038da65179d0c47ccf6"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga46c28cbcf77e7038da65179d0c47ccf6">MMISC_CTL_LDSPEC_ENABLE</a></div><div class="ttdeci">#define MMISC_CTL_LDSPEC_ENABLE</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00260">riscv_encoding.h:260</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga5c75afd05ea4349e7dc851589a2b4c60"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga5c75afd05ea4349e7dc851589a2b4c60">MILM_CTL_ILM_EN</a></div><div class="ttdeci">#define MILM_CTL_ILM_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00245">riscv_encoding.h:245</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga60e344b3401de3421dde506783b0f5e8"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga60e344b3401de3421dde506783b0f5e8">MCFG_INFO_DLM</a></div><div class="ttdeci">#define MCFG_INFO_DLM</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00300">riscv_encoding.h:300</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga6cb4731642366eac4dfbba732abdf45c"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga6cb4731642366eac4dfbba732abdf45c">MDLM_CTL_DLM_EN</a></div><div class="ttdeci">#define MDLM_CTL_DLM_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00253">riscv_encoding.h:253</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga791603ffdcc47fbb787ac4c6ecd55f30"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga791603ffdcc47fbb787ac4c6ecd55f30">MCACHE_CTL_IC_ECC_EXCP_EN</a></div><div class="ttdeci">#define MCACHE_CTL_IC_ECC_EXCP_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00272">riscv_encoding.h:272</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga7b4e994c56ce6affb4c795feee2d0543"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga7b4e994c56ce6affb4c795feee2d0543">MCACHE_CTL_IC_ECC_CHK_EN</a></div><div class="ttdeci">#define MCACHE_CTL_IC_ECC_CHK_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00279">riscv_encoding.h:279</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_gaa812767233bc30aa4f5e215a00e10a1a"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#gaa812767233bc30aa4f5e215a00e10a1a">MCACHE_CTL_DC_ECC_EXCP_EN</a></div><div class="ttdeci">#define MCACHE_CTL_DC_ECC_EXCP_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00282">riscv_encoding.h:282</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_gabcbe04e4da52ab5fbbbbb10c6629cf32"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#gabcbe04e4da52ab5fbbbbb10c6629cf32">MCFG_INFO_ILM</a></div><div class="ttdeci">#define MCFG_INFO_ILM</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00299">riscv_encoding.h:299</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_gac212acd84f08a26197bc439bc58d5e58"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#gac212acd84f08a26197bc439bc58d5e58">MCACHE_CTL_IC_ECC_EN</a></div><div class="ttdeci">#define MCACHE_CTL_IC_ECC_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00271">riscv_encoding.h:271</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_gac62547380ae39bae590e77751554f8cd"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#gac62547380ae39bae590e77751554f8cd">MMISC_CTL_BPU</a></div><div class="ttdeci">#define MMISC_CTL_BPU</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00267">riscv_encoding.h:267</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_gade0e18fa462c3271b27acb36eae59d80"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#gade0e18fa462c3271b27acb36eae59d80">MDLM_CTL_DLM_ECC_EXCP_EN</a></div><div class="ttdeci">#define MDLM_CTL_DLM_ECC_EXCP_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00251">riscv_encoding.h:251</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_gaef060f008524963c4e5556b378ab77f4"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#gaef060f008524963c4e5556b378ab77f4">MDLM_CTL_DLM_ECC_EN</a></div><div class="ttdeci">#define MDLM_CTL_DLM_ECC_EN</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00252">riscv_encoding.h:252</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_ga14cf0513f6b576fcd1ff700b08f65543"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#ga14cf0513f6b576fcd1ff700b08f65543">__RV_CSR_CLEAR</a></div><div class="ttdeci">#define __RV_CSR_CLEAR(csr, val)</div><div class="ttdoc">CSR operation Macro for csrc instruction.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00734">core_feature_base.h:734</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_gafdbd9b5a14b44913675d0fa73ca6716f"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a></div><div class="ttdeci">#define __RV_CSR_SET(csr, val)</div><div class="ttdoc">CSR operation Macro for csrs instruction.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00697">core_feature_base.h:697</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_ga4958637ace7ceaea76e4fa4467fd6cd6"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#ga4958637ace7ceaea76e4fa4467fd6cd6">CSR_MDLM_CTL</a></div><div class="ttdeci">#define CSR_MDLM_CTL</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00975">riscv_encoding.h:975</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_ga6e79ed96b3346ea75923126b7c4d9d67"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#ga6e79ed96b3346ea75923126b7c4d9d67">CSR_MCACHE_CTL</a></div><div class="ttdeci">#define CSR_MCACHE_CTL</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00980">riscv_encoding.h:980</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_ga76a5574122af1a8da6e2bd68c39da922"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#ga76a5574122af1a8da6e2bd68c39da922">CSR_MILM_CTL</a></div><div class="ttdeci">#define CSR_MILM_CTL</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00974">riscv_encoding.h:974</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_gabec3fb75f542861f5dcd5a1cda1df932"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#gabec3fb75f542861f5dcd5a1cda1df932">CSR_MMISC_CTL</a></div><div class="ttdeci">#define CSR_MMISC_CTL</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00981">riscv_encoding.h:981</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__Cache_html_gae688fd9a26b86cd4bd8b78242b3f2e43"><div class="ttname"><a href="group__NMSIS__Core__Cache.html#gae688fd9a26b86cd4bd8b78242b3f2e43">EnableSUCCM</a></div><div class="ttdeci">__STATIC_FORCEINLINE void EnableSUCCM(void)</div><div class="ttdoc">Enable CCM operation in Supervisor/User Mode.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__cache_8h_source.html#l00123">core_feature_cache.h:123</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__DCache_html_ga8433f280786b22c34c284fcefedd3873"><div class="ttname"><a href="group__NMSIS__Core__DCache.html#ga8433f280786b22c34c284fcefedd3873">DCachePresent</a></div><div class="ttdeci">__STATIC_FORCEINLINE int32_t DCachePresent(void)</div><div class="ttdoc">Check DCache Unit Present or Not.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__cache_8h_source.html#l00742">core_feature_cache.h:742</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__DCache_html_gaf90783ed69b3589cde6fe7dbabeb17c0"><div class="ttname"><a href="group__NMSIS__Core__DCache.html#gaf90783ed69b3589cde6fe7dbabeb17c0">EnableDCache</a></div><div class="ttdeci">__STATIC_FORCEINLINE void EnableDCache(void)</div><div class="ttdoc">Enable DCache.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__cache_8h_source.html#l00760">core_feature_cache.h:760</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__ICache_html_ga33f538692ce5743e5c23004d03cba712"><div class="ttname"><a href="group__NMSIS__Core__ICache.html#ga33f538692ce5743e5c23004d03cba712">ICachePresent</a></div><div class="ttdeci">__STATIC_FORCEINLINE int32_t ICachePresent(void)</div><div class="ttdoc">Check ICache Unit Present or Not.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__cache_8h_source.html#l00178">core_feature_cache.h:178</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__ICache_html_ga76dfd7aff65a6a7fa91b53dbe44f9ce5"><div class="ttname"><a href="group__NMSIS__Core__ICache.html#ga76dfd7aff65a6a7fa91b53dbe44f9ce5">EnableICache</a></div><div class="ttdeci">__STATIC_FORCEINLINE void EnableICache(void)</div><div class="ttdoc">Enable ICache.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__cache_8h_source.html#l00196">core_feature_cache.h:196</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_gab6afbaed495af51eeeb4eb7d1c5da420"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#gab6afbaed495af51eeeb4eb7d1c5da420">Exception_Init</a></div><div class="ttdeci">static void Exception_Init(void)</div><div class="ttdoc">Initialize all the default core exception handlers.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00582">system_Device.c:582</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga0814e683179ebb031663c192f7e9b579"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">SystemCoreClock</a></div><div class="ttdeci">volatile uint32_t SystemCoreClock</div><div class="ttdoc">Variable to hold the system core clock value.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00184">system_Device.c:184</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga650b0aff4d3e3c20d326fbc558b6f90f"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga650b0aff4d3e3c20d326fbc558b6f90f">SystemBannerPrint</a></div><div class="ttdeci">void SystemBannerPrint(void)</div><div class="ttdoc">Banner Print for Nuclei SDK.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00847">system_Device.c:847</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga848c9baf0a0e46da60d0874fa9f0796e"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga848c9baf0a0e46da60d0874fa9f0796e">CpuIRegionBase</a></div><div class="ttdeci">volatile unsigned long CpuIRegionBase</div><div class="ttdoc">Nuclei RISC-V CPU IRegion Base Address Probed, you should avoid to use it in your application code,...</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l01241">system_Device.c:1241</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_gaeac2103d8a0e1baccd0a23df081650c9"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#gaeac2103d8a0e1baccd0a23df081650c9">Interrupt_Init</a></div><div class="ttdeci">void Interrupt_Init(void)</div><div class="ttdoc">initialize interrupt controller</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00997">system_Device.c:997</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__base_8h_source.html#l02040">__FENCE_I()</a>, <a class="el" href="core__feature__base_8h_source.html#l01250">__get_hart_id()</a>, <a class="el" href="core__feature__base_8h_source.html#l00734">__RV_CSR_CLEAR</a>, <a class="el" href="core__feature__base_8h_source.html#l00642">__RV_CSR_READ</a>, <a class="el" href="core__feature__base_8h_source.html#l00697">__RV_CSR_SET</a>, <a class="el" href="core__feature__base_8h_source.html#l02046">__RWMB</a>, <a class="el" href="core__feature__base_8h_source.html#l02055">__SMP_RWMB</a>, <a class="el" href="system__Device_8c_source.html#l01241">CpuIRegionBase</a>, <a class="el" href="riscv__encoding_8h_source.html#l00980">CSR_MCACHE_CTL</a>, <a class="el" href="riscv__encoding_8h_source.html#l01058">CSR_MCFG_INFO</a>, <a class="el" href="riscv__encoding_8h_source.html#l00975">CSR_MDLM_CTL</a>, <a class="el" href="riscv__encoding_8h_source.html#l00974">CSR_MILM_CTL</a>, <a class="el" href="riscv__encoding_8h_source.html#l01046">CSR_MIRGB_INFO</a>, <a class="el" href="riscv__encoding_8h_source.html#l00981">CSR_MMISC_CTL</a>, <a class="el" href="core__feature__cache_8h_source.html#l00742">DCachePresent()</a>, <a class="el" href="core__feature__cache_8h_source.html#l00760">EnableDCache()</a>, <a class="el" href="core__feature__cache_8h_source.html#l00196">EnableICache()</a>, <a class="el" href="core__feature__cache_8h_source.html#l00123">EnableSUCCM()</a>, <a class="el" href="system__Device_8c_source.html#l00582">Exception_Init()</a>, <a class="el" href="core__feature__cache_8h_source.html#l00178">ICachePresent()</a>, <a class="el" href="system__Device_8c_source.html#l00997">Interrupt_Init()</a>, <a class="el" href="riscv__encoding_8h_source.html#l00287">MCACHE_CTL_DC_ECC_CHK_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00281">MCACHE_CTL_DC_ECC_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00282">MCACHE_CTL_DC_ECC_EXCP_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00279">MCACHE_CTL_IC_ECC_CHK_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00271">MCACHE_CTL_IC_ECC_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00272">MCACHE_CTL_IC_ECC_EXCP_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00300">MCFG_INFO_DLM</a>, <a class="el" href="riscv__encoding_8h_source.html#l00299">MCFG_INFO_ILM</a>, <a class="el" href="riscv__encoding_8h_source.html#l00248">MDLM_CTL_DLM_ECC_CHK_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00252">MDLM_CTL_DLM_ECC_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00251">MDLM_CTL_DLM_ECC_EXCP_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00253">MDLM_CTL_DLM_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00240">MILM_CTL_ILM_ECC_CHK_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00244">MILM_CTL_ILM_ECC_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00243">MILM_CTL_ILM_ECC_EXCP_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00245">MILM_CTL_ILM_EN</a>, <a class="el" href="riscv__encoding_8h_source.html#l00267">MMISC_CTL_BPU</a>, <a class="el" href="riscv__encoding_8h_source.html#l00260">MMISC_CTL_LDSPEC_ENABLE</a>, <a class="el" href="system__Device_8c_source.html#l01245">SMP_CTRLREG</a>, <a class="el" href="system__Device_8c_source.html#l00847">SystemBannerPrint()</a>, and <a class="el" href="system__Device_8c_source.html#l00184">SystemCoreClock</a>.</p>

</div>
</div>
<a id="ga4de3e443b9a700e84bb1d1dcf3888ad3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4de3e443b9a700e84bb1d1dcf3888ad3">&#9670;&nbsp;</a></span>CLINT_Interrupt_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CLINT_Interrupt_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do CLINT Interrupt configuration. </p>
<p>This function will initialize cpu interrupt mode to clint mode. It will</p><ul>
<li>Set exception/interrupt entry to exc_entry, now interrupt and exception share the same entry point</li>
<li>Register interrupt handling routine system_core_interrupt_handler to core_interrupt_handler function, which will be called in core_exception_handler function </li>
</ul>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00935">935</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;{</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">/* Register core interrupt handler for clint/plic interrupt mode */</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga5cddbde51a3c513c534e6f87e0362297">system_core_interrupt_handler</a> = <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#gad91007127865ca21ee8296292deaa562">core_interrupt_handler</a>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="comment">/* Set as CLINT interrupt mode */</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga22f5cd17199a966b4b840dd56d151216">CSR_MTVEC</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#gac8966ec72bfbe215fbdca1a3983df2bf">exc_entry</a>);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="preprocessor">#if defined(__SMODE_PRESENT) &amp;&amp; (__SMODE_PRESENT == 1)</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">     * Set supervisor exception entry stvec to exc_entry_s</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gab1718f56f1c135bcd02a707b7172301b">CSR_STVEC</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#ga333c13ff9e53ba253ed6d3b06072344c">exc_entry_s</a>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga310a6c2ee47117e4717d1fe8abb09034">system_core_interrupt_handler_s</a> = <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga442331de13a5e6cf30e221fb8afd9711">core_interrupt_handler_s</a>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga25c27534bcb8848ca477335ef0a4011b">SYSTEM_CORE_INTNUM</a>; i++) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga2e19ce23836fd8027da0995ff69d41ca">SystemCoreInterruptHandlers</a>[i] = (<span class="keywordtype">unsigned</span> long)<a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#gaacfb9633cbb3f400d122719f659ece90">system_default_interrupt_handler</a>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="preprocessor">#if defined(__SMODE_PRESENT) &amp;&amp; (__SMODE_PRESENT == 1)</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga0a584bbf77d7982e7dec7c3dcec2f627">SystemCoreInterruptHandlers_S</a>[i] = (<span class="keywordtype">unsigned</span> long)<a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga10e7566ff2983240b81df158ebb1320d">system_default_interrupt_handler_s</a>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_gaa2d43f43f3f333cfd8e5a326a2aed413"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a></div><div class="ttdeci">#define __RV_CSR_WRITE(csr, val)</div><div class="ttdoc">CSR operation Macro for csrw instruction.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00660">core_feature_base.h:660</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_ga22f5cd17199a966b4b840dd56d151216"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#ga22f5cd17199a966b4b840dd56d151216">CSR_MTVEC</a></div><div class="ttdeci">#define CSR_MTVEC</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00632">riscv_encoding.h:632</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_gab1718f56f1c135bcd02a707b7172301b"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#gab1718f56f1c135bcd02a707b7172301b">CSR_STVEC</a></div><div class="ttdeci">#define CSR_STVEC</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00565">riscv_encoding.h:565</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga0a584bbf77d7982e7dec7c3dcec2f627"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga0a584bbf77d7982e7dec7c3dcec2f627">SystemCoreInterruptHandlers_S</a></div><div class="ttdeci">static unsigned long SystemCoreInterruptHandlers_S[SYSTEM_CORE_INTNUM]</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00281">system_Device.c:281</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga10e7566ff2983240b81df158ebb1320d"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga10e7566ff2983240b81df158ebb1320d">system_default_interrupt_handler_s</a></div><div class="ttdeci">static void system_default_interrupt_handler_s(unsigned long scause, unsigned long sp)</div><div class="ttdoc">s-mode System Default Interrupt Handler for CLINT/PLIC Interrupt Mode</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00634">system_Device.c:634</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga25c27534bcb8848ca477335ef0a4011b"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga25c27534bcb8848ca477335ef0a4011b">SYSTEM_CORE_INTNUM</a></div><div class="ttdeci">#define SYSTEM_CORE_INTNUM</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00258">system_Device.c:258</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga2e19ce23836fd8027da0995ff69d41ca"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga2e19ce23836fd8027da0995ff69d41ca">SystemCoreInterruptHandlers</a></div><div class="ttdeci">static unsigned long SystemCoreInterruptHandlers[SYSTEM_CORE_INTNUM]</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00262">system_Device.c:262</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga310a6c2ee47117e4717d1fe8abb09034"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga310a6c2ee47117e4717d1fe8abb09034">system_core_interrupt_handler_s</a></div><div class="ttdeci">static INT_HANDLER system_core_interrupt_handler_s</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00280">system_Device.c:280</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga442331de13a5e6cf30e221fb8afd9711"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga442331de13a5e6cf30e221fb8afd9711">core_interrupt_handler_s</a></div><div class="ttdeci">static void core_interrupt_handler_s(unsigned long exccode, unsigned long sp)</div><div class="ttdoc">S-Mode Common Interrupt handler entry when in clint/plic mode.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00658">system_Device.c:658</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga5cddbde51a3c513c534e6f87e0362297"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga5cddbde51a3c513c534e6f87e0362297">system_core_interrupt_handler</a></div><div class="ttdeci">static INT_HANDLER system_core_interrupt_handler</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00265">system_Device.c:265</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_gaacfb9633cbb3f400d122719f659ece90"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#gaacfb9633cbb3f400d122719f659ece90">system_default_interrupt_handler</a></div><div class="ttdeci">static void system_default_interrupt_handler(unsigned long mcause, unsigned long sp)</div><div class="ttdoc">M-Mode System Default Interrupt Handler for CLINT/PLIC Interrupt Mode.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00357">system_Device.c:357</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_gad91007127865ca21ee8296292deaa562"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#gad91007127865ca21ee8296292deaa562">core_interrupt_handler</a></div><div class="ttdeci">static void core_interrupt_handler(unsigned long exccode, unsigned long sp)</div><div class="ttdoc">M-Mode Common Interrupt handler entry when in clint/plic mode.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00381">system_Device.c:381</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga333c13ff9e53ba253ed6d3b06072344c"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga333c13ff9e53ba253ed6d3b06072344c">exc_entry_s</a></div><div class="ttdeci">void exc_entry_s(void)</div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_gac8966ec72bfbe215fbdca1a3983df2bf"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#gac8966ec72bfbe215fbdca1a3983df2bf">exc_entry</a></div><div class="ttdeci">void exc_entry(void)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__base_8h_source.html#l00660">__RV_CSR_WRITE</a>, <a class="el" href="system__Device_8c_source.html#l00381">core_interrupt_handler()</a>, <a class="el" href="system__Device_8c_source.html#l00658">core_interrupt_handler_s()</a>, <a class="el" href="riscv__encoding_8h_source.html#l00632">CSR_MTVEC</a>, <a class="el" href="riscv__encoding_8h_source.html#l00565">CSR_STVEC</a>, <a class="el" href="group__NMSIS__Core__SystemConfig.html#gac8966ec72bfbe215fbdca1a3983df2bf">exc_entry()</a>, <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga333c13ff9e53ba253ed6d3b06072344c">exc_entry_s()</a>, <a class="el" href="system__Device_8c_source.html#l00265">system_core_interrupt_handler</a>, <a class="el" href="system__Device_8c_source.html#l00280">system_core_interrupt_handler_s</a>, <a class="el" href="system__Device_8c_source.html#l00258">SYSTEM_CORE_INTNUM</a>, <a class="el" href="system__Device_8c_source.html#l00357">system_default_interrupt_handler()</a>, <a class="el" href="system__Device_8c_source.html#l00634">system_default_interrupt_handler_s()</a>, <a class="el" href="system__Device_8c_source.html#l00262">SystemCoreInterruptHandlers</a>, and <a class="el" href="system__Device_8c_source.html#l00281">SystemCoreInterruptHandlers_S</a>.</p>

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l00963">PLIC_Interrupt_Init()</a>.</p>

</div>
</div>
<a id="gab7a197a47f395e2bbdf447ac0fbd79df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab7a197a47f395e2bbdf447ac0fbd79df">&#9670;&nbsp;</a></span>Core_Register_IRQ()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Core_Register_IRQ </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>irqn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a m-mode riscv core interrupt and register the handler. </p>
<p>This function set interrupt handler for core interrupt in non-eclic mode </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">irqn</td><td>interrupt number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>interrupt handler, if NULL, handler will not be installed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 means invalid input parameter. 0 means successful. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>This function use to configure riscv core interrupt and register its interrupt handler and enable its interrupt.</li>
<li>You can only use it when you are not in eclic interrupt mode </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01069">1069</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;{</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">if</span> ((irqn &gt; <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga25c27534bcb8848ca477335ef0a4011b">SYSTEM_CORE_INTNUM</a>)) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">if</span> (handler != NULL) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="comment">/* register interrupt handler entry to core handlers */</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#gaa7e698bb2dbc4ac7b46a31e5794316c7">Interrupt_Register_CoreIRQ</a>(irqn, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)handler);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">switch</span> (irqn) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__NMSIS__Core__IntExc.html#gga7e1129cd8a196f4284d41db3e82ad5c8a02546766328e3c4539ca22a21284955a">SysTimerSW_IRQn</a>:</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaad0ea08da14cd5c2a31ddc9144be1fb0">__enable_sw_irq</a>();</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__NMSIS__Core__IntExc.html#gga7e1129cd8a196f4284d41db3e82ad5c8a1c65f7884cf42cfc70b0016245780dc9">SysTimer_IRQn</a>:</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gac83f8b12ddd74b8afab96b8b932ad7c3">__enable_timer_irq</a>();</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_gaad0ea08da14cd5c2a31ddc9144be1fb0"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#gaad0ea08da14cd5c2a31ddc9144be1fb0">__enable_sw_irq</a></div><div class="ttdeci">__STATIC_FORCEINLINE void __enable_sw_irq(void)</div><div class="ttdoc">Enable software IRQ Interrupts.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00860">core_feature_base.h:860</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_gac83f8b12ddd74b8afab96b8b932ad7c3"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#gac83f8b12ddd74b8afab96b8b932ad7c3">__enable_timer_irq</a></div><div class="ttdeci">__STATIC_FORCEINLINE void __enable_timer_irq(void)</div><div class="ttdoc">Enable Timer IRQ Interrupts.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00838">core_feature_base.h:838</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_gaa7e698bb2dbc4ac7b46a31e5794316c7"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#gaa7e698bb2dbc4ac7b46a31e5794316c7">Interrupt_Register_CoreIRQ</a></div><div class="ttdeci">void Interrupt_Register_CoreIRQ(uint32_t irqn, unsigned long int_handler)</div><div class="ttdoc">Register a m-mode core interrupt handler for core interrupt number.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00470">system_Device.c:470</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gga7e1129cd8a196f4284d41db3e82ad5c8a02546766328e3c4539ca22a21284955a"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gga7e1129cd8a196f4284d41db3e82ad5c8a02546766328e3c4539ca22a21284955a">SysTimerSW_IRQn</a></div><div class="ttdeci">@ SysTimerSW_IRQn</div><div class="ttdoc">System Timer SW interrupt.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00208">core_feature_eclic.h:208</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gga7e1129cd8a196f4284d41db3e82ad5c8a1c65f7884cf42cfc70b0016245780dc9"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gga7e1129cd8a196f4284d41db3e82ad5c8a1c65f7884cf42cfc70b0016245780dc9">SysTimer_IRQn</a></div><div class="ttdeci">@ SysTimer_IRQn</div><div class="ttdoc">System Timer Interrupt.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00212">core_feature_eclic.h:212</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__base_8h_source.html#l00860">__enable_sw_irq()</a>, <a class="el" href="core__feature__base_8h_source.html#l00838">__enable_timer_irq()</a>, <a class="el" href="system__Device_8c_source.html#l00470">Interrupt_Register_CoreIRQ()</a>, <a class="el" href="system__Device_8c_source.html#l00258">SYSTEM_CORE_INTNUM</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00212">SysTimer_IRQn</a>, and <a class="el" href="core__feature__eclic_8h_source.html#l00208">SysTimerSW_IRQn</a>.</p>

</div>
</div>
<a id="ga7b4e3e9a3ff7b408d7e31939a07ac3d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7b4e3e9a3ff7b408d7e31939a07ac3d7">&#9670;&nbsp;</a></span>Core_Register_IRQ_S()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Core_Register_IRQ_S </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>irqn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a riscv s-mode core interrupt and register the handler. </p>
<p>This function set interrupt handler for core interrupt in non-eclic mode </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">irqn</td><td>interrupt number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>interrupt handler, if NULL, handler will not be installed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 means invalid input parameter. 0 means successful. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>This function use to configure riscv core interrupt and register its interrupt handler and enable its interrupt.</li>
<li>You can only use it when you are not in eclic interrupt mode </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01105">1105</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;{</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">if</span> ((irqn &gt; <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga25c27534bcb8848ca477335ef0a4011b">SYSTEM_CORE_INTNUM</a>)) {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160; </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">if</span> (handler != NULL) {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="comment">/* register interrupt handler entry to core handlers */</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga58ced7771f67a1406954014d6c17fa83">Interrupt_Register_CoreIRQ_S</a>(irqn, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)handler);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordflow">switch</span> (irqn) {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordflow">case</span> SysTimerSW_S_IRQn:</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaeb9d68b22521e7aeac5466d501e65e64">__enable_sw_irq_s</a>();</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <span class="keywordflow">case</span> SysTimer_S_IRQn:</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga577c6ced2f4de640257240f21e9fa10c">__enable_timer_irq_s</a>();</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_ga577c6ced2f4de640257240f21e9fa10c"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#ga577c6ced2f4de640257240f21e9fa10c">__enable_timer_irq_s</a></div><div class="ttdeci">__STATIC_FORCEINLINE void __enable_timer_irq_s(void)</div><div class="ttdoc">Enable Timer IRQ Interrupts in supervisor mode.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00970">core_feature_base.h:970</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_gaeb9d68b22521e7aeac5466d501e65e64"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#gaeb9d68b22521e7aeac5466d501e65e64">__enable_sw_irq_s</a></div><div class="ttdeci">__STATIC_FORCEINLINE void __enable_sw_irq_s(void)</div><div class="ttdoc">Enable software IRQ Interrupts in supervisor mode.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00992">core_feature_base.h:992</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga58ced7771f67a1406954014d6c17fa83"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga58ced7771f67a1406954014d6c17fa83">Interrupt_Register_CoreIRQ_S</a></div><div class="ttdeci">void Interrupt_Register_CoreIRQ_S(uint32_t irqn, unsigned long int_handler)</div><div class="ttdoc">Register an s-mode core interrupt handler for core interrupt number.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00780">system_Device.c:780</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__base_8h_source.html#l00992">__enable_sw_irq_s()</a>, <a class="el" href="core__feature__base_8h_source.html#l00970">__enable_timer_irq_s()</a>, <a class="el" href="system__Device_8c_source.html#l00780">Interrupt_Register_CoreIRQ_S()</a>, and <a class="el" href="system__Device_8c_source.html#l00258">SYSTEM_CORE_INTNUM</a>.</p>

</div>
</div>
<a id="ga85a0a6e97bb1e5b8d21e0d87426a437d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga85a0a6e97bb1e5b8d21e0d87426a437d">&#9670;&nbsp;</a></span>default_intexc_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void default_intexc_handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>default entry for s-mode exception entry </p>
<p>default eclic interrupt or exception interrupt handler </p>

</div>
</div>
<a id="ga70fba7831dd570ce491537271b675f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70fba7831dd570ce491537271b675f15">&#9670;&nbsp;</a></span>ECLIC_Interrupt_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ECLIC_Interrupt_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do ECLIC Interrupt configuration. </p>
<p>This function will initialize cpu interrupt mode to eclic mode. It will</p><ul>
<li>set common non-vector entry to irq_entry</li>
<li>set vector interrupt table to vector_base</li>
<li>set exception entry to exc_entry</li>
<li>set eclic mth to 0, and nlbits to the bigest bits it supports</li>
<li>set s-mode common non-vector entry to irq_entry_s if tee present</li>
<li>set s-mode vector interrupt table to vector_base_s if tee present</li>
<li>set s-mode exception entry to exc_entry_s if tee present</li>
<li>set eclic sth to 0 if tee present </li>
</ul>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00879">879</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;{</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="preprocessor">#if defined(__ECLIC_PRESENT) &amp;&amp; (__ECLIC_PRESENT == 1)</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mcfg_info;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    mcfg_info = <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga355c96e5bd1ab3df0203e23a887c00c0">__RV_CSR_READ</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga7fd083b254f2438fe5cbf9d667468324">CSR_MCFG_INFO</a>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (mcfg_info &amp; <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga8e6bfafb27d2142ee0035f76b887acca">MCFG_INFO_CLIC</a>) {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="comment">/* Set ECLIC vector interrupt base address to vector_base */</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga5e44edb3f3d95986c92f8efad5db0c2c">CSR_MTVT</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#ga15c4e6e47d949b4b3930b8b5adad2e89">vector_base</a>);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="comment">/* Set ECLIC non-vector entry to irq_entry */</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga7d9dcb2dd7d7c764aab4b68033b383f2">CSR_MTVT2</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#ga29f22384ffd27dae64af8672f6304781">irq_entry</a> | 0x1);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="comment">/* Set as CLIC interrupt mode */</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga22f5cd17199a966b4b840dd56d151216">CSR_MTVEC</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#gac8966ec72bfbe215fbdca1a3983df2bf">exc_entry</a> | 0x3);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="comment">/* Global Configuration about MTH and NLBits.</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">         * TODO: Please adapt it according to your system requirement.</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">         * This function is called in _init function */</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExc.html#ga59e29ad3023110a58eb9163d976f44c6">ECLIC_SetMth</a>(0);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExc.html#gad35a05a1e8fb89332d59c7db2904756b">ECLIC_SetCfgNlbits</a>(__ECLIC_INTCTLBITS);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="preprocessor">#if defined(__TEE_PRESENT) &amp;&amp; (__TEE_PRESENT == 1)</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">if</span> (mcfg_info &amp; <a class="code" href="group__NMSIS__Core__CSR__Encoding.html#ga8b189b0faab8100190d9c0cb9457ab6b">MCFG_INFO_TEE</a>) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">             * Intialize ECLIC supervisor mode vector interrupt</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">             * base address stvt to vector_table_s</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gaf38aa3d532244f4e3a83782ef24218f2">CSR_STVT</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)vector_table_s);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">             * Set ECLIC supervisor mode non-vector entry to be controlled</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">             * by stvt2 CSR register.</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">             * Intialize supervisor mode ECLIC non-vector interrupt</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">             * base address stvt2 to irq_entry_s.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">            */</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gaa66cb3b9c23d77dc064e8bd7d40be93b">CSR_STVT2</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#ga2cf42fa93bc1fb47efbbbf361e395b6e">irq_entry_s</a>);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gafdbd9b5a14b44913675d0fa73ca6716f">__RV_CSR_SET</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gaa66cb3b9c23d77dc064e8bd7d40be93b">CSR_STVT2</a>, 0x01);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">             * Set supervisor exception entry stvec to exc_entry_s */</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#gab1718f56f1c135bcd02a707b7172301b">CSR_STVEC</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#ga333c13ff9e53ba253ed6d3b06072344c">exc_entry_s</a>);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <span class="comment">/* Global Configuration about STH */</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <a class="code" href="group__NMSIS__Core__IntExc.html#ga999d22f65f99deb9a98a239808046bf6">ECLIC_SetSth</a>(0);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="comment">/* Set as CLINT interrupt mode */</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga22f5cd17199a966b4b840dd56d151216">CSR_MTVEC</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#gac8966ec72bfbe215fbdca1a3983df2bf">exc_entry</a>);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga8b189b0faab8100190d9c0cb9457ab6b"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga8b189b0faab8100190d9c0cb9457ab6b">MCFG_INFO_TEE</a></div><div class="ttdeci">#define MCFG_INFO_TEE</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00292">riscv_encoding.h:292</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Encoding_html_ga8e6bfafb27d2142ee0035f76b887acca"><div class="ttname"><a href="group__NMSIS__Core__CSR__Encoding.html#ga8e6bfafb27d2142ee0035f76b887acca">MCFG_INFO_CLIC</a></div><div class="ttdeci">#define MCFG_INFO_CLIC</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00294">riscv_encoding.h:294</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_ga5e44edb3f3d95986c92f8efad5db0c2c"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#ga5e44edb3f3d95986c92f8efad5db0c2c">CSR_MTVT</a></div><div class="ttdeci">#define CSR_MTVT</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00962">riscv_encoding.h:962</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_ga7d9dcb2dd7d7c764aab4b68033b383f2"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#ga7d9dcb2dd7d7c764aab4b68033b383f2">CSR_MTVT2</a></div><div class="ttdeci">#define CSR_MTVT2</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00996">riscv_encoding.h:996</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_gaa66cb3b9c23d77dc064e8bd7d40be93b"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#gaa66cb3b9c23d77dc064e8bd7d40be93b">CSR_STVT2</a></div><div class="ttdeci">#define CSR_STVT2</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l01052">riscv_encoding.h:1052</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Registers_html_gaf38aa3d532244f4e3a83782ef24218f2"><div class="ttname"><a href="group__NMSIS__Core__CSR__Registers.html#gaf38aa3d532244f4e3a83782ef24218f2">CSR_STVT</a></div><div class="ttdeci">#define CSR_STVT</div><div class="ttdef"><b>Definition:</b> <a href="riscv__encoding_8h_source.html#l00617">riscv_encoding.h:617</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_ga59e29ad3023110a58eb9163d976f44c6"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#ga59e29ad3023110a58eb9163d976f44c6">ECLIC_SetMth</a></div><div class="ttdeci">#define ECLIC_SetMth</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00247">core_feature_eclic.h:247</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_ga999d22f65f99deb9a98a239808046bf6"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#ga999d22f65f99deb9a98a239808046bf6">ECLIC_SetSth</a></div><div class="ttdeci">#define ECLIC_SetSth</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00269">core_feature_eclic.h:269</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gad35a05a1e8fb89332d59c7db2904756b"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gad35a05a1e8fb89332d59c7db2904756b">ECLIC_SetCfgNlbits</a></div><div class="ttdeci">#define ECLIC_SetCfgNlbits</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00242">core_feature_eclic.h:242</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga15c4e6e47d949b4b3930b8b5adad2e89"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga15c4e6e47d949b4b3930b8b5adad2e89">vector_base</a></div><div class="ttdeci">unsigned long vector_base[]</div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga29f22384ffd27dae64af8672f6304781"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga29f22384ffd27dae64af8672f6304781">irq_entry</a></div><div class="ttdeci">void irq_entry(void)</div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga2cf42fa93bc1fb47efbbbf361e395b6e"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga2cf42fa93bc1fb47efbbbf361e395b6e">irq_entry_s</a></div><div class="ttdeci">void irq_entry_s(void)</div><div class="ttdoc">default entry for s-mode non-vector irq entry</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__base_8h_source.html#l00642">__RV_CSR_READ</a>, <a class="el" href="core__feature__base_8h_source.html#l00697">__RV_CSR_SET</a>, <a class="el" href="core__feature__base_8h_source.html#l00660">__RV_CSR_WRITE</a>, <a class="el" href="riscv__encoding_8h_source.html#l01058">CSR_MCFG_INFO</a>, <a class="el" href="riscv__encoding_8h_source.html#l00632">CSR_MTVEC</a>, <a class="el" href="riscv__encoding_8h_source.html#l00962">CSR_MTVT</a>, <a class="el" href="riscv__encoding_8h_source.html#l00996">CSR_MTVT2</a>, <a class="el" href="riscv__encoding_8h_source.html#l00565">CSR_STVEC</a>, <a class="el" href="riscv__encoding_8h_source.html#l00617">CSR_STVT</a>, <a class="el" href="riscv__encoding_8h_source.html#l01052">CSR_STVT2</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00242">ECLIC_SetCfgNlbits</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00247">ECLIC_SetMth</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00269">ECLIC_SetSth</a>, <a class="el" href="group__NMSIS__Core__SystemConfig.html#gac8966ec72bfbe215fbdca1a3983df2bf">exc_entry()</a>, <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga333c13ff9e53ba253ed6d3b06072344c">exc_entry_s()</a>, <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga29f22384ffd27dae64af8672f6304781">irq_entry()</a>, <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga2cf42fa93bc1fb47efbbbf361e395b6e">irq_entry_s()</a>, <a class="el" href="riscv__encoding_8h_source.html#l00294">MCFG_INFO_CLIC</a>, <a class="el" href="riscv__encoding_8h_source.html#l00292">MCFG_INFO_TEE</a>, and <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga15c4e6e47d949b4b3930b8b5adad2e89">vector_base</a>.</p>

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l00997">Interrupt_Init()</a>.</p>

</div>
</div>
<a id="ga52cbc8fa60b210b75ac79baa25ac74bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52cbc8fa60b210b75ac79baa25ac74bb">&#9670;&nbsp;</a></span>ECLIC_Register_IRQ()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ECLIC_Register_IRQ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__NMSIS__Core__IntExc.html#ga7e1129cd8a196f4284d41db3e82ad5c8">IRQn_Type</a>&#160;</td>
          <td class="paramname"><em>IRQn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>shv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga35f79c25d5118ccfde82872bc5946ecf">ECLIC_TRIGGER_Type</a>&#160;</td>
          <td class="paramname"><em>trig_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>lvl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a specific IRQ and register the handler. </p>
<p>This function set vector mode, trigger mode and polarity, interrupt level and priority, assign handler for specific IRQn. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">IRQn</td><td>NMI interrupt handler address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">shv</td><td><a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga6a01697e0ba89c691f98fee801f4a25c">ECLIC_NON_VECTOR_INTERRUPT</a> means non-vector mode, and <a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga915384ab6567d38315e8cf5a566f4840">ECLIC_VECTOR_INTERRUPT</a> is vector mode </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trig_mode</td><td>see <a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga35f79c25d5118ccfde82872bc5946ecf">ECLIC_TRIGGER_Type</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lvl</td><td>interupt level </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">priority</td><td>interrupt priority </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>interrupt handler, if NULL, handler will not be installed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 means invalid input parameter. 0 means successful. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>This function use to configure specific eclic interrupt and register its interrupt handler and enable its interrupt.</li>
<li>If the vector table is placed in read-only section(FLASHXIP mode), handler could not be installed </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01033">1033</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;{</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">if</span> ((IRQn &gt; <a class="code" href="group__NMSIS__Core__IntExc.html#gga7e1129cd8a196f4284d41db3e82ad5c8adddd70a514a83716a447d622adf17c78">SOC_INT_MAX</a>) || (shv &gt; <a class="code" href="group__NMSIS__Core__ECLIC__Registers.html#ga915384ab6567d38315e8cf5a566f4840">ECLIC_VECTOR_INTERRUPT</a>) \</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        || (trig_mode &gt; <a class="code" href="group__NMSIS__Core__ECLIC__Registers.html#gga35f79c25d5118ccfde82872bc5946ecfad5184faf1eeb1cd9f5d79f903b65297c">ECLIC_NEGTIVE_EDGE_TRIGGER</a>)) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="comment">/* set interrupt vector mode */</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#ga0bd2875fbd02a00bec78735940704c13">ECLIC_SetShvIRQ</a>(IRQn, shv);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="comment">/* set interrupt trigger mode and polarity */</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#gac0681d16f62ce0b08e48e89131995a05">ECLIC_SetTrigIRQ</a>(IRQn, trig_mode);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="comment">/* set interrupt level */</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#gad6f35a2f69908b97b083c5e31c1c5aad">ECLIC_SetLevelIRQ</a>(IRQn, lvl);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="comment">/* set interrupt priority */</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#ga721375660a030d16e429a9718c1271c8">ECLIC_SetPriorityIRQ</a>(IRQn, priority);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">if</span> (handler != NULL) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <span class="comment">/* set interrupt handler entry to vector table */</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExc.html#gaa7cacacc369af014a0008fe3b5705b77">ECLIC_SetVector</a>(IRQn, (<a class="code" href="group__NMSIS__Core__Registers.html#ga4dee6b95a366e4c3162d814d81a1301b">rv_csr_t</a>)handler);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="comment">/* enable interrupt */</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#gaef478ada8e8906c9fe8d4dc2311a39e1">ECLIC_EnableIRQ</a>(IRQn);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__ECLIC__Registers_html_ga915384ab6567d38315e8cf5a566f4840"><div class="ttname"><a href="group__NMSIS__Core__ECLIC__Registers.html#ga915384ab6567d38315e8cf5a566f4840">ECLIC_VECTOR_INTERRUPT</a></div><div class="ttdeci">#define ECLIC_VECTOR_INTERRUPT</div><div class="ttdoc">Vector Interrupt Mode of ECLIC.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00153">core_feature_eclic.h:153</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__ECLIC__Registers_html_gga35f79c25d5118ccfde82872bc5946ecfad5184faf1eeb1cd9f5d79f903b65297c"><div class="ttname"><a href="group__NMSIS__Core__ECLIC__Registers.html#gga35f79c25d5118ccfde82872bc5946ecfad5184faf1eeb1cd9f5d79f903b65297c">ECLIC_NEGTIVE_EDGE_TRIGGER</a></div><div class="ttdeci">@ ECLIC_NEGTIVE_EDGE_TRIGGER</div><div class="ttdoc">Negtive/Falling Edge Triggered, trig[0] = 1, trig[1] = 1.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00159">core_feature_eclic.h:159</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_ga0bd2875fbd02a00bec78735940704c13"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#ga0bd2875fbd02a00bec78735940704c13">ECLIC_SetShvIRQ</a></div><div class="ttdeci">#define ECLIC_SetShvIRQ</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00257">core_feature_eclic.h:257</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_ga721375660a030d16e429a9718c1271c8"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#ga721375660a030d16e429a9718c1271c8">ECLIC_SetPriorityIRQ</a></div><div class="ttdeci">#define ECLIC_SetPriorityIRQ</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00263">core_feature_eclic.h:263</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gaa7cacacc369af014a0008fe3b5705b77"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gaa7cacacc369af014a0008fe3b5705b77">ECLIC_SetVector</a></div><div class="ttdeci">#define ECLIC_SetVector</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00294">core_feature_eclic.h:294</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gac0681d16f62ce0b08e48e89131995a05"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gac0681d16f62ce0b08e48e89131995a05">ECLIC_SetTrigIRQ</a></div><div class="ttdeci">#define ECLIC_SetTrigIRQ</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00255">core_feature_eclic.h:255</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gad6f35a2f69908b97b083c5e31c1c5aad"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gad6f35a2f69908b97b083c5e31c1c5aad">ECLIC_SetLevelIRQ</a></div><div class="ttdeci">#define ECLIC_SetLevelIRQ</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00261">core_feature_eclic.h:261</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gaef478ada8e8906c9fe8d4dc2311a39e1"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gaef478ada8e8906c9fe8d4dc2311a39e1">ECLIC_EnableIRQ</a></div><div class="ttdeci">#define ECLIC_EnableIRQ</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00249">core_feature_eclic.h:249</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gga7e1129cd8a196f4284d41db3e82ad5c8adddd70a514a83716a447d622adf17c78"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gga7e1129cd8a196f4284d41db3e82ad5c8adddd70a514a83716a447d622adf17c78">SOC_INT_MAX</a></div><div class="ttdeci">@ SOC_INT_MAX</div><div class="ttdoc">Number of total interrupts.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00232">core_feature_eclic.h:232</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__Registers_html_ga4dee6b95a366e4c3162d814d81a1301b"><div class="ttname"><a href="group__NMSIS__Core__Registers.html#ga4dee6b95a366e4c3162d814d81a1301b">rv_csr_t</a></div><div class="ttdeci">unsigned long rv_csr_t</div><div class="ttdoc">Type of Control and Status Register(CSR), depends on the XLEN defined in RISC-V.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00055">core_feature_base.h:55</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__eclic_8h_source.html#l00249">ECLIC_EnableIRQ</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00159">ECLIC_NEGTIVE_EDGE_TRIGGER</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00261">ECLIC_SetLevelIRQ</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00263">ECLIC_SetPriorityIRQ</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00257">ECLIC_SetShvIRQ</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00255">ECLIC_SetTrigIRQ</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00294">ECLIC_SetVector</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00153">ECLIC_VECTOR_INTERRUPT</a>, and <a class="el" href="core__feature__eclic_8h_source.html#l00232">SOC_INT_MAX</a>.</p>

</div>
</div>
<a id="ga520a945a0989507aba2d8fcc1470ef56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga520a945a0989507aba2d8fcc1470ef56">&#9670;&nbsp;</a></span>ECLIC_Register_IRQ_S()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ECLIC_Register_IRQ_S </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__NMSIS__Core__IntExc.html#ga7e1129cd8a196f4284d41db3e82ad5c8">IRQn_Type</a>&#160;</td>
          <td class="paramname"><em>IRQn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>shv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga35f79c25d5118ccfde82872bc5946ecf">ECLIC_TRIGGER_Type</a>&#160;</td>
          <td class="paramname"><em>trig_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>lvl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a specific IRQ and register the handler for supervisor mode. </p>
<p>This function set vector mode, trigger mode and polarity, interrupt level and priority, assign handler for specific IRQn. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">IRQn</td><td>NMI interrupt handler address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">shv</td><td><a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga6a01697e0ba89c691f98fee801f4a25c">ECLIC_NON_VECTOR_INTERRUPT</a> means non-vector mode, and <a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga915384ab6567d38315e8cf5a566f4840">ECLIC_VECTOR_INTERRUPT</a> is vector mode </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trig_mode</td><td>see <a class="el" href="group__NMSIS__Core__ECLIC__Registers.html#ga35f79c25d5118ccfde82872bc5946ecf">ECLIC_TRIGGER_Type</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lvl</td><td>interupt level </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">priority</td><td>interrupt priority </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>interrupt handler, if NULL, handler will not be installed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 means invalid input parameter. 0 means successful. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>This function use to configure specific eclic S-mode interrupt and register its interrupt handler and enable its interrupt.</li>
<li>If the vector table is placed in read-only section (FLASHXIP mode), handler could not be installed. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01211">1211</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;{</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> ((IRQn &gt; <a class="code" href="group__NMSIS__Core__IntExc.html#gga7e1129cd8a196f4284d41db3e82ad5c8adddd70a514a83716a447d622adf17c78">SOC_INT_MAX</a>) || (shv &gt; <a class="code" href="group__NMSIS__Core__ECLIC__Registers.html#ga915384ab6567d38315e8cf5a566f4840">ECLIC_VECTOR_INTERRUPT</a>) \</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        || (trig_mode &gt; <a class="code" href="group__NMSIS__Core__ECLIC__Registers.html#gga35f79c25d5118ccfde82872bc5946ecfad5184faf1eeb1cd9f5d79f903b65297c">ECLIC_NEGTIVE_EDGE_TRIGGER</a>)) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="comment">/* set interrupt vector mode */</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#gab09f39dabde0e2823234ae145cf4264f">ECLIC_SetShvIRQ_S</a>(IRQn, shv);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="comment">/* set interrupt trigger mode and polarity */</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#ga24e9eed74f15faf8520cbc92dd40fa25">ECLIC_SetTrigIRQ_S</a>(IRQn, trig_mode);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">/* set interrupt level */</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#gafc63cc5748a7a6c69348496a11715560">ECLIC_SetLevelIRQ_S</a>(IRQn, lvl);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="comment">/* set interrupt priority */</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#ga152838b35c063ea7c5334531be34a62a">ECLIC_SetPriorityIRQ_S</a>(IRQn, priority);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">if</span> (handler != NULL) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="comment">/* set interrupt handler entry to vector table */</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExc.html#gada7015572c59ff6192fa36c53c253a97">ECLIC_SetVector_S</a>(IRQn, (<a class="code" href="group__NMSIS__Core__Registers.html#ga4dee6b95a366e4c3162d814d81a1301b">rv_csr_t</a>)handler);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">/* enable interrupt */</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExc.html#gae3748a626384ad0458f91de251108d9f">ECLIC_EnableIRQ_S</a>(IRQn);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_ga152838b35c063ea7c5334531be34a62a"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#ga152838b35c063ea7c5334531be34a62a">ECLIC_SetPriorityIRQ_S</a></div><div class="ttdeci">#define ECLIC_SetPriorityIRQ_S</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00279">core_feature_eclic.h:279</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_ga24e9eed74f15faf8520cbc92dd40fa25"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#ga24e9eed74f15faf8520cbc92dd40fa25">ECLIC_SetTrigIRQ_S</a></div><div class="ttdeci">#define ECLIC_SetTrigIRQ_S</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00271">core_feature_eclic.h:271</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gab09f39dabde0e2823234ae145cf4264f"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gab09f39dabde0e2823234ae145cf4264f">ECLIC_SetShvIRQ_S</a></div><div class="ttdeci">#define ECLIC_SetShvIRQ_S</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00273">core_feature_eclic.h:273</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gada7015572c59ff6192fa36c53c253a97"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gada7015572c59ff6192fa36c53c253a97">ECLIC_SetVector_S</a></div><div class="ttdeci">#define ECLIC_SetVector_S</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00298">core_feature_eclic.h:298</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gae3748a626384ad0458f91de251108d9f"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gae3748a626384ad0458f91de251108d9f">ECLIC_EnableIRQ_S</a></div><div class="ttdeci">#define ECLIC_EnableIRQ_S</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00281">core_feature_eclic.h:281</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExc_html_gafc63cc5748a7a6c69348496a11715560"><div class="ttname"><a href="group__NMSIS__Core__IntExc.html#gafc63cc5748a7a6c69348496a11715560">ECLIC_SetLevelIRQ_S</a></div><div class="ttdeci">#define ECLIC_SetLevelIRQ_S</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__eclic_8h_source.html#l00277">core_feature_eclic.h:277</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__eclic_8h_source.html#l00281">ECLIC_EnableIRQ_S</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00159">ECLIC_NEGTIVE_EDGE_TRIGGER</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00277">ECLIC_SetLevelIRQ_S</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00279">ECLIC_SetPriorityIRQ_S</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00273">ECLIC_SetShvIRQ_S</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00271">ECLIC_SetTrigIRQ_S</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00298">ECLIC_SetVector_S</a>, <a class="el" href="core__feature__eclic_8h_source.html#l00153">ECLIC_VECTOR_INTERRUPT</a>, and <a class="el" href="core__feature__eclic_8h_source.html#l00232">SOC_INT_MAX</a>.</p>

</div>
</div>
<a id="gac8966ec72bfbe215fbdca1a3983df2bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac8966ec72bfbe215fbdca1a3983df2bf">&#9670;&nbsp;</a></span>exc_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void exc_entry </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l00935">CLINT_Interrupt_Init()</a>, <a class="el" href="system__Device_8c_source.html#l00879">ECLIC_Interrupt_Init()</a>, and <a class="el" href="system__Device_8c_source.html#l00997">Interrupt_Init()</a>.</p>

</div>
</div>
<a id="ga333c13ff9e53ba253ed6d3b06072344c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga333c13ff9e53ba253ed6d3b06072344c">&#9670;&nbsp;</a></span>exc_entry_s()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void exc_entry_s </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l00935">CLINT_Interrupt_Init()</a>, and <a class="el" href="system__Device_8c_source.html#l00879">ECLIC_Interrupt_Init()</a>.</p>

</div>
</div>
<a id="gaeac2103d8a0e1baccd0a23df081650c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeac2103d8a0e1baccd0a23df081650c9">&#9670;&nbsp;</a></span>Interrupt_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize interrupt controller </p>
<p>Do CPU interrupt initialization, if plic present, init it, then init eclic if present. So if ECLIC present, the interrupt will default configured to ECLIC interrupt mode, if you want to switch to PLIC interrupt mode, you need to call PLIC_Interrupt_Init in you application code.</p>
<p>By default, if ECLIC present, eclic interrupt mode will be set, otherwise it will be clint/plic interrupt mode </p><dl class="section remark"><dt>Remarks</dt><dd>This function previously was ECLIC_Init, now ECLIC_Init is removed </dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00997">997</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;{</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="preprocessor">#if defined(CODESIZE) &amp;&amp; (CODESIZE == 1)</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="comment">/* Set as CLINT interrupt mode */</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#gaa2d43f43f3f333cfd8e5a326a2aed413">__RV_CSR_WRITE</a>(<a class="code" href="group__NMSIS__Core__CSR__Registers.html#ga22f5cd17199a966b4b840dd56d151216">CSR_MTVEC</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#gac8966ec72bfbe215fbdca1a3983df2bf">exc_entry</a>);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="comment">/* Init interrupt as eclic mode when ECLIC present</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">     * Otherwise will init interrupt as plic mode when PLIC present</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">     * Only initialize necessary ones to reduce initialization code size usage */</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="preprocessor">#if defined(__ECLIC_PRESENT) &amp;&amp; (__ECLIC_PRESENT == 1)</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <a class="code" href="group__NMSIS__Core__SystemConfig.html#ga70fba7831dd570ce491537271b675f15">ECLIC_Interrupt_Init</a>();</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="preprocessor">#elif defined(__PLIC_PRESENT) &amp;&amp; (__PLIC_PRESENT == 1)</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="group__NMSIS__Core__SystemConfig.html#ga9bf05b8b9ade59d86f9c58eea665ca9c">PLIC_Interrupt_Init</a>();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga70fba7831dd570ce491537271b675f15"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga70fba7831dd570ce491537271b675f15">ECLIC_Interrupt_Init</a></div><div class="ttdeci">void ECLIC_Interrupt_Init(void)</div><div class="ttdoc">Do ECLIC Interrupt configuration.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00879">system_Device.c:879</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga9bf05b8b9ade59d86f9c58eea665ca9c"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga9bf05b8b9ade59d86f9c58eea665ca9c">PLIC_Interrupt_Init</a></div><div class="ttdeci">void PLIC_Interrupt_Init(void)</div><div class="ttdoc">Do PLIC Interrupt configuration.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00963">system_Device.c:963</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__base_8h_source.html#l00660">__RV_CSR_WRITE</a>, <a class="el" href="riscv__encoding_8h_source.html#l00632">CSR_MTVEC</a>, <a class="el" href="system__Device_8c_source.html#l00879">ECLIC_Interrupt_Init()</a>, <a class="el" href="group__NMSIS__Core__SystemConfig.html#gac8966ec72bfbe215fbdca1a3983df2bf">exc_entry()</a>, and <a class="el" href="system__Device_8c_source.html#l00963">PLIC_Interrupt_Init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l01324">_premain_init()</a>.</p>

</div>
</div>
<a id="ga29f22384ffd27dae64af8672f6304781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga29f22384ffd27dae64af8672f6304781">&#9670;&nbsp;</a></span>irq_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_entry </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l00879">ECLIC_Interrupt_Init()</a>.</p>

</div>
</div>
<a id="ga2cf42fa93bc1fb47efbbbf361e395b6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cf42fa93bc1fb47efbbbf361e395b6e">&#9670;&nbsp;</a></span>irq_entry_s()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_entry_s </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>default entry for s-mode non-vector irq entry </p>

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l00879">ECLIC_Interrupt_Init()</a>.</p>

</div>
</div>
<a id="ga9bf05b8b9ade59d86f9c58eea665ca9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9bf05b8b9ade59d86f9c58eea665ca9c">&#9670;&nbsp;</a></span>PLIC_Interrupt_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PLIC_Interrupt_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do PLIC Interrupt configuration. </p>
<p>This function will initialize cpu interrupt mode to clint/plic mode. It will</p><ul>
<li>Initialize a software maintained SystemM/SExtInterruptHandlers and SystemCoreInterruptHandlers to default value</li>
<li>Set exception/interrupt entry to exc_entry, now interrupt and exception share the same entry point </li>
</ul>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00963">963</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;{</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="group__NMSIS__Core__SystemConfig.html#ga4de3e443b9a700e84bb1d1dcf3888ad3">CLINT_Interrupt_Init</a>();</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="preprocessor">#if defined(__PLIC_PRESENT) &amp;&amp; (__PLIC_PRESENT == 1)</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; __PLIC_INTNUM; i++) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#gad58cbb48427a6c0f09898275423fd879">SystemMExtInterruptHandlers</a>[i] = (<span class="keywordtype">unsigned</span> long)<a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#gaacfb9633cbb3f400d122719f659ece90">system_default_interrupt_handler</a>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="preprocessor">#if defined(__SMODE_PRESENT) &amp;&amp; (__SMODE_PRESENT == 1)</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga42392960aff1b758a3b4f8cc9bae9fd4">SystemSExtInterruptHandlers</a>[i] = (<span class="keywordtype">unsigned</span> long)<a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga10e7566ff2983240b81df158ebb1320d">system_default_interrupt_handler_s</a>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga2e19ce23836fd8027da0995ff69d41ca">SystemCoreInterruptHandlers</a>[9] = (<span class="keywordtype">unsigned</span> long)<a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga98c21b177b9d5e41203eec2e1dfaa7b9">system_mmode_extirq_handler</a>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga2e19ce23836fd8027da0995ff69d41ca">SystemCoreInterruptHandlers</a>[11] = (<span class="keywordtype">unsigned</span> long)<a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga98c21b177b9d5e41203eec2e1dfaa7b9">system_mmode_extirq_handler</a>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="preprocessor">#if defined(__SMODE_PRESENT) &amp;&amp; (__SMODE_PRESENT == 1)</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga0a584bbf77d7982e7dec7c3dcec2f627">SystemCoreInterruptHandlers_S</a>[9] = (<span class="keywordtype">unsigned</span> long)<a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga0db26f15b0169a337f304fd6826c862d">system_smode_extirq_handler</a>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga0a584bbf77d7982e7dec7c3dcec2f627">SystemCoreInterruptHandlers_S</a>[11] = (<span class="keywordtype">unsigned</span> long)<a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga0db26f15b0169a337f304fd6826c862d">system_smode_extirq_handler</a>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga0db26f15b0169a337f304fd6826c862d"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga0db26f15b0169a337f304fd6826c862d">system_smode_extirq_handler</a></div><div class="ttdeci">static void system_smode_extirq_handler(unsigned long exccode, unsigned long sp)</div><div class="ttdoc">S-Mode external interrupt handler common entry for plic interrupt mode.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00676">system_Device.c:676</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga42392960aff1b758a3b4f8cc9bae9fd4"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga42392960aff1b758a3b4f8cc9bae9fd4">SystemSExtInterruptHandlers</a></div><div class="ttdeci">static unsigned long SystemSExtInterruptHandlers[__PLIC_INTNUM]</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00283">system_Device.c:283</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga98c21b177b9d5e41203eec2e1dfaa7b9"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga98c21b177b9d5e41203eec2e1dfaa7b9">system_mmode_extirq_handler</a></div><div class="ttdeci">static void system_mmode_extirq_handler(unsigned long exccode, unsigned long sp)</div><div class="ttdoc">M-Mode external interrupt handler common entry for plic interrupt mode.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00446">system_Device.c:446</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_gad58cbb48427a6c0f09898275423fd879"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#gad58cbb48427a6c0f09898275423fd879">SystemMExtInterruptHandlers</a></div><div class="ttdeci">static unsigned long SystemMExtInterruptHandlers[__PLIC_INTNUM]</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00255">system_Device.c:255</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__SystemConfig_html_ga4de3e443b9a700e84bb1d1dcf3888ad3"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#ga4de3e443b9a700e84bb1d1dcf3888ad3">CLINT_Interrupt_Init</a></div><div class="ttdeci">void CLINT_Interrupt_Init(void)</div><div class="ttdoc">Do CLINT Interrupt configuration.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00935">system_Device.c:935</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="system__Device_8c_source.html#l00935">CLINT_Interrupt_Init()</a>, <a class="el" href="system__Device_8c_source.html#l00357">system_default_interrupt_handler()</a>, <a class="el" href="system__Device_8c_source.html#l00634">system_default_interrupt_handler_s()</a>, <a class="el" href="system__Device_8c_source.html#l00446">system_mmode_extirq_handler()</a>, <a class="el" href="system__Device_8c_source.html#l00676">system_smode_extirq_handler()</a>, <a class="el" href="system__Device_8c_source.html#l00262">SystemCoreInterruptHandlers</a>, <a class="el" href="system__Device_8c_source.html#l00281">SystemCoreInterruptHandlers_S</a>, <a class="el" href="system__Device_8c_source.html#l00255">SystemMExtInterruptHandlers</a>, and <a class="el" href="system__Device_8c_source.html#l00283">SystemSExtInterruptHandlers</a>.</p>

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l00997">Interrupt_Init()</a>.</p>

</div>
</div>
<a id="gaa6d9a05c4ea29dce5179b6d4e26bb9a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6d9a05c4ea29dce5179b6d4e26bb9a5">&#9670;&nbsp;</a></span>PLIC_Register_IRQ()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t PLIC_Register_IRQ </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a m-mode specific plic interrupt and register the handler. </p>
<p>This function set priority and handler for m-mode plic interrupt </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">source</td><td>interrupt source </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">priority</td><td>interrupt priority </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>interrupt handler, if NULL, handler will not be installed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 means invalid input parameter. 0 means successful. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>This function use to configure specific plic interrupt and register its interrupt handler and enable its interrupt.</li>
<li>You can only use it when you are in plic interrupt mode </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01143">1143</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;{</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">if</span> ((source &gt;= __PLIC_INTNUM)) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="comment">/* set interrupt priority */</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <a class="code" href="group__NMSIS__Core__IntPlic.html#ga6947b9d2e1ef61d54f5a09f8537a4c27">PLIC_SetPriority</a>(source, priority);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">if</span> (handler != NULL) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="comment">/* register interrupt handler entry to external handlers */</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga30e7aaf9f024f12fbe5db2eea18cce12">Interrupt_Register_ExtIRQ</a>(source, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)handler);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">/* enable interrupt */</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <a class="code" href="group__NMSIS__Core__IntPlic.html#ga13e823cd160a6105fa71fa78f31e520b">PLIC_EnableInterrupt</a>(source);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga2b540a739c0e8cec2f2b0349aaa2c8ee">__enable_ext_irq</a>();</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_ga2b540a739c0e8cec2f2b0349aaa2c8ee"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#ga2b540a739c0e8cec2f2b0349aaa2c8ee">__enable_ext_irq</a></div><div class="ttdeci">__STATIC_FORCEINLINE void __enable_ext_irq(void)</div><div class="ttdoc">Enable External IRQ Interrupts.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00816">core_feature_base.h:816</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga30e7aaf9f024f12fbe5db2eea18cce12"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga30e7aaf9f024f12fbe5db2eea18cce12">Interrupt_Register_ExtIRQ</a></div><div class="ttdeci">void Interrupt_Register_ExtIRQ(uint32_t irqn, unsigned long int_handler)</div><div class="ttdoc">Register a m-mode external interrupt handler for plic external interrupt number.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00502">system_Device.c:502</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntPlic_html_ga13e823cd160a6105fa71fa78f31e520b"><div class="ttname"><a href="group__NMSIS__Core__IntPlic.html#ga13e823cd160a6105fa71fa78f31e520b">PLIC_EnableInterrupt</a></div><div class="ttdeci">#define PLIC_EnableInterrupt(source)</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__plic_8h_source.html#l00377">core_feature_plic.h:377</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntPlic_html_ga6947b9d2e1ef61d54f5a09f8537a4c27"><div class="ttname"><a href="group__NMSIS__Core__IntPlic.html#ga6947b9d2e1ef61d54f5a09f8537a4c27">PLIC_SetPriority</a></div><div class="ttdeci">__STATIC_FORCEINLINE void PLIC_SetPriority(uint32_t source, uint32_t priority)</div><div class="ttdoc">Set interrupt priority for selected source plic.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__plic_8h_source.html#l00270">core_feature_plic.h:270</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__base_8h_source.html#l00816">__enable_ext_irq()</a>, <a class="el" href="system__Device_8c_source.html#l00502">Interrupt_Register_ExtIRQ()</a>, <a class="el" href="core__feature__plic_8h_source.html#l00377">PLIC_EnableInterrupt</a>, and <a class="el" href="core__feature__plic_8h_source.html#l00270">PLIC_SetPriority()</a>.</p>

</div>
</div>
<a id="gadec79146bddf812bc9c38bebdbf9dd6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadec79146bddf812bc9c38bebdbf9dd6d">&#9670;&nbsp;</a></span>PLIC_Register_IRQ_S()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t PLIC_Register_IRQ_S </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a s-mode specific plic interrupt and register the handler. </p>
<p>This function set priority and handler for s-mode plic interrupt </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">source</td><td>interrupt source </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">priority</td><td>interrupt priority </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>interrupt handler, if NULL, handler will not be installed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 means invalid input parameter. 0 means successful. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>This function use to configure specific plic interrupt and register its interrupt handler and enable its interrupt.</li>
<li>You can only use it when you are in plic interrupt mode </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01174">1174</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;{</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">if</span> ((source &gt;= __PLIC_INTNUM)) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    }</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="comment">/* set interrupt priority */</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <a class="code" href="group__NMSIS__Core__IntPlic.html#ga6947b9d2e1ef61d54f5a09f8537a4c27">PLIC_SetPriority</a>(source, priority);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">if</span> (handler != NULL) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="comment">/* register interrupt handler entry to external handlers */</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga9b53b91bc1634f2134a8b9c54b2088a1">Interrupt_Register_ExtIRQ_S</a>(source, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)handler);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">/* enable interrupt */</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <a class="code" href="group__NMSIS__Core__IntPlic.html#gaef90631814f83a8aa35e0f0407a15ad9">PLIC_EnableInterrupt_S</a>(source);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga11c7677eb827e32da6d94df6c61c8ae8">__enable_ext_irq_s</a>();</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;}</div>
<div class="ttc" id="agroup__NMSIS__Core__CSR__Register__Access_html_ga11c7677eb827e32da6d94df6c61c8ae8"><div class="ttname"><a href="group__NMSIS__Core__CSR__Register__Access.html#ga11c7677eb827e32da6d94df6c61c8ae8">__enable_ext_irq_s</a></div><div class="ttdeci">__STATIC_FORCEINLINE void __enable_ext_irq_s(void)</div><div class="ttdoc">Enable External IRQ Interrupts in supervisor mode.</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__base_8h_source.html#l00948">core_feature_base.h:948</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntExcNMI__Handling_html_ga9b53b91bc1634f2134a8b9c54b2088a1"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga9b53b91bc1634f2134a8b9c54b2088a1">Interrupt_Register_ExtIRQ_S</a></div><div class="ttdeci">void Interrupt_Register_ExtIRQ_S(uint32_t irqn, unsigned long int_handler)</div><div class="ttdoc">Register an s-mode external interrupt handler for plic external interrupt number.</div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00812">system_Device.c:812</a></div></div>
<div class="ttc" id="agroup__NMSIS__Core__IntPlic_html_gaef90631814f83a8aa35e0f0407a15ad9"><div class="ttname"><a href="group__NMSIS__Core__IntPlic.html#gaef90631814f83a8aa35e0f0407a15ad9">PLIC_EnableInterrupt_S</a></div><div class="ttdeci">#define PLIC_EnableInterrupt_S(source)</div><div class="ttdef"><b>Definition:</b> <a href="core__feature__plic_8h_source.html#l00378">core_feature_plic.h:378</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__base_8h_source.html#l00948">__enable_ext_irq_s()</a>, <a class="el" href="system__Device_8c_source.html#l00812">Interrupt_Register_ExtIRQ_S()</a>, <a class="el" href="core__feature__plic_8h_source.html#l00378">PLIC_EnableInterrupt_S</a>, and <a class="el" href="core__feature__plic_8h_source.html#l00270">PLIC_SetPriority()</a>.</p>

</div>
</div>
<a id="ga650b0aff4d3e3c20d326fbc558b6f90f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga650b0aff4d3e3c20d326fbc558b6f90f">&#9670;&nbsp;</a></span>SystemBannerPrint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemBannerPrint </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Banner Print for Nuclei SDK. </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00847">847</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;{</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="preprocessor">#if defined(NUCLEI_BANNER) &amp;&amp; (NUCLEI_BANNER == 1)</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    NSDK_DEBUG(<span class="stringliteral">&quot;Nuclei SDK Build Time: %s, %s\r\n&quot;</span>, __DATE__, __TIME__);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="preprocessor">#ifdef DOWNLOAD_MODE_STRING</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    NSDK_DEBUG(<span class="stringliteral">&quot;Download Mode: %s\r\n&quot;</span>, DOWNLOAD_MODE_STRING);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    NSDK_DEBUG(<span class="stringliteral">&quot;CPU Frequency %u Hz\r\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">SystemCoreClock</a>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    NSDK_DEBUG(<span class="stringliteral">&quot;CPU HartID: %u\r\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="group__NMSIS__Core__CSR__Register__Access.html#ga578d4ba2532485995190134b2beb03ff">__get_hart_id</a>());</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="core__feature__base_8h_source.html#l01250">__get_hart_id()</a>, and <a class="el" href="system__Device_8c_source.html#l00184">SystemCoreClock</a>.</p>

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l01324">_premain_init()</a>.</p>

</div>
</div>
<a id="gae0c36a9591fe6e9c45ecb21a794f0f0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae0c36a9591fe6e9c45ecb21a794f0f0f">&#9670;&nbsp;</a></span>SystemCoreClockUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemCoreClockUpdate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to update the variable <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">SystemCoreClock</a>. </p>
<p>Updates the variable <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">SystemCoreClock</a> and must be called whenever the core clock is changed during program execution. The function evaluates the clock register settings and calculates the current core clock. </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00197">197</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">/* ToDo: add code to calculate the system frequency based upon the current</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">     *    register settings.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">     * Note: This function can be used to retrieve the system core clock frequeny</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">     *    after user changed register settings.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga93f514700ccf00d08dbdcff7f1224eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga93f514700ccf00d08dbdcff7f1224eb2">&#9670;&nbsp;</a></span>SystemInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to Initialize the system. </p>
<p>Initializes the microcontroller system. Typically, this function configures the oscillator (PLL) that is part of the microcontroller device. For systems with a variable clock speed, it updates the variable <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga0814e683179ebb031663c192f7e9b579">SystemCoreClock</a>. SystemInit is called from the file <b>startup<em>_device</em></b>. </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00214">214</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">/* ToDo: add code to initialize the system</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">     * Warn: do not use global variables because this function is called before</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">     * reaching pre-main. RW section maybe overwritten afterwards.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gae464e755c44ec870768275d44f77dc54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae464e755c44ec870768275d44f77dc54">&#9670;&nbsp;</a></span>Trap_Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void Trap_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>do the init for trap </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01312">1312</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;{</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga848c9baf0a0e46da60d0874fa9f0796e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga848c9baf0a0e46da60d0874fa9f0796e">&#9670;&nbsp;</a></span>CpuIRegionBase</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile unsigned long CpuIRegionBase = 0xFFFFFFFF</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Nuclei RISC-V CPU IRegion Base Address Probed, you should avoid to use it in your application code, please use __IREGION_BASEADDR if you want. </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l01241">1241</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l01324">_premain_init()</a>.</p>

</div>
</div>
<a id="ga0814e683179ebb031663c192f7e9b579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0814e683179ebb031663c192f7e9b579">&#9670;&nbsp;</a></span>SystemCoreClock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint32_t SystemCoreClock = SYSTEM_CLOCK</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variable to hold the system core clock value. </p>
<p>Holds the system core clock, which is the system clock frequency supplied to the SysTick timer and the processor core clock. This variable can be used by debuggers to query the frequency of the debug timer or to configure the trace clock speed.</p>
<dl class="section attention"><dt>Attention</dt><dd>Compilers must be configured to avoid removing this variable in case the application program is not using it. Debugging systems require the variable to be physically present in memory so that it can be examined to configure the debugger. </dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00184">184</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l01324">_premain_init()</a>, and <a class="el" href="system__Device_8c_source.html#l00847">SystemBannerPrint()</a>.</p>

</div>
</div>
<a id="ga15c4e6e47d949b4b3930b8b5adad2e89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga15c4e6e47d949b4b3930b8b5adad2e89">&#9670;&nbsp;</a></span>vector_base</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long vector_base[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="system__Device_8c_source.html#l00879">ECLIC_Interrupt_Init()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 14 2025 04:08:27 for NMSIS-Core by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
