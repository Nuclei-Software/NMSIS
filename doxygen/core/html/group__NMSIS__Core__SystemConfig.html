<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NMSIS-Core: System Device Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nmsis_logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NMSIS-Core
   &#160;<span id="projectnumber">Version 1.0.1</span>
   </div>
   <div id="projectbrief">NMSIS-Core support for Nuclei processor-based devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__NMSIS__Core__SystemConfig.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">System Device Configuration</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for system init, clock setup and interrupt/exception/nmi functions available in system_&lt;device&gt;.c.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__NMSIS__Core__IntExcNMI__Handling"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__IntExcNMI__Handling.html">Interrupt and Exception and NMI Handling</a></td></tr>
<tr class="memdesc:group__NMSIS__Core__IntExcNMI__Handling"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions for interrupt, exception and nmi handle available in system_&lt;device&gt;.c. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae0c36a9591fe6e9c45ecb21a794f0f0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gae0c36a9591fe6e9c45ecb21a794f0f0f">SystemCoreClockUpdate</a> (void)</td></tr>
<tr class="memdesc:gae0c36a9591fe6e9c45ecb21a794f0f0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to update the variable <a class="el" href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a>.  <a href="#gae0c36a9591fe6e9c45ecb21a794f0f0f">More...</a><br /></td></tr>
<tr class="separator:gae0c36a9591fe6e9c45ecb21a794f0f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93f514700ccf00d08dbdcff7f1224eb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga93f514700ccf00d08dbdcff7f1224eb2">SystemInit</a> (void)</td></tr>
<tr class="memdesc:ga93f514700ccf00d08dbdcff7f1224eb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to Initialize the system.  <a href="#ga93f514700ccf00d08dbdcff7f1224eb2">More...</a><br /></td></tr>
<tr class="separator:ga93f514700ccf00d08dbdcff7f1224eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad13ba247efe59bbe2b6004d9bd0f10db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gad13ba247efe59bbe2b6004d9bd0f10db">_premain_init</a> (void)</td></tr>
<tr class="memdesc:gad13ba247efe59bbe2b6004d9bd0f10db"><td class="mdescLeft">&#160;</td><td class="mdescRight">early init function before main  <a href="#gad13ba247efe59bbe2b6004d9bd0f10db">More...</a><br /></td></tr>
<tr class="separator:gad13ba247efe59bbe2b6004d9bd0f10db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6eb76a75cf67b543443efc82ecf33713"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga6eb76a75cf67b543443efc82ecf33713">_postmain_fini</a> (int status)</td></tr>
<tr class="memdesc:ga6eb76a75cf67b543443efc82ecf33713"><td class="mdescLeft">&#160;</td><td class="mdescRight">finish function after main  <a href="#ga6eb76a75cf67b543443efc82ecf33713">More...</a><br /></td></tr>
<tr class="separator:ga6eb76a75cf67b543443efc82ecf33713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1cbc4315ef293463e6057dfb24c8115"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gad1cbc4315ef293463e6057dfb24c8115">_init</a> (void)</td></tr>
<tr class="memdesc:gad1cbc4315ef293463e6057dfb24c8115"><td class="mdescLeft">&#160;</td><td class="mdescRight">_init function called in __libc_init_array()  <a href="#gad1cbc4315ef293463e6057dfb24c8115">More...</a><br /></td></tr>
<tr class="separator:gad1cbc4315ef293463e6057dfb24c8115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga173a20f19acf36985bbac6786a02b544"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga173a20f19acf36985bbac6786a02b544">_fini</a> (void)</td></tr>
<tr class="memdesc:ga173a20f19acf36985bbac6786a02b544"><td class="mdescLeft">&#160;</td><td class="mdescRight">_fini function called in __libc_fini_array()  <a href="#ga173a20f19acf36985bbac6786a02b544">More...</a><br /></td></tr>
<tr class="separator:ga173a20f19acf36985bbac6786a02b544"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaa3cd3e43291e81e795d642b79b6088e6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a> = SYSTEM_CLOCK</td></tr>
<tr class="memdesc:gaa3cd3e43291e81e795d642b79b6088e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable to hold the system core clock value.  <a href="#gaa3cd3e43291e81e795d642b79b6088e6">More...</a><br /></td></tr>
<tr class="separator:gaa3cd3e43291e81e795d642b79b6088e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for system init, clock setup and interrupt/exception/nmi functions available in system_&lt;device&gt;.c. </p>
<p>Nuclei provides a template file <b><a class="el" href="system__Device_8c_source.html">system_Device.c</a></b> that must be adapted by the silicon vendor to match their actual device. As a <b>minimum requirement</b>, this file must provide:</p><ul>
<li>A device-specific system configuration function, <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga93f514700ccf00d08dbdcff7f1224eb2">SystemInit</a>.</li>
<li>A global variable that contains the system frequency, <a class="el" href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a>.</li>
<li>A global eclic configuration initialization, <a class="el" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga2d2e27f47287f5d28cc26f2cb214337f">ECLIC_Init</a>.</li>
<li>Global c library <a class="el" href="group__NMSIS__Core__SystemConfig.html#gad1cbc4315ef293463e6057dfb24c8115">_init</a> and <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga173a20f19acf36985bbac6786a02b544">_fini</a> functions called right before calling main function.</li>
<li>Vendor customized interrupt, exception and nmi handling code, see <a class="el" href="group__NMSIS__Core__IntExcNMI__Handling.html">Interrupt and Exception and NMI Handling</a></li>
</ul>
<p>The file configures the device and, typically, initializes the oscillator (PLL) that is part of the microcontroller device. This file might export other functions or variables that provide a more flexible configuration of the microcontroller system.</p>
<p>And this file also provided common interrupt, exception and NMI exception handling framework template, Silicon vendor can customize these template code as they want.</p>
<dl class="section note"><dt>Note</dt><dd>Please pay special attention to the static variable <code>SystemCoreClock</code>. This variable might be used throughout the whole system initialization and runtime to calculate frequency/time related values. Thus one must assure that the variable always reflects the actual system clock speed.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Be aware that a value stored to <code>SystemCoreClock</code> during low level initialization (i.e. <code><a class="el" href="group__NMSIS__Core__SystemConfig.html#ga93f514700ccf00d08dbdcff7f1224eb2" title="Function to Initialize the system. ">SystemInit()</a></code>) might get overwritten by C libray startup code and/or .bss section initialization. Thus its highly recommended to call <a class="el" href="group__NMSIS__Core__SystemConfig.html#gae0c36a9591fe6e9c45ecb21a794f0f0f">SystemCoreClockUpdate</a> at the beginning of the user <code>main()</code> routine. </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga173a20f19acf36985bbac6786a02b544"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga173a20f19acf36985bbac6786a02b544">&#9670;&nbsp;</a></span>_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _fini </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>_fini function called in __libc_fini_array() </p>
<p>This <code>__libc_fini_array()</code> function is called when exit main. user need to implement this function, otherwise when link it will error fini.c:(.text.__libc_fini_array+0x28): undefined reference to `_fini' </p><dl class="section note"><dt>Note</dt><dd>Please use <a class="el" href="group__NMSIS__Core__SystemConfig.html#ga6eb76a75cf67b543443efc82ecf33713">_postmain_fini</a> function now </dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00406">406</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;{</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">/* Don&#39;t put any code here, please use _postmain_fini now */</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="gad1cbc4315ef293463e6057dfb24c8115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1cbc4315ef293463e6057dfb24c8115">&#9670;&nbsp;</a></span>_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>_init function called in __libc_init_array() </p>
<p>This <code>__libc_init_array()</code> function is called during startup code, user need to implement this function, otherwise when link it will error init.c:(.text.__libc_init_array+0x26): undefined reference to `_init' </p><dl class="section note"><dt>Note</dt><dd>Please use <a class="el" href="group__NMSIS__Core__SystemConfig.html#gad13ba247efe59bbe2b6004d9bd0f10db">_premain_init</a> function now </dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00392">392</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">/* Don&#39;t put any code here, please use _premain_init now */</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ga6eb76a75cf67b543443efc82ecf33713"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6eb76a75cf67b543443efc82ecf33713">&#9670;&nbsp;</a></span>_postmain_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _postmain_fini </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>finish function after main </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>status code return from main</td></tr>
  </table>
  </dd>
</dl>
<p>This function is executed right after main function. For RISC-V gnu toolchain, _fini function might not be called by __libc_fini_array function, so we defined a new function to do initialization </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00378">378</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;{</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">/* TODO: Add your own finishing code here, called after main */</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="gad13ba247efe59bbe2b6004d9bd0f10db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad13ba247efe59bbe2b6004d9bd0f10db">&#9670;&nbsp;</a></span>_premain_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _premain_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>early init function before main </p>
<p>This function is executed right before main function. For RISC-V gnu toolchain, _init function might not be called by __libc_init_array function, so we defined a new function to do initialization </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00349">349</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;{</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">/* TODO: Add your own initialization code here, called before main  */</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">/* __ICACHE_PRESENT and __DCACHE_PRESENT are defined in &lt;Device&gt;.h */</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="preprocessor">#if defined(__ICACHE_PRESENT) &amp;&amp; __ICACHE_PRESENT == 1</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="group__NMSIS__Core__ICache.html#ga76dfd7aff65a6a7fa91b53dbe44f9ce5">EnableICache</a>();</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#if defined(__DCACHE_PRESENT) &amp;&amp; __DCACHE_PRESENT == 1</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="group__NMSIS__Core__DCache.html#gaf90783ed69b3589cde6fe7dbabeb17c0">EnableDCache</a>();</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// TODO: Add code to set the system clock frequency value SystemCoreClock</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// TODO: Add code to initialize necessary gpio and basic uart for debug print</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">/* Initialize exception default handlers */</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#gab6afbaed495af51eeeb4eb7d1c5da420">Exception_Init</a>();</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">/* ECLIC initialization, mainly MTH and NLBIT settings */</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="group__NMSIS__Core__IntExcNMI__Handling.html#ga2d2e27f47287f5d28cc26f2cb214337f">ECLIC_Init</a>();</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__DCache_html_gaf90783ed69b3589cde6fe7dbabeb17c0"><div class="ttname"><a href="group__NMSIS__Core__DCache.html#gaf90783ed69b3589cde6fe7dbabeb17c0">EnableDCache</a></div><div class="ttdeci">__STATIC_FORCEINLINE void EnableDCache(void)</div><div class="ttdoc">Enable DCache. </div><div class="ttdef"><b>Definition:</b> <a href="core__feature__cache_8h_source.html#l00597">core_feature_cache.h:597</a></div></div>
<div class="ttc" id="group__NMSIS__Core__IntExcNMI__Handling_html_ga2d2e27f47287f5d28cc26f2cb214337f"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#ga2d2e27f47287f5d28cc26f2cb214337f">ECLIC_Init</a></div><div class="ttdeci">void ECLIC_Init(void)</div><div class="ttdoc">Initialize Global ECLIC Config. </div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00288">system_Device.c:288</a></div></div>
<div class="ttc" id="group__NMSIS__Core__ICache_html_ga76dfd7aff65a6a7fa91b53dbe44f9ce5"><div class="ttname"><a href="group__NMSIS__Core__ICache.html#ga76dfd7aff65a6a7fa91b53dbe44f9ce5">EnableICache</a></div><div class="ttdeci">__STATIC_FORCEINLINE void EnableICache(void)</div><div class="ttdoc">Enable ICache. </div><div class="ttdef"><b>Definition:</b> <a href="core__feature__cache_8h_source.html#l00161">core_feature_cache.h:161</a></div></div>
<div class="ttc" id="group__NMSIS__Core__IntExcNMI__Handling_html_gab6afbaed495af51eeeb4eb7d1c5da420"><div class="ttname"><a href="group__NMSIS__Core__IntExcNMI__Handling.html#gab6afbaed495af51eeeb4eb7d1c5da420">Exception_Init</a></div><div class="ttdeci">static void Exception_Init(void)</div><div class="ttdoc">Initialize all the default core exception handlers. </div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00184">system_Device.c:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae0c36a9591fe6e9c45ecb21a794f0f0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae0c36a9591fe6e9c45ecb21a794f0f0f">&#9670;&nbsp;</a></span>SystemCoreClockUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemCoreClockUpdate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to update the variable <a class="el" href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a>. </p>
<p>Updates the variable <a class="el" href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a> and must be called whenever the core clock is changed during program execution. The function evaluates the clock register settings and calculates the current core clock. </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00103">103</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">/* TODO: add code to calculate the system frequency based upon the current</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">     *    register settings.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">     * Note: This function can be used to retrieve the system core clock frequeny</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">     *    after user changed register settings.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a> = SYSTEM_CLOCK;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__SystemConfig_html_gaa3cd3e43291e81e795d642b79b6088e6"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a></div><div class="ttdeci">uint32_t SystemCoreClock</div><div class="ttdoc">Variable to hold the system core clock value. </div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00089">system_Device.c:89</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga93f514700ccf00d08dbdcff7f1224eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga93f514700ccf00d08dbdcff7f1224eb2">&#9670;&nbsp;</a></span>SystemInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to Initialize the system. </p>
<p>Initializes the microcontroller system. Typically, this function configures the oscillator (PLL) that is part of the microcontroller device. For systems with a variable clock speed, it updates the variable <a class="el" href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a>. SystemInit is called from the file <b>startup<em>_device</em></b>. </p>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00121">121</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">/* TODO: add code to initialize the system</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">     * Warn: do not use global variables because this function is called before</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">     * reaching pre-main. RW section maybe overwritten afterwards.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a> = SYSTEM_CLOCK;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="ttc" id="group__NMSIS__Core__SystemConfig_html_gaa3cd3e43291e81e795d642b79b6088e6"><div class="ttname"><a href="group__NMSIS__Core__SystemConfig.html#gaa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a></div><div class="ttdeci">uint32_t SystemCoreClock</div><div class="ttdoc">Variable to hold the system core clock value. </div><div class="ttdef"><b>Definition:</b> <a href="system__Device_8c_source.html#l00089">system_Device.c:89</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gaa3cd3e43291e81e795d642b79b6088e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa3cd3e43291e81e795d642b79b6088e6">&#9670;&nbsp;</a></span>SystemCoreClock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t SystemCoreClock = SYSTEM_CLOCK</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variable to hold the system core clock value. </p>
<p>Holds the system core clock, which is the system clock frequency supplied to the SysTick timer and the processor core clock. This variable can be used by debuggers to query the frequency of the debug timer or to configure the trace clock speed.</p>
<dl class="section attention"><dt>Attention</dt><dd>Compilers must be configured to avoid removing this variable in case the application program is not using it. Debugging systems require the variable to be physically present in memory so that it can be examined to configure the debugger. </dd></dl>

<p class="definition">Definition at line <a class="el" href="system__Device_8c_source.html#l00089">89</a> of file <a class="el" href="system__Device_8c_source.html">system_Device.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Aug 3 2021 10:26:10 for NMSIS-Core by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
