<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Complex FFT Functions &mdash; NMSIS 1.3.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Complex FFT Tables" href="complexfft/api_cfft_cifft.html" />
    <link rel="prev" title="Transform Functions" href="../api_grouptransforms.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/nmsis_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.3.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introduction.html">Nuclei MCU Software Interface Standard(NMSIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/index.html">NMSIS Core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">NMSIS DSP</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get_started.html">Using NMSIS-DSP</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">NMSIS DSP API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../api_groupmath.html">Basic Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupbayes.html">Bayesian estimators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupcmplxmath.html">Complex Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupcontroller.html">Controller Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupdistance.html">Distance functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupfastmath.html">Fast Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupfilters.html">Filtering Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupinterpolation.html">Interpolation Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupmatrix.html">Matrix Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupquaternionmath.html">Quaternion Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupstats.html">Statistics Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupsupport.html">Support Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupsvm.html">SVM Functions</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../api_grouptransforms.html">Transform Functions</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Complex FFT Functions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="complexfft/api_cfft_cifft.html">Complex FFT Tables</a></li>
<li class="toctree-l5"><a class="reference internal" href="complexfft/api_complexfftf16.html">Complex FFT F16</a></li>
<li class="toctree-l5"><a class="reference internal" href="complexfft/api_complexfftf32.html">Complex FFT F32</a></li>
<li class="toctree-l5"><a class="reference internal" href="complexfft/api_complexfftf64.html">Complex FFT F64</a></li>
<li class="toctree-l5"><a class="reference internal" href="complexfft/api_complexfftq15.html">Complex FFT Q15</a></li>
<li class="toctree-l5"><a class="reference internal" href="complexfft/api_complexfftq31.html">Complex FFT Q31</a></li>
<li class="toctree-l5"><a class="reference internal" href="complexfft/api_complexfftdeprecated.html">Deprecated Complex FFT functions</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="api_dct4_idct4.html">DCT Type IV Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_mfcc.html">MFCC</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_realfft.html">Real FFT Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupwindow.html">Window Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupexamples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../nn/index.html">NMSIS NN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NMSIS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">NMSIS DSP</a> &raquo;</li>
          <li><a href="../index.html">NMSIS DSP API</a> &raquo;</li>
          <li><a href="../api_grouptransforms.html">Transform Functions</a> &raquo;</li>
      <li>Complex FFT Functions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/dsp/api/grouptransforms/api_complexfft.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="complex-fft-functions">
<span id="nmsis-dsp-api-complex-fft-functions"></span><h1>Complex FFT Functions<a class="headerlink" href="#complex-fft-functions" title="Permalink to this headline">ÔÉÅ</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="complexfft/api_cfft_cifft.html">Complex FFT Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="complexfft/api_complexfftf16.html">Complex FFT F16</a></li>
<li class="toctree-l1"><a class="reference internal" href="complexfft/api_complexfftf32.html">Complex FFT F32</a></li>
<li class="toctree-l1"><a class="reference internal" href="complexfft/api_complexfftf64.html">Complex FFT F64</a></li>
<li class="toctree-l1"><a class="reference internal" href="complexfft/api_complexfftq15.html">Complex FFT Q15</a></li>
<li class="toctree-l1"><a class="reference internal" href="complexfft/api_complexfftq31.html">Complex FFT Q31</a></li>
<li class="toctree-l1"><a class="reference internal" href="complexfft/api_complexfftdeprecated.html">Deprecated Complex FFT functions</a></li>
</ul>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__ComplexFFT"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">ComplexFFT</span></span></dt>
<dd><p><dl class="simple">
<dt><strong></strong></dt><dd><p>The Fast Fourier Transform (FFT) is an efficient algorithm for computing the Discrete Fourier Transform (DFT). The FFT can be orders of magnitude faster than the DFT, especially for long lengths. The algorithms described in this section operate on complex data. A separate set of functions is devoted to handling of real sequences. </p>
</dd>
<dt><strong></strong></dt><dd><p>There are separate algorithms for handling floating-point, Q15, and Q31 data types. The algorithms available for each data type are described next. </p>
</dd>
<dt><strong></strong></dt><dd><p>The FFT functions operate in-place. That is, the array holding the input data will also be used to hold the corresponding result. The input data is complex and contains <code class="docutils literal notranslate"><span class="pre">2*fftLen</span></code> interleaved values as shown below.  The FFT result will be contained in the same array and the frequency domain values will have the same interleaving.</p>
</dd>
<dt><strong>Floating-point</strong></dt><dd><p>The floating-point complex FFT uses a mixed-radix algorithm. Multiple radix-8 stages are performed along with a single radix-2 or radix-4 stage, as needed. The algorithm supports lengths of [16, 32, 64, ‚Ä¶, 4096] and each length uses a different twiddle factor table. </p>
</dd>
<dt><strong></strong></dt><dd><p>The function uses the standard FFT definition and output values may grow by a factor of <code class="docutils literal notranslate"><span class="pre">fftLen</span></code> when computing the forward transform. The inverse transform includes a scale of <code class="docutils literal notranslate"><span class="pre">1/fftLen</span></code> as part of the calculation and this matches the textbook definition of the inverse FFT. </p>
</dd>
<dt><strong></strong></dt><dd><p>For the MVE version, the new riscv_cfft_init_f32 initialization function is <strong>mandatory</strong>. <strong>Compilation flags are available to include only the required tables for the needed FFTs.</strong> Other FFT versions can continue to be initialized as explained below. </p>
</dd>
<dt><strong></strong></dt><dd><p>For not MVE versions, pre-initialized data structures containing twiddle factors and bit reversal tables are provided and defined in <code class="docutils literal notranslate"><span class="pre">riscv_const_structs.h</span></code>. Include this header in your function and then pass one of the constant structures as an argument to riscv_cfft_f32. For example: </p>
</dd>
<dt><strong></strong></dt><dd><p><code class="docutils literal notranslate"><span class="pre">riscv_cfft_f32(riscv_cfft_sR_f32_len64,</span> <span class="pre">pSrc,</span> <span class="pre">1,</span> <span class="pre">1)</span></code> </p>
</dd>
<dt><strong></strong></dt><dd><p>computes a 64-point inverse complex FFT including bit reversal. The data structures are treated as constant data and not modified during the calculation. The same data structure can be reused for multiple transforms including mixing forward and inverse transforms. </p>
</dd>
<dt><strong></strong></dt><dd><p>Earlier releases of the library provided separate radix-2 and radix-4 algorithms that operated on floating-point data. These functions are still provided but are deprecated. The older functions are slower and less general than the new functions. </p>
</dd>
<dt><strong></strong></dt><dd><p>An example of initialization of the constants for the riscv_cfft_f32 function follows: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">static</span> <span class="n">riscv_cfft_instance_f32</span> <span class="o">*</span><span class="n">S</span><span class="p">;</span>
<span class="o">...</span>
<span class="n">switch</span> <span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">case</span> <span class="mi">16</span><span class="p">:</span>
    <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_f32_len16</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">32</span><span class="p">:</span>
    <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_f32_len32</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">64</span><span class="p">:</span>
    <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_f32_len64</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">128</span><span class="p">:</span>
    <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_f32_len128</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">256</span><span class="p">:</span>
    <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_f32_len256</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">512</span><span class="p">:</span>
    <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_f32_len512</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">1024</span><span class="p">:</span>
    <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_f32_len1024</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">2048</span><span class="p">:</span>
    <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_f32_len2048</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="n">case</span> <span class="mi">4096</span><span class="p">:</span>
    <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_f32_len4096</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</dd>
<dt><strong></strong></dt><dd><p>The new riscv_cfft_init_f32 can also be used. </p>
</dd>
<dt><strong>Q15 and Q31</strong></dt><dd><p>The floating-point complex FFT uses a mixed-radix algorithm. Multiple radix-4 stages are performed along with a single radix-2 stage, as needed. The algorithm supports lengths of [16, 32, 64, ‚Ä¶, 4096] and each length uses a different twiddle factor table. </p>
</dd>
<dt><strong></strong></dt><dd><p>The function uses the standard FFT definition and output values may grow by a factor of <code class="docutils literal notranslate"><span class="pre">fftLen</span></code> when computing the forward transform. The inverse transform includes a scale of <code class="docutils literal notranslate"><span class="pre">1/fftLen</span></code> as part of the calculation and this matches the textbook definition of the inverse FFT. </p>
</dd>
<dt><strong></strong></dt><dd><p>Pre-initialized data structures containing twiddle factors and bit reversal tables are provided and defined in <code class="docutils literal notranslate"><span class="pre">riscv_const_structs.h</span></code>. Include this header in your function and then pass one of the constant structures as an argument to riscv_cfft_q31. For example: </p>
</dd>
<dt><strong></strong></dt><dd><p><code class="docutils literal notranslate"><span class="pre">riscv_cfft_q31(riscv_cfft_sR_q31_len64,</span> <span class="pre">pSrc,</span> <span class="pre">1,</span> <span class="pre">1)</span></code> </p>
</dd>
<dt><strong></strong></dt><dd><p>computes a 64-point inverse complex FFT including bit reversal. The data structures are treated as constant data and not modified during the calculation. The same data structure can be reused for multiple transforms including mixing forward and inverse transforms. </p>
</dd>
<dt><strong></strong></dt><dd><p>Earlier releases of the library provided separate radix-2 and radix-4 algorithms that operated on floating-point data. These functions are still provided but are deprecated. The older functions are slower and less general than the new functions. </p>
</dd>
<dt><strong></strong></dt><dd><p>An example of initialization of the constants for the riscv_cfft_q31 function follows: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">static</span> <span class="n">riscv_cfft_instance_q31</span> <span class="o">*</span><span class="n">S</span><span class="p">;</span>
<span class="o">...</span>
  <span class="n">switch</span> <span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">case</span> <span class="mi">16</span><span class="p">:</span>
      <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_q31_len16</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="n">case</span> <span class="mi">32</span><span class="p">:</span>
      <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_q31_len32</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="n">case</span> <span class="mi">64</span><span class="p">:</span>
      <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_q31_len64</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="n">case</span> <span class="mi">128</span><span class="p">:</span>
      <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_q31_len128</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="n">case</span> <span class="mi">256</span><span class="p">:</span>
      <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_q31_len256</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="n">case</span> <span class="mi">512</span><span class="p">:</span>
      <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_q31_len512</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="n">case</span> <span class="mi">1024</span><span class="p">:</span>
      <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_q31_len1024</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="n">case</span> <span class="mi">2048</span><span class="p">:</span>
      <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_q31_len2048</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="n">case</span> <span class="mi">4096</span><span class="p">:</span>
      <span class="n">S</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">riscv_cfft_sR_q31_len4096</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
</div>
 </p>
</dd>
</dl>
</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../api_grouptransforms.html" class="btn btn-neutral float-left" title="Transform Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="complexfft/api_cfft_cifft.html" class="btn btn-neutral float-right" title="Complex FFT Tables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-Present, Nuclei.
      <span class="lastupdated">Last updated on Nov 11, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>