<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PID Motor Control &mdash; NMSIS 1.1.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Vector Park Transform" href="api_park.html" />
    <link rel="prev" title="Sine Cosine" href="api_sincos.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/nmsis_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introduction.html">Nuclei MCU Software Interface Standard(NMSIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/index.html">NMSIS Core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">NMSIS DSP</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get_started.html">Using NMSIS-DSP</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">NMSIS DSP API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../api_groupmath.html">Basic Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupbayes.html">Bayesian estimators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupcmplxmath.html">Complex Math Functions</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../api_groupcontroller.html">Controller Functions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="api_sincos.html">Sine Cosine</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">PID Motor Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_park.html">Vector Park Transform</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_inv_park.html">Vector Inverse Park transform</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_clarke.html">Vector Clarke Transform</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_inv_clarke.html">Vector Inverse Clarke Transform</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupdistance.html">Distance functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupfastmath.html">Fast Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupfilters.html">Filtering Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupinterpolation.html">Interpolation Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupmatrix.html">Matrix Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupquaternionmath.html">Quaternion Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupstats.html">Statistics Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupsupport.html">Support Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupsvm.html">SVM Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_grouptransforms.html">Transform Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupwindow.html">Window Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupexamples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../nn/index.html">NMSIS NN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NMSIS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">NMSIS DSP</a> &raquo;</li>
          <li><a href="../index.html">NMSIS DSP API</a> &raquo;</li>
          <li><a href="../api_groupcontroller.html">Controller Functions</a> &raquo;</li>
      <li>PID Motor Control</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/dsp/api/groupcontroller/api_pid.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pid-motor-control">
<span id="nmsis-dsp-api-pid-motor-control"></span><h1>PID Motor Control<a class="headerlink" href="#pid-motor-control" title="Permalink to this headline"></a></h1>
<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1gabafba8b6028791a8df9336fda2d89eb4"></span><span class="sig-name descname"><span class="pre">__STATIC_FORCEINLINE</span> <span class="pre">float32_t</span> <span class="pre">riscv_pid_f32</span> <span class="pre">(riscv_pid_instance_f32</span> <span class="pre">*S,</span> <span class="pre">float32_t</span> <span class="pre">in)</span></span></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1ga107785522e399b35e5ba5b9181d57726"></span><span class="sig-name descname"><span class="pre">__STATIC_FORCEINLINE</span> <span class="pre">q31_t</span> <span class="pre">riscv_pid_q31</span> <span class="pre">(riscv_pid_instance_q31</span> <span class="pre">*S,</span> <span class="pre">q31_t</span> <span class="pre">in)</span></span></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1gaf1220917c29e049f8127ca8808bd703f"></span><span class="sig-name descname"><span class="pre">__STATIC_FORCEINLINE</span> <span class="pre">q15_t</span> <span class="pre">riscv_pid_q15</span> <span class="pre">(riscv_pid_instance_q15</span> <span class="pre">*S,</span> <span class="pre">q15_t</span> <span class="pre">in)</span></span></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418riscv_pid_init_f32P22riscv_pid_instance_f327int32_t">
<span id="_CPPv318riscv_pid_init_f32P22riscv_pid_instance_f327int32_t"></span><span id="_CPPv218riscv_pid_init_f32P22riscv_pid_instance_f327int32_t"></span><span id="riscv_pid_init_f32__riscv_pid_instance_f32P.int32_t"></span><span class="target" id="group__PID_1ga88096786fde77479ae2fc7f0b4a060b1"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_init_f32</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_f32" title="riscv_pid_instance_f32"><span class="n"><span class="pre">riscv_pid_instance_f32</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">resetStateFlag</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418riscv_pid_init_f32P22riscv_pid_instance_f327int32_t" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418riscv_pid_init_q15P22riscv_pid_instance_q157int32_t">
<span id="_CPPv318riscv_pid_init_q15P22riscv_pid_instance_q157int32_t"></span><span id="_CPPv218riscv_pid_init_q15P22riscv_pid_instance_q157int32_t"></span><span id="riscv_pid_init_q15__riscv_pid_instance_q15P.int32_t"></span><span class="target" id="group__PID_1ga3addd5e4ea6d8aeaf4f1ecd7cf5c6c01"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_init_q15</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_q15" title="riscv_pid_instance_q15"><span class="n"><span class="pre">riscv_pid_instance_q15</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">resetStateFlag</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418riscv_pid_init_q15P22riscv_pid_instance_q157int32_t" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv418riscv_pid_init_q31P22riscv_pid_instance_q317int32_t">
<span id="_CPPv318riscv_pid_init_q31P22riscv_pid_instance_q317int32_t"></span><span id="_CPPv218riscv_pid_init_q31P22riscv_pid_instance_q317int32_t"></span><span id="riscv_pid_init_q31__riscv_pid_instance_q31P.int32_t"></span><span class="target" id="group__PID_1ga2ca8b149095d04d8dc73e4a052be1c8c"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_init_q31</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_q31" title="riscv_pid_instance_q31"><span class="n"><span class="pre">riscv_pid_instance_q31</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">resetStateFlag</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418riscv_pid_init_q31P22riscv_pid_instance_q317int32_t" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419riscv_pid_reset_f32P22riscv_pid_instance_f32">
<span id="_CPPv319riscv_pid_reset_f32P22riscv_pid_instance_f32"></span><span id="_CPPv219riscv_pid_reset_f32P22riscv_pid_instance_f32"></span><span id="riscv_pid_reset_f32__riscv_pid_instance_f32P"></span><span class="target" id="group__PID_1ga436fc2266fe54087bc8b203eb675087c"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_reset_f32</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_f32" title="riscv_pid_instance_f32"><span class="n"><span class="pre">riscv_pid_instance_f32</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419riscv_pid_reset_f32P22riscv_pid_instance_f32" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419riscv_pid_reset_q15P22riscv_pid_instance_q15">
<span id="_CPPv319riscv_pid_reset_q15P22riscv_pid_instance_q15"></span><span id="_CPPv219riscv_pid_reset_q15P22riscv_pid_instance_q15"></span><span id="riscv_pid_reset_q15__riscv_pid_instance_q15P"></span><span class="target" id="group__PID_1gaf85e1dc20d915a787ce687e1a80f2bdc"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_reset_q15</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_q15" title="riscv_pid_instance_q15"><span class="n"><span class="pre">riscv_pid_instance_q15</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419riscv_pid_reset_q15P22riscv_pid_instance_q15" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv419riscv_pid_reset_q31P22riscv_pid_instance_q31">
<span id="_CPPv319riscv_pid_reset_q31P22riscv_pid_instance_q31"></span><span id="_CPPv219riscv_pid_reset_q31P22riscv_pid_instance_q31"></span><span id="riscv_pid_reset_q31__riscv_pid_instance_q31P"></span><span class="target" id="group__PID_1ga9014e1ffacd82a5ecf90f11aa626caab"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_reset_q31</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_q31" title="riscv_pid_instance_q31"><span class="n"><span class="pre">riscv_pid_instance_q31</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419riscv_pid_reset_q31P22riscv_pid_instance_q31" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv422riscv_pid_instance_q15">
<span id="_CPPv322riscv_pid_instance_q15"></span><span id="_CPPv222riscv_pid_instance_q15"></span><span id="riscv_pid_instance_q15"></span><span class="target" id="structriscv__pid__instance__q15"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_instance_q15</span></span></span><a class="headerlink" href="#_CPPv422riscv_pid_instance_q15" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv422riscv_pid_instance_q31">
<span id="_CPPv322riscv_pid_instance_q31"></span><span id="_CPPv222riscv_pid_instance_q31"></span><span id="riscv_pid_instance_q31"></span><span class="target" id="structriscv__pid__instance__q31"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_instance_q31</span></span></span><a class="headerlink" href="#_CPPv422riscv_pid_instance_q31" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv422riscv_pid_instance_f32">
<span id="_CPPv322riscv_pid_instance_f32"></span><span id="_CPPv222riscv_pid_instance_f32"></span><span id="riscv_pid_instance_f32"></span><span class="target" id="structriscv__pid__instance__f32"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_instance_f32</span></span></span><a class="headerlink" href="#_CPPv422riscv_pid_instance_f32" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__PID"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">PID</span></span></dt>
<dd><p>A Proportional Integral Derivative (PID) controller is a generic feedback control loop mechanism widely used in industrial control systems. A PID controller is the most commonly used type of feedback controller. </p>
<p>This set of functions implements (PID) controllers for Q15, Q31, and floating-point data types. The functions operate on a single sample of data and each call to the function returns a single processed value. <code class="docutils literal notranslate"><span class="pre">S</span></code> points to an instance of the PID control data structure. <code class="docutils literal notranslate"><span class="pre">in</span></code> is the input sample value. The functions return the output value.</p>
<p><dl class="simple">
<dt><strong>Algorithm:</strong></dt><dd><p></p>
</dd>
<dt><strong></strong></dt><dd><p>where <code class="docutils literal notranslate"><span class="pre">Kp</span></code> is proportional constant, <code class="docutils literal notranslate"><span class="pre">Ki</span></code> is Integral constant and <code class="docutils literal notranslate"><span class="pre">Kd</span></code> is Derivative constant</p>
</dd>
<dt><strong></strong></dt><dd><p><img alt="../../../_images/PID.png" src="../../../_images/PID.png" /></p>
</dd>
<dt><strong></strong></dt><dd><p>The PID controller calculates an “error” value as the difference between the measured output and the reference input. The controller attempts to minimize the error by adjusting the process control inputs. The proportional value determines the reaction to the current error, the integral value determines the reaction based on the sum of recent errors, and the derivative value determines the reaction based on the rate at which the error has been changing.</p>
</dd>
<dt><strong>Instance Structure</strong></dt><dd><p>The Gains A0, A1, A2 and state variables for a PID controller are stored together in an instance data structure. A separate instance structure must be defined for each PID Controller. There are separate instance structure declarations for each of the 3 supported data types.</p>
</dd>
<dt><strong>Reset Functions</strong></dt><dd><p>There is also an associated reset function for each data type which clears the state array.</p>
</dd>
<dt><strong>Initialization Functions</strong></dt><dd><p>There is also an associated initialization function for each data type. The initialization function performs the following operations:<ul class="simple">
<li><p>Initializes the Gains A0, A1, A2 from Kp,Ki, Kd gains.</p></li>
<li><p>Zeros out the values in the state buffer.</p></li>
</ul>
</p>
</dd>
<dt><strong></strong></dt><dd><p>Instance structure cannot be placed into a const data section and it is recommended to use the initialization function.</p>
</dd>
<dt><strong>Fixed-Point Behavior</strong></dt><dd><p>Care must be taken when using the fixed-point versions of the PID Controller functions. In particular, the overflow and saturation behavior of the accumulator used in each function must be considered. Refer to the function specific documentation below for usage guidelines. </p>
</dd>
</dl>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1gabafba8b6028791a8df9336fda2d89eb4"></span><span class="sig-name descname"><span class="pre">__STATIC_FORCEINLINE</span> <span class="pre">float32_t</span> <span class="pre">riscv_pid_f32</span> <span class="pre">(riscv_pid_instance_f32</span> <span class="pre">*S,</span> <span class="pre">float32_t</span> <span class="pre">in)</span></span></dt>
<dd><p>Process function for the floating-point PID Control. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> – <strong>[inout]</strong> is an instance of the floating-point PID Control structure </p></li>
<li><p><strong>in</strong> – <strong>[in]</strong> input sample to process </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>processed output sample. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1ga107785522e399b35e5ba5b9181d57726"></span><span class="sig-name descname"><span class="pre">__STATIC_FORCEINLINE</span> <span class="pre">q31_t</span> <span class="pre">riscv_pid_q31</span> <span class="pre">(riscv_pid_instance_q31</span> <span class="pre">*S,</span> <span class="pre">q31_t</span> <span class="pre">in)</span></span></dt>
<dd><p>Process function for the Q31 PID Control. </p>
<p><dl class="simple">
<dt><strong>Scaling and Overflow Behavior</strong></dt><dd><p>The function is implemented using an internal 64-bit accumulator. The accumulator has a 2.62 format and maintains full precision of the intermediate multiplication results but provides only a single guard bit. Thus, if the accumulator result overflows it wraps around rather than clip. In order to avoid overflows completely the input signal must be scaled down by 2 bits as there are four additions. After all multiply-accumulates are performed, the 2.62 accumulator is truncated to 1.32 format and then saturated to 1.31 format. </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> – <strong>[inout]</strong> points to an instance of the Q31 PID Control structure </p></li>
<li><p><strong>in</strong> – <strong>[in]</strong> input sample to process </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>processed output sample.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1gaf1220917c29e049f8127ca8808bd703f"></span><span class="sig-name descname"><span class="pre">__STATIC_FORCEINLINE</span> <span class="pre">q15_t</span> <span class="pre">riscv_pid_q15</span> <span class="pre">(riscv_pid_instance_q15</span> <span class="pre">*S,</span> <span class="pre">q15_t</span> <span class="pre">in)</span></span></dt>
<dd><p>Process function for the Q15 PID Control. </p>
<p><dl class="simple">
<dt><strong>Scaling and Overflow Behavior</strong></dt><dd><p>The function is implemented using a 64-bit internal accumulator. Both Gains and state variables are represented in 1.15 format and multiplications yield a 2.30 result. The 2.30 intermediate results are accumulated in a 64-bit accumulator in 34.30 format. There is no risk of internal overflow with this approach and the full precision of intermediate multiplications is preserved. After all additions have been performed, the accumulator is truncated to 34.15 format by discarding low 15 bits. Lastly, the accumulator is saturated to yield a result in 1.15 format. </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> – <strong>[inout]</strong> points to an instance of the Q15 PID Control structure </p></li>
<li><p><strong>in</strong> – <strong>[in]</strong> input sample to process </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>processed output sample.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1ga88096786fde77479ae2fc7f0b4a060b1"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_init_f32</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_f32" title="riscv_pid_instance_f32"><span class="n"><span class="pre">riscv_pid_instance_f32</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">resetStateFlag</span></span><span class="sig-paren">)</span><br /></dt>
<dd><p>Initialization function for the floating-point PID Control. </p>
<p><dl class="simple">
<dt><strong>Details</strong></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">resetStateFlag</span></code><p>specifies whether to set state to zero or not.</p>
<p>The function computes the structure fields:</p>
<code class="docutils literal notranslate"><span class="pre">A0</span></code>, <code class="docutils literal notranslate"><span class="pre">A1</span></code> <code class="docutils literal notranslate"><span class="pre">A2</span></code> using the proportional gain( <code class="docutils literal notranslate"><span class="pre">Kp</span></code>), integral gain( <code class="docutils literal notranslate"><span class="pre">Ki</span></code>) and derivative gain( <code class="docutils literal notranslate"><span class="pre">Kd</span></code>) also sets the state variables to all zeros. </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> – <strong>[inout]</strong> points to an instance of the PID structure </p></li>
<li><p><strong>resetStateFlag</strong> – <strong>[in]</strong> <ul>
<li><p>value = 0: no change in state</p></li>
<li><p>value = 1: reset state </p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1ga3addd5e4ea6d8aeaf4f1ecd7cf5c6c01"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_init_q15</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_q15" title="riscv_pid_instance_q15"><span class="n"><span class="pre">riscv_pid_instance_q15</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">resetStateFlag</span></span><span class="sig-paren">)</span><br /></dt>
<dd><p>Initialization function for the Q15 PID Control. </p>
<p><dl class="simple">
<dt><strong>Details</strong></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">resetStateFlag</span></code><p>specifies whether to set state to zero or not.</p>
<p>The function computes the structure fields:</p>
<code class="docutils literal notranslate"><span class="pre">A0</span></code>, <code class="docutils literal notranslate"><span class="pre">A1</span></code> <code class="docutils literal notranslate"><span class="pre">A2</span></code> using the proportional gain( <code class="docutils literal notranslate"><span class="pre">Kp</span></code>), integral gain( <code class="docutils literal notranslate"><span class="pre">Ki</span></code>) and derivative gain( <code class="docutils literal notranslate"><span class="pre">Kd</span></code>) also sets the state variables to all zeros. </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> – <strong>[inout]</strong> points to an instance of the Q15 PID structure </p></li>
<li><p><strong>resetStateFlag</strong> – <strong>[in]</strong> <ul>
<li><p>value = 0: no change in state</p></li>
<li><p>value = 1: reset state </p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1ga2ca8b149095d04d8dc73e4a052be1c8c"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_init_q31</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_q31" title="riscv_pid_instance_q31"><span class="n"><span class="pre">riscv_pid_instance_q31</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">resetStateFlag</span></span><span class="sig-paren">)</span><br /></dt>
<dd><p>Initialization function for the Q31 PID Control. </p>
<p><dl class="simple">
<dt><strong>Details</strong></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">resetStateFlag</span></code><p>specifies whether to set state to zero or not.</p>
<p>The function computes the structure fields:</p>
<code class="docutils literal notranslate"><span class="pre">A0</span></code>, <code class="docutils literal notranslate"><span class="pre">A1</span></code> <code class="docutils literal notranslate"><span class="pre">A2</span></code> using the proportional gain( <code class="docutils literal notranslate"><span class="pre">Kp</span></code>), integral gain( <code class="docutils literal notranslate"><span class="pre">Ki</span></code>) and derivative gain( <code class="docutils literal notranslate"><span class="pre">Kd</span></code>) also sets the state variables to all zeros. </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> – <strong>[inout]</strong> points to an instance of the Q31 PID structure </p></li>
<li><p><strong>resetStateFlag</strong> – <strong>[in]</strong> <ul>
<li><p>value = 0: no change in state</p></li>
<li><p>value = 1: reset state </p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1ga436fc2266fe54087bc8b203eb675087c"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_reset_f32</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_f32" title="riscv_pid_instance_f32"><span class="n"><span class="pre">riscv_pid_instance_f32</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span><span class="sig-paren">)</span><br /></dt>
<dd><p>Reset function for the floating-point PID Control. </p>
<p><dl class="simple">
<dt><strong>Details</strong></dt><dd><p>The function resets the state buffer to zeros. </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>S</strong> – <strong>[inout]</strong> points to an instance of the floating-point PID structure </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1gaf85e1dc20d915a787ce687e1a80f2bdc"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_reset_q15</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_q15" title="riscv_pid_instance_q15"><span class="n"><span class="pre">riscv_pid_instance_q15</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span><span class="sig-paren">)</span><br /></dt>
<dd><p>Reset function for the Q15 PID Control. </p>
<p><dl class="simple">
<dt><strong>Details</strong></dt><dd><p>The function resets the state buffer to zeros. </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>S</strong> – <strong>[inout]</strong> points to an instance of the Q15 PID structure </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="group__PID_1ga9014e1ffacd82a5ecf90f11aa626caab"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_reset_q31</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv422riscv_pid_instance_q31" title="riscv_pid_instance_q31"><span class="n"><span class="pre">riscv_pid_instance_q31</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">S</span></span><span class="sig-paren">)</span><br /></dt>
<dd><p>Reset function for the Q31 PID Control. </p>
<p><dl class="simple">
<dt><strong>Details</strong></dt><dd><p>The function resets the state buffer to zeros. </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>S</strong> – <strong>[inout]</strong> points to an instance of the Q31 PID structure </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="cpp struct">
<dt class="sig sig-object cpp">
<span class="target" id="structriscv__pid__instance__q15"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_instance_q15</span></span></span><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;&gt;</em></div>
<p>Instance structure for the Q15 PID Control. </p>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp">
<span class="target" id="structriscv__pid__instance__q31"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_instance_q31</span></span></span><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;&gt;</em></div>
<p>Instance structure for the Q31 PID Control. </p>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp">
<span class="target" id="structriscv__pid__instance__f32"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">riscv_pid_instance_f32</span></span></span><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;&gt;</em></div>
<p>Instance structure for the floating-point PID Control. </p>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api_sincos.html" class="btn btn-neutral float-left" title="Sine Cosine" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api_park.html" class="btn btn-neutral float-right" title="Vector Park Transform" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-Present, Nuclei.
      <span class="lastupdated">Last updated on May 23, 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>