

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Graphic Audio Equalizer Example &mdash; NMSIS 1.0.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Linear Interpolate Example" href="api_linearinterpexample.html" />
    <link rel="prev" title="FIR Lowpass Filter Example" href="api_firlpf.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/nmsis_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introduction.html">Nuclei MCU Software Interface Standard(NMSIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core/index.html">NMSIS Core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">NMSIS DSP</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get_started.html">Using NMSIS-DSP</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">NMSIS DSP API</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../api_groupexamples.html">Examples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="api_bayesexample.html">Bayes Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_classmarks.html">Class Marks Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_convolutionexample.html">Convolution Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_dotproductexample.html">Dot Product Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_frequencybin.html">Frequency Bin Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_firlpf.html">FIR Lowpass Filter Example</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Graphic Audio Equalizer Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_linearinterpexample.html">Linear Interpolate Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_matrixexample.html">Matrix Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_signalconvergence.html">Signal Convergence Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_sincosexample.html">SineCosine Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_svmexample.html">SVM Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_varianceexample.html">Variance Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupmath.html">Basic Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupbayes.html">Bayesian estimators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupcmplxmath.html">Complex Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupcontroller.html">Controller Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupdistance.html">Distance functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupfastmath.html">Fast Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupfilters.html">Filtering Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupinterpolation.html">Interpolation Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupmatrix.html">Matrix Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupquaternionmath.html">Quaternion Math Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupstats.html">Statistics Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupsupport.html">Support Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_groupsvm.html">SVM Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_grouptransforms.html">Transform Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../nn/index.html">NMSIS NN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendix.html">Appendix</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NMSIS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">NMSIS DSP</a> &raquo;</li>
        
          <li><a href="../index.html">NMSIS DSP API</a> &raquo;</li>
        
          <li><a href="../api_groupexamples.html">Examples</a> &raquo;</li>
        
      <li>Graphic Audio Equalizer Example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/dsp/api/groupexamples/api_geq5band.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="graphic-audio-equalizer-example">
<span id="nmsis-dsp-api-graphic-audio-equalizer-example"></span><h1>Graphic Audio Equalizer Example<a class="headerlink" href="#graphic-audio-equalizer-example" title="Permalink to this headline">Â¶</a></h1>
<dl class="group">
<dt>
<span class="target" id="group__GEQ5Band"></span><em>group</em> <code class="sig-name descname">GEQ5Band</code></dt>
<dd><p><strong> Refer </strong> riscv_graphic_equalizer_example_q31.c <dl class="simple">
<dt><strong>Description:</strong></dt><dd><p></p>
</dd>
<dt><strong></strong></dt><dd><p>This example demonstrates how a 5-band graphic equalizer can be constructed using the Biquad cascade functions. A graphic equalizer is used in audio applications to vary the tonal quality of the audio.</p>
</dd>
<dt><strong>Block Diagram:</strong></dt><dd><p></p>
</dd>
<dt><strong></strong></dt><dd><p>The design is based on a cascade of 5 filter sections. <p> Each filter section is 4th order and consists of a cascade of two Biquads. Each filter has a nominal gain of 0 dB (1.0 in linear units) and boosts or cuts signals within a specific frequency range. The edge frequencies between the 5 bands are 100, 500, 2000, and 6000 Hz. Each band has an adjustable boost or cut in the range of +/- 9 dB. For example, the band that extends from 500 to 2000 Hz has the response shown below: </p>
<img alt="../../../_images/GEQ_signalflow.png" src="../../../_images/GEQ_signalflow.png" /></p>
</dd>
<dt><strong></strong></dt><dd><p><img alt="../../../_images/GEQ_bandresponse.png" src="../../../_images/GEQ_bandresponse.png" /></p>
</dd>
<dt><strong></strong></dt><dd><p>With 1 dB steps, each filter has a total of 19 different settings. The filter coefficients for all possible 19 settings were precomputed in MATLAB and stored in a table. With 5 different tables, there are a total of 5 x 19 = 95 different 4th order filters. All 95 responses are shown below: </p>
</dd>
<dt><strong></strong></dt><dd><p><img alt="../../../_images/GEQ_allbandresponse.png" src="../../../_images/GEQ_allbandresponse.png" /></p>
</dd>
<dt><strong></strong></dt><dd><p>Each 4th order filter has 10 coefficents for a grand total of 950 different filter coefficients that must be tabulated. The input and output data is in Q31 format. For better noise performance, the two low frequency bands are implemented using the high precision 32x64-bit Biquad filters. The remaining 3 high frequency bands use standard 32x32-bit Biquad filters. The input signal used in the example is a logarithmic chirp. </p>
</dd>
<dt><strong></strong></dt><dd><p><img alt="../../../_images/GEQ_inputchirp.png" src="../../../_images/GEQ_inputchirp.png" /></p>
</dd>
<dt><strong></strong></dt><dd><p>The array <code class="docutils literal notranslate"><span class="pre">bandGains</span></code> specifies the gain in dB to apply in each band. For example, if <code class="docutils literal notranslate"><span class="pre">bandGains={0,</span> <span class="pre">-3,</span> <span class="pre">6,</span> <span class="pre">4,</span> <span class="pre">-6};</span></code> then the output signal will be: </p>
</dd>
<dt><strong></strong></dt><dd><p><img alt="../../../_images/GEQ_outputchirp.png" src="../../../_images/GEQ_outputchirp.png" /></p>
</dd>
<dt><strong></strong></dt><dd><p></p>
</dd>
<dt><strong>Note</strong></dt><dd><p>The output chirp signal follows the gain or boost of each band. </p>
</dd>
<dt><strong></strong></dt><dd><p></p>
</dd>
<dt><strong>Variables Description:</strong></dt><dd><p></p>
</dd>
<dt><strong></strong></dt><dd><p><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">testInput_f32</span></code> points to the input data </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">testRefOutput_f32</span></code> points to the reference output data </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">testOutput</span></code> points to the test output data </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inputQ31</span></code> temporary input buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outputQ31</span></code> temporary output buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">biquadStateBand1Q31</span></code> points to state buffer for band1 </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">biquadStateBand2Q31</span></code> points to state buffer for band2 </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">biquadStateBand3Q31</span></code> points to state buffer for band3 </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">biquadStateBand4Q31</span></code> points to state buffer for band4 </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">biquadStateBand5Q31</span></code> points to state buffer for band5 </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coeffTable</span></code> points to coefficient buffer for all bands </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gainDB</span></code> gain buffer which has gains applied for all the bands</p></li>
</ul>
</p>
</dd>
<dt><strong>NMSIS DSP Software Library Functions Used:</strong></dt><dd><p></p>
</dd>
<dt><strong></strong></dt><dd><p><ul class="simple">
<li><p>riscv_biquad_cas_df1_32x64_init_q31()</p></li>
<li><p>riscv_biquad_cas_df1_32x64_q31()</p></li>
<li><p>riscv_biquad_cascade_df1_init_q31()</p></li>
<li><p>riscv_biquad_cascade_df1_q31()</p></li>
<li><p>riscv_scale_q31()</p></li>
<li><p>riscv_scale_f32()</p></li>
<li><p>riscv_float_to_q31()</p></li>
<li><p>riscv_q31_to_float()</p></li>
</ul>
</p>
</dd>
</dl>
</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_linearinterpexample.html" class="btn btn-neutral float-right" title="Linear Interpolate Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api_firlpf.html" class="btn btn-neutral float-left" title="FIR Lowpass Filter Example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-Present, Nuclei
      <span class="lastupdated">
        Last updated on Jan 18, 2022.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>